# نظرة عامة على تطبيق «المدار»

منصة «المدار» هي حل متكامل لإدارة الأعمال القانونية يشمل مراقبة الأداء، وإدارة الدعاوى، والتحقيقات، والعقود، والمشورة القانونية، إضافةً إلى محرر مستندات احترافي يعمل دون اتصال. الواجهة مبنية بـ **React + Vite** مع حماية عبر المصادقة للوصول إلى لوحة التحكم والمحرر بعد تسجيل الدخول.

## هيكل الواجهة والتنقل
- يعتمد التوجيه على `react-router-dom` مع مزود مصادقة يفرض تسجيل الدخول قبل دخول لوحة التحكم أو محرر المستندات، بينما يُعاد توجيه المستخدمين غير المصادقين إلى صفحة الدخول. 【F:frontend/src/router/AppRouter.jsx†L1-L68】
- يتم تحميل الصفحات الثقيلة كسولًا (Lazy Loading) مع مؤثرات تحميل مخصصة لتحسين تجربة المستخدم.【F:frontend/src/router/AppRouter.jsx†L8-L60】

## لوحة التحكم والتحليلات
- تعرض لوحة التحكم بطاقات مؤشرات رئيسية (إجمالي الدعاوى، القضايا الرابحة، نسبة النجاح، الجلسات النشطة) مع رسوم بيانية صغيرة للدلالة على الاتجاهات. 【F:frontend/src/features/dashboard/pages/Dashboard.jsx†L34-L99】
- تتضمن رسومات بيانية شهرية للحالات والجلسات، بالإضافة إلى توزيع جغرافي تفاعلي بخرائط مصغرة وتفاصيلها. 【F:frontend/src/features/dashboard/pages/Dashboard.jsx†L100-L133】
- توفر مخططًا دائريًا لنتائج القضايا وجدولًا بأحدث الدعاوى لسرعة المتابعة والتنزيل. 【F:frontend/src/features/dashboard/pages/Dashboard.jsx†L134-L159】

## أقسام العمليات القانونية
- **التقاضي:** تبويب يفرق بين الدعاوى «من الشركة» و«ضد الشركة»، مع جدول موحّد، وحذف مؤكد، وتحديث مباشر للبيانات. 【F:frontend/src/pages/LitigationsPage.jsx†L17-L133】
- **التحقيقات:** جدول بيانات قابل للتخصيص بالأعمدة الرئيسية (الموظف، الجهة المحيلة، الموضوع، رقم القضية، الحالة) مع نوافذ منبثقة للإضافة/التعديل وحذف مؤكد. 【F:frontend/src/pages/InvestigationsPage.jsx†L33-L178】
- **العقود:** تبويب بين العقود المحلية والدولية مع تحميل تصنيفات العقود، وجداول قابلة للتحديث، وإعادة توجيه في حال نقص الصلاحيات. 【F:frontend/src/pages/ContractsPage.jsx†L12-L114】
- **المشورة القانونية:** إدارة الآراء القانونية وفق نوع المشورة والموضوع وتاريخ ورقم المشورة، مع روابط للمرفقات، وصلاحيات حسب الأدوار، ونوافذ منبثقة للإضافة أو الحذف. 【F:frontend/src/pages/LegalAdvicePage.jsx†L17-L142】

## محرر المستندات الاحترافي
- يعتمد المحرر على مكتبة **tiptap** مع دعم الكتابة العربية باتجاه من اليمين لليسار، وتصدير المستندات إلى PDF وDOCX، مع اقتراحات مدعومة بالذكاء الاصطناعي. 【F:frontend/README.md†L1-L18】
- يضم أدوات تنسيق متقدمة (محاذاة، ألوان، تظليل، خطوط، جداول، صور، روابط) مع عدّ كلمات/أحرف وتخزين تلقائي للمسودات. 【F:frontend/src/components/editor/DocumentEditor.tsx†L29-L109】
- يدعم العمل دون اتصال عبر تسجيل Service Worker، إضافةً إلى إنشاء مستندات جديدة، الحفظ المحلي، والتصدير إلى HTML، PDF، أو DOCX مع تنبيهات نجاح/فشل واضحة. 【F:frontend/src/components/editor/DocumentEditor.tsx†L123-L220】

## تجربة المستخدم والأداء
- استخدام الحركة عبر Framer Motion لجعل التبديل بين التبويبات والجداول سلسًا في جميع الأقسام. 【F:frontend/src/features/dashboard/pages/Dashboard.jsx†L89-L159】【F:frontend/src/pages/LitigationsPage.jsx†L44-L121】
- تحميل كسول للمكونات الثقيلة (مثل الجداول والنماذج) لتقليل وقت التحميل الأولي وتحسين الأداء العام. 【F:frontend/src/pages/LitigationsPage.jsx†L10-L18】【F:frontend/src/pages/ContractsPage.jsx†L7-L10】

هذا الوصف يوفر لمحة احترافية شاملة عن قدرات التطبيق وبنيته وأهم أقسامه التشغيلية.
