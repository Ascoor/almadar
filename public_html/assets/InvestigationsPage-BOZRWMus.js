const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/InvestigationModal-Eb0hHP87.js","assets/pdf-_01J5l0m.js","assets/react-DxiZ5OBW.js","assets/pdf-Du6EuK7o.css","assets/ModalCard-Bqi_hoDA.js","assets/GlobalConfirmDeleteModal-DPvq9hXw.js"])))=>i.map(i=>d[i]);
import{o as k,z as w,m,B as I,C as E,t as n,D as C,E as D,_ as u}from"./index-C9wc903-.js";import{j as t}from"./pdf-_01J5l0m.js";import{a as s}from"./react-DxiZ5OBW.js";import{T as b}from"./TableComponent-oKqWs0n5.js";import N from"./SectionHeader-CPTYPmPH.js";import"./vendor-CTvvdsW_.js";const S="/assets/inv-icon-DGMk-5FX.png",M=s.lazy(()=>u(()=>import("./InvestigationModal-Eb0hHP87.js"),__vite__mapDeps([0,1,2,3,4]))),O=s.lazy(()=>u(()=>import("./GlobalConfirmDeleteModal-DPvq9hXw.js"),__vite__mapDeps([5,1,2,3])));function A(){const[c,i]=s.useState(!1),[o,l]=s.useState(null),[a,r]=s.useState(null),p=k(),y="investigations",{data:x,refetch:d}=w(),g=x?.data?.data||[],v=async e=>{try{o?(await E(o.id,e),n.success("تم التعديل بنجاح")):(await C(e),n.success("تمت الإضافة بنجاح")),i(!1),l(null),await d()}catch{n.error("فشل في الحفظ")}},f=e=>{l(e),i(!0)},h=async()=>{if(a)try{await D(a.id),n.success("تم حذف التحقيق بنجاح"),await d()}catch{n.error("فشل حذف التحقيق")}finally{r(null)}},j=[{key:"employee_name",text:"الموظف"},{key:"source",text:"الجهة المحيلة"},{key:"subject",text:"الموضوع"},{key:"case_number",text:"رقم القضية"},{key:"status",text:"الحالة"}],_={status:e=>t.jsx("span",{className:"font-semibold text-red-600 dark:text-yellow-300",children:e.status})};return t.jsxs("div",{className:"p-6 min-h-screen",children:[t.jsx(m.div,{initial:{opacity:0,y:-100},animate:{opacity:1,y:0},exit:{opacity:0,y:-40},transition:{type:"spring",stiffness:70,damping:14},children:t.jsx(N,{icon:S,listName:"قسم التحقيقات"})},"header"),t.jsx(m.div,{initial:{opacity:0,y:100},animate:{opacity:1,y:0},exit:{opacity:0,y:60},transition:{type:"spring",stiffness:60,damping:14,delay:.1},className:"rounded-xl bg-card text-fg p-4 shadow-md",children:t.jsx(b,{title:"قسم التحقيقات القانونية",data:g,headers:j,customRenderers:_,moduleName:y,renderAddButton:{render:()=>t.jsxs(I,{variant:"default",onClick:()=>i(!0),children:["إضافة تحقيق جديد",t.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"w-4 h-4 ml-2",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 4v16m8-8H4"})})]})},onEdit:f,onDelete:e=>r(e),onRowClick:e=>p(`/legal/investigations/${e.id}`,{state:e})})}),t.jsxs(s.Suspense,{fallback:null,children:[c&&t.jsx(M,{isOpen:c,onClose:()=>{i(!1),l(null)},initialData:o,onSubmit:v}),a&&t.jsx(O,{isOpen:!!a,onClose:()=>r(null),onConfirm:h,itemName:a?.employee_name})]})]})}export{A as default};
