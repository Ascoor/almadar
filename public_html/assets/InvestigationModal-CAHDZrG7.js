import{r as d,j as e}from"./pdf-D5yLTPdL.js";import{M as p}from"./ModalCard-BQAsNCRr.js";import"./react-UnWXGYuj.js";function v({isOpen:c,onClose:n,onSubmit:g,initialData:s}){const[r,t]=d.useState({employee_name:"",source:"",subject:"",case_number:"",status:"open",notes:""}),[u,o]=d.useState(!1);d.useEffect(()=>{s?t(s):m()},[s]);const m=()=>{t({employee_name:"",source:"",subject:"",case_number:"",status:"open",notes:""})},a=l=>{const{name:i,value:b}=l.target;t(y=>({...y,[i]:b}))},x=async()=>{o(!0);try{await g(r),n()}catch(l){console.error("❌ Error saving investigation:",l)}finally{o(!1)}};return e.jsx(p,{isOpen:c,title:s?"تعديل تحقيق":"إضافة تحقيق",onClose:n,onSubmit:x,loading:u,children:e.jsx("div",{className:"space-y-6",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm mb-1 text-gray-700 dark:text-gray-300",children:"اسم الموظف"}),e.jsx("input",{type:"text",name:"employee_name",value:r.employee_name,onChange:a,required:!0,className:"w-full p-2 border rounded-lg dark:bg-gray-700 dark:border-gray-600 dark:text-gray-100"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm mb-1 text-gray-700 dark:text-gray-300",children:"الجهة المحيلة"}),e.jsx("input",{type:"text",name:"source",value:r.source,onChange:a,required:!0,className:"w-full p-2 border rounded-lg dark:bg-gray-700 dark:border-gray-600 dark:text-gray-100"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm mb-1 text-gray-700 dark:text-gray-300",children:"موضوع التحقيق"}),e.jsx("input",{type:"text",name:"subject",value:r.subject,onChange:a,required:!0,className:"w-full p-2 border rounded-lg dark:bg-gray-700 dark:border-gray-600 dark:text-gray-100"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm mb-1 text-gray-700 dark:text-gray-300",children:"رقم القضية"}),e.jsx("input",{type:"text",name:"case_number",value:r.case_number,onChange:a,required:!0,className:"w-full p-2 border rounded-lg dark:bg-gray-700 dark:border-gray-600 dark:text-gray-100"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm mb-1 text-gray-700 dark:text-gray-300",children:"الحالة"}),e.jsxs("select",{name:"status",value:r.status,onChange:a,className:"w-full p-2 border rounded-lg dark:bg-gray-700 dark:border-gray-600 dark:text-gray-100",children:[e.jsx("option",{value:"open",children:"مفتوح"}),e.jsx("option",{value:"in_progress",children:"قيد التنفيذ"}),e.jsx("option",{value:"closed",children:"مغلق"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm mb-1 text-gray-700 dark:text-gray-300",children:"ملاحظات"}),e.jsx("textarea",{name:"notes",rows:2,value:r.notes,onChange:a,className:"w-full p-2 border rounded-lg dark:bg-gray-700 dark:border-gray-600 dark:text-gray-100"})]})]})})})}export{v as default};
