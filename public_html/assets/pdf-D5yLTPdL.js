var Ks=Object.defineProperty;var Tr=c=>{throw TypeError(c)};var Js=(c,u,_t)=>u in c?Ks(c,u,{enumerable:!0,configurable:!0,writable:!0,value:_t}):c[u]=_t;var $e=(c,u,_t)=>Js(c,typeof u!="symbol"?u+"":u,_t),xi=(c,u,_t)=>u.has(c)||Tr("Cannot "+_t);var e=(c,u,_t)=>(xi(c,u,"read from private field"),_t?_t.call(c):u.get(c)),pt=(c,u,_t)=>u.has(c)?Tr("Cannot add the same private member more than once"):u instanceof WeakSet?u.add(c):u.set(c,_t),gt=(c,u,_t,l)=>(xi(c,u,"write to private field"),l?l.call(c,_t):u.set(c,_t),_t),J=(c,u,_t)=>(xi(c,u,"access private method"),_t);var Hn=(c,u,_t,l)=>({set _(E){gt(c,u,E,_t)},get _(){return e(c,u,l)}});import{r as requireReact,g as getDefaultExportFromCjs,a as getAugmentedNamespace}from"./react-UnWXGYuj.js";function _mergeNamespaces(c,u){for(var _t=0;_t<u.length;_t++){const l=u[_t];if(typeof l!="string"&&!Array.isArray(l)){for(const E in l)if(E!=="default"&&!(E in c)){const t=Object.getOwnPropertyDescriptor(l,E);t&&Object.defineProperty(c,E,t.get?t:{enumerable:!0,get:()=>l[E]})}}}return Object.freeze(Object.defineProperty(c,Symbol.toStringTag,{value:"Module"}))}var jsxRuntime={exports:{}},reactJsxRuntime_production_min={};/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var hasRequiredReactJsxRuntime_production_min;function requireReactJsxRuntime_production_min(){if(hasRequiredReactJsxRuntime_production_min)return reactJsxRuntime_production_min;hasRequiredReactJsxRuntime_production_min=1;var c=requireReact(),u=Symbol.for("react.element"),_t=Symbol.for("react.fragment"),l=Object.prototype.hasOwnProperty,E=c.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,t={key:!0,ref:!0,__self:!0,__source:!0};function Z(Ct,W,T){var d,H={},j=null,y=null;T!==void 0&&(j=""+T),W.key!==void 0&&(j=""+W.key),W.ref!==void 0&&(y=W.ref);for(d in W)l.call(W,d)&&!t.hasOwnProperty(d)&&(H[d]=W[d]);if(Ct&&Ct.defaultProps)for(d in W=Ct.defaultProps,W)H[d]===void 0&&(H[d]=W[d]);return{$$typeof:u,type:Ct,key:j,ref:y,props:H,_owner:E.current}}return reactJsxRuntime_production_min.Fragment=_t,reactJsxRuntime_production_min.jsx=Z,reactJsxRuntime_production_min.jsxs=Z,reactJsxRuntime_production_min}var hasRequiredJsxRuntime;function requireJsxRuntime(){return hasRequiredJsxRuntime||(hasRequiredJsxRuntime=1,jsxRuntime.exports=requireReactJsxRuntime_production_min()),jsxRuntime.exports}var jsxRuntimeExports=requireJsxRuntime(),reactExports=requireReact();const React=getDefaultExportFromCjs(reactExports),React$1=_mergeNamespaces({__proto__:null,default:React},[reactExports]);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const toKebabCase=c=>c.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),toCamelCase=c=>c.replace(/^([A-Z])|[\s-_]+(\w)/g,(u,_t,l)=>l?l.toUpperCase():_t.toLowerCase()),toPascalCase=c=>{const u=toCamelCase(c);return u.charAt(0).toUpperCase()+u.slice(1)},mergeClasses=(...c)=>c.filter((u,_t,l)=>!!u&&u.trim()!==""&&l.indexOf(u)===_t).join(" ").trim(),hasA11yProp=c=>{for(const u in c)if(u.startsWith("aria-")||u==="role"||u==="title")return!0};/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var defaultAttributes={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Icon=reactExports.forwardRef(({color:c="currentColor",size:u=24,strokeWidth:_t=2,absoluteStrokeWidth:l,className:E="",children:t,iconNode:Z,...Ct},W)=>reactExports.createElement("svg",{ref:W,...defaultAttributes,width:u,height:u,stroke:c,strokeWidth:l?Number(_t)*24/Number(u):_t,className:mergeClasses("lucide",E),...!t&&!hasA11yProp(Ct)&&{"aria-hidden":"true"},...Ct},[...Z.map(([T,d])=>reactExports.createElement(T,d)),...Array.isArray(t)?t:[t]]));/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const createLucideIcon=(c,u)=>{const _t=reactExports.forwardRef(({className:l,...E},t)=>reactExports.createElement(Icon,{ref:t,iconNode:u,className:mergeClasses(`lucide-${toKebabCase(toPascalCase(c))}`,`lucide-${c}`,l),...E}));return _t.displayName=toPascalCase(c),_t};/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$S=[["path",{d:"m9 6-6 6 6 6",key:"7v63n9"}],["path",{d:"M3 12h14",key:"13k4hi"}],["path",{d:"M21 19V5",key:"b4bplr"}]],ArrowLeftFromLine=createLucideIcon("arrow-left-from-line",__iconNode$S);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$R=[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]],ArrowLeft=createLucideIcon("arrow-left",__iconNode$R);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$Q=[["path",{d:"M3 5v14",key:"1nt18q"}],["path",{d:"M21 12H7",key:"13ipq5"}],["path",{d:"m15 18 6-6-6-6",key:"6tx3qv"}]],ArrowRightFromLine=createLucideIcon("arrow-right-from-line",__iconNode$Q);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$P=[["path",{d:"M3.85 8.62a4 4 0 0 1 4.78-4.77 4 4 0 0 1 6.74 0 4 4 0 0 1 4.78 4.78 4 4 0 0 1 0 6.74 4 4 0 0 1-4.77 4.78 4 4 0 0 1-6.75 0 4 4 0 0 1-4.78-4.77 4 4 0 0 1 0-6.76Z",key:"3c2336"}],["path",{d:"M16 8h-6a2 2 0 1 0 0 4h4a2 2 0 1 1 0 4H8",key:"1h4pet"}],["path",{d:"M12 18V6",key:"zqpxq5"}]],BadgeDollarSign=createLucideIcon("badge-dollar-sign",__iconNode$P);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$O=[["path",{d:"M10.268 21a2 2 0 0 0 3.464 0",key:"vwvbt9"}],["path",{d:"M3.262 15.326A1 1 0 0 0 4 17h16a1 1 0 0 0 .74-1.673C19.41 13.956 18 12.499 18 8A6 6 0 0 0 6 8c0 4.499-1.411 5.956-2.738 7.326",key:"11g9vi"}]],Bell=createLucideIcon("bell",__iconNode$O);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$N=[["path",{d:"m19 21-7-4-7 4V5a2 2 0 0 1 2-2h10a2 2 0 0 1 2 2v16z",key:"1fy3hk"}],["line",{x1:"12",x2:"12",y1:"7",y2:"13",key:"1cppfj"}],["line",{x1:"15",x2:"9",y1:"10",y2:"10",key:"1gty7f"}]],BookmarkPlus=createLucideIcon("bookmark-plus",__iconNode$N);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$M=[["path",{d:"M6 22V4a2 2 0 0 1 2-2h8a2 2 0 0 1 2 2v18Z",key:"1b4qmf"}],["path",{d:"M6 12H4a2 2 0 0 0-2 2v6a2 2 0 0 0 2 2h2",key:"i71pzd"}],["path",{d:"M18 9h2a2 2 0 0 1 2 2v9a2 2 0 0 1-2 2h-2",key:"10jefs"}],["path",{d:"M10 6h4",key:"1itunk"}],["path",{d:"M10 10h4",key:"tcdvrf"}],["path",{d:"M10 14h4",key:"kelpxr"}],["path",{d:"M10 18h4",key:"1ulq68"}]],Building2=createLucideIcon("building-2",__iconNode$M);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$L=[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}],["path",{d:"M8 14h.01",key:"6423bh"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M16 14h.01",key:"1gbofw"}],["path",{d:"M8 18h.01",key:"lrp35t"}],["path",{d:"M12 18h.01",key:"mhygvu"}],["path",{d:"M16 18h.01",key:"kzsmim"}]],CalendarDays=createLucideIcon("calendar-days",__iconNode$L);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$K=[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]],Calendar=createLucideIcon("calendar",__iconNode$K);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$J=[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]],ChevronDown=createLucideIcon("chevron-down",__iconNode$J);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$I=[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]],ChevronLeft=createLucideIcon("chevron-left",__iconNode$I);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$H=[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]],ChevronRight=createLucideIcon("chevron-right",__iconNode$H);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$G=[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]],ChevronUp=createLucideIcon("chevron-up",__iconNode$G);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$F=[["path",{d:"m7 6 5 5 5-5",key:"1lc07p"}],["path",{d:"m7 13 5 5 5-5",key:"1d48rs"}]],ChevronsDown=createLucideIcon("chevrons-down",__iconNode$F);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$E=[["path",{d:"m11 17-5-5 5-5",key:"13zhaf"}],["path",{d:"m18 17-5-5 5-5",key:"h8a8et"}]],ChevronsLeft=createLucideIcon("chevrons-left",__iconNode$E);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$D=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]],CircleX=createLucideIcon("circle-x",__iconNode$D);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$C=[["path",{d:"M12 15V3",key:"m9g1x1"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["path",{d:"m7 10 5 5 5-5",key:"brsn70"}]],Download=createLucideIcon("download",__iconNode$C);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$B=[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],Eye=createLucideIcon("eye",__iconNode$B);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$A=[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]],FileText=createLucideIcon("file-text",__iconNode$A);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$z=[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}]],File=createLucideIcon("file",__iconNode$z);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$y=[["path",{d:"M4 20h16a2 2 0 0 0 2-2V8a2 2 0 0 0-2-2h-7.93a2 2 0 0 1-1.66-.9l-.82-1.2A2 2 0 0 0 7.93 3H4a2 2 0 0 0-2 2v13c0 1.1.9 2 2 2Z",key:"1fr9dc"}],["path",{d:"M8 10v4",key:"tgpxqk"}],["path",{d:"M12 10v2",key:"hh53o1"}],["path",{d:"M16 10v6",key:"1d6xys"}]],FolderKanban=createLucideIcon("folder-kanban",__iconNode$y);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$x=[["path",{d:"m6 14 1.45-2.9A2 2 0 0 1 9.24 10H20a2 2 0 0 1 1.94 2.5l-1.55 6a2 2 0 0 1-1.94 1.5H4a2 2 0 0 1-2-2V5c0-1.1.9-2 2-2h3.93a2 2 0 0 1 1.66.9l.82 1.2a2 2 0 0 0 1.66.9H18a2 2 0 0 1 2 2v2",key:"1nmvlm"}],["circle",{cx:"14",cy:"15",r:"1",key:"1gm4qj"}]],FolderOpenDot=createLucideIcon("folder-open-dot",__iconNode$x);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$w=[["path",{d:"m6 14 1.5-2.9A2 2 0 0 1 9.24 10H20a2 2 0 0 1 1.94 2.5l-1.54 6a2 2 0 0 1-1.95 1.5H4a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h3.9a2 2 0 0 1 1.69.9l.81 1.2a2 2 0 0 0 1.67.9H18a2 2 0 0 1 2 2v2",key:"usdka0"}]],FolderOpen=createLucideIcon("folder-open",__iconNode$w);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$v=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 2a14.5 14.5 0 0 0 0 20 14.5 14.5 0 0 0 0-20",key:"13o1zl"}],["path",{d:"M2 12h20",key:"9i4pu4"}]],Globe=createLucideIcon("globe",__iconNode$v);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$u=[["line",{x1:"4",x2:"20",y1:"9",y2:"9",key:"4lhtct"}],["line",{x1:"4",x2:"20",y1:"15",y2:"15",key:"vyu0kd"}],["line",{x1:"10",x2:"8",y1:"3",y2:"21",key:"1ggp8o"}],["line",{x1:"16",x2:"14",y1:"3",y2:"21",key:"weycgp"}]],Hash=createLucideIcon("hash",__iconNode$u);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$t=[["path",{d:"M12.83 2.18a2 2 0 0 0-1.66 0L2.6 6.08a1 1 0 0 0 0 1.83l8.58 3.91a2 2 0 0 0 1.66 0l8.58-3.9a1 1 0 0 0 0-1.83z",key:"zw3jo"}],["path",{d:"M2 12a1 1 0 0 0 .58.91l8.6 3.91a2 2 0 0 0 1.65 0l8.58-3.9A1 1 0 0 0 22 12",key:"1wduqc"}],["path",{d:"M2 17a1 1 0 0 0 .58.91l8.6 3.91a2 2 0 0 0 1.65 0l8.58-3.9A1 1 0 0 0 22 17",key:"kqbvx6"}]],Layers=createLucideIcon("layers",__iconNode$t);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$s=[["path",{d:"M21 12h-8",key:"1bmf0i"}],["path",{d:"M21 6H8",key:"1pqkrb"}],["path",{d:"M21 18h-8",key:"1tm79t"}],["path",{d:"M3 6v4c0 1.1.9 2 2 2h3",key:"1ywdgy"}],["path",{d:"M3 10v6c0 1.1.9 2 2 2h3",key:"2wc746"}]],ListTree=createLucideIcon("list-tree",__iconNode$s);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$r=[["circle",{cx:"12",cy:"16",r:"1",key:"1au0dj"}],["rect",{x:"3",y:"10",width:"18",height:"12",rx:"2",key:"6s8ecr"}],["path",{d:"M7 10V7a5 5 0 0 1 10 0v3",key:"1pqi11"}]],LockKeyhole=createLucideIcon("lock-keyhole",__iconNode$r);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$q=[["path",{d:"m22 7-8.991 5.727a2 2 0 0 1-2.009 0L2 7",key:"132q7q"}],["rect",{x:"2",y:"4",width:"20",height:"16",rx:"2",key:"izxlao"}]],Mail=createLucideIcon("mail",__iconNode$q);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$p=[["path",{d:"M18 8c0 3.613-3.869 7.429-5.393 8.795a1 1 0 0 1-1.214 0C9.87 15.429 6 11.613 6 8a6 6 0 0 1 12 0",key:"11u0oz"}],["circle",{cx:"12",cy:"8",r:"2",key:"1822b1"}],["path",{d:"M8.714 14h-3.71a1 1 0 0 0-.948.683l-2.004 6A1 1 0 0 0 3 22h18a1 1 0 0 0 .948-1.316l-2-6a1 1 0 0 0-.949-.684h-3.712",key:"q8zwxj"}]],MapPinned=createLucideIcon("map-pinned",__iconNode$p);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$o=[["path",{d:"M4 12h16",key:"1lakjw"}],["path",{d:"M4 18h16",key:"19g7jn"}],["path",{d:"M4 6h16",key:"1o0s65"}]],Menu=createLucideIcon("menu",__iconNode$o);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$n=[["path",{d:"M12 3a6 6 0 0 0 9 9 9 9 0 1 1-9-9",key:"4ay0iu"}],["path",{d:"M20 3v4",key:"1olli1"}],["path",{d:"M22 5h-4",key:"1gvqau"}]],MoonStar=createLucideIcon("moon-star",__iconNode$n);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$m=[["path",{d:"M2 6h4",key:"aawbzj"}],["path",{d:"M2 10h4",key:"l0bgd4"}],["path",{d:"M2 14h4",key:"1gsvsf"}],["path",{d:"M2 18h4",key:"1bu2t1"}],["rect",{width:"16",height:"20",x:"4",y:"2",rx:"2",key:"1nb95v"}],["path",{d:"M16 2v20",key:"rotuqe"}]],Notebook=createLucideIcon("notebook",__iconNode$m);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$l=[["path",{d:"M13.234 20.252 21 12.3",key:"1cbrk9"}],["path",{d:"m16 6-8.414 8.586a2 2 0 0 0 0 2.828 2 2 0 0 0 2.828 0l8.414-8.586a4 4 0 0 0 0-5.656 4 4 0 0 0-5.656 0l-8.415 8.585a6 6 0 1 0 8.486 8.486",key:"1pkts6"}]],Paperclip=createLucideIcon("paperclip",__iconNode$l);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$k=[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}]],Pen=createLucideIcon("pen",__iconNode$k);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$j=[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}],["path",{d:"m15 5 4 4",key:"1mk7zo"}]],Pencil=createLucideIcon("pencil",__iconNode$j);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$i=[["path",{d:"M13.832 16.568a1 1 0 0 0 1.213-.303l.355-.465A2 2 0 0 1 17 15h3a2 2 0 0 1 2 2v3a2 2 0 0 1-2 2A18 18 0 0 1 2 4a2 2 0 0 1 2-2h3a2 2 0 0 1 2 2v3a2 2 0 0 1-.8 1.6l-.468.351a1 1 0 0 0-.292 1.233 14 14 0 0 0 6.392 6.384",key:"9njp5v"}]],Phone=createLucideIcon("phone",__iconNode$i);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$h=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]],Plus=createLucideIcon("plus",__iconNode$h);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$g=[["path",{d:"M4 2v20l2-1 2 1 2-1 2 1 2-1 2 1 2-1 2 1V2l-2 1-2-1-2 1-2-1-2 1-2-1-2 1Z",key:"q3az6g"}],["path",{d:"M14 8H8",key:"1l3xfs"}],["path",{d:"M16 12H8",key:"1fr5h0"}],["path",{d:"M13 16H8",key:"wsln4y"}]],ReceiptText=createLucideIcon("receipt-text",__iconNode$g);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$f=[["path",{d:"M21 12a9 9 0 1 1-9-9c2.52 0 4.93 1 6.74 2.74L21 8",key:"1p45f6"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}]],RotateCw=createLucideIcon("rotate-cw",__iconNode$f);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$e=[["path",{d:"M20 7h-9",key:"3s1dr2"}],["path",{d:"M14 17H5",key:"gfn3mx"}],["circle",{cx:"17",cy:"17",r:"3",key:"18b49y"}],["circle",{cx:"7",cy:"7",r:"3",key:"dfmy0x"}]],Settings2=createLucideIcon("settings-2",__iconNode$e);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$d=[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]],ShieldCheck=createLucideIcon("shield-check",__iconNode$d);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$c=[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]],SquarePen=createLucideIcon("square-pen",__iconNode$c);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$b=[["circle",{cx:"12",cy:"12",r:"4",key:"4exip2"}],["path",{d:"M12 3v1",key:"1asbbs"}],["path",{d:"M12 20v1",key:"1wcdkc"}],["path",{d:"M3 12h1",key:"lp3yf2"}],["path",{d:"M20 12h1",key:"1vloll"}],["path",{d:"m18.364 5.636-.707.707",key:"1hakh0"}],["path",{d:"m6.343 17.657-.707.707",key:"18m9nf"}],["path",{d:"m5.636 5.636.707.707",key:"1xv1c5"}],["path",{d:"m17.657 17.657.707.707",key:"vl76zb"}]],SunMedium=createLucideIcon("sun-medium",__iconNode$b);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$a=[["circle",{cx:"9",cy:"12",r:"3",key:"u3jwor"}],["rect",{width:"20",height:"14",x:"2",y:"5",rx:"7",key:"g7kal2"}]],ToggleLeft=createLucideIcon("toggle-left",__iconNode$a);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$9=[["circle",{cx:"15",cy:"12",r:"3",key:"1afu0r"}],["rect",{width:"20",height:"14",x:"2",y:"5",rx:"7",key:"g7kal2"}]],ToggleRight=createLucideIcon("toggle-right",__iconNode$9);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$8=[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]],Trash2=createLucideIcon("trash-2",__iconNode$8);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$7=[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}]],Trash=createLucideIcon("trash",__iconNode$7);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$6=[["path",{d:"m16 11 2 2 4-4",key:"9rsbq5"}],["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}]],UserCheck=createLucideIcon("user-check",__iconNode$6);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$5=[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]],User=createLucideIcon("user",__iconNode$5);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$4=[["path",{d:"M18 21a8 8 0 0 0-16 0",key:"3ypg7q"}],["circle",{cx:"10",cy:"8",r:"5",key:"o932ke"}],["path",{d:"M22 20c0-3.37-2-6.5-4-8a5 5 0 0 0-.45-8.3",key:"10s06x"}]],UsersRound=createLucideIcon("users-round",__iconNode$4);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$3=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["path",{d:"M16 3.128a4 4 0 0 1 0 7.744",key:"16gr8j"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}]],Users=createLucideIcon("users",__iconNode$3);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$2=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M3 9a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2",key:"4125el"}],["path",{d:"M3 11h3c.8 0 1.6.3 2.1.9l1.1.9c1.6 1.6 4.1 1.6 5.7 0l1.1-.9c.5-.5 1.3-.9 2.1-.9H21",key:"1dpki6"}]],WalletCards=createLucideIcon("wallet-cards",__iconNode$2);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$1=[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["line",{x1:"21",x2:"16.65",y1:"21",y2:"16.65",key:"13gj7c"}],["line",{x1:"11",x2:"11",y1:"8",y2:"14",key:"1vmskp"}],["line",{x1:"8",x2:"14",y1:"11",y2:"11",key:"durymu"}]],ZoomIn=createLucideIcon("zoom-in",__iconNode$1);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode=[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["line",{x1:"21",x2:"16.65",y1:"21",y2:"16.65",key:"13gj7c"}],["line",{x1:"8",x2:"14",y1:"11",y2:"11",key:"durymu"}]],ZoomOut=createLucideIcon("zoom-out",__iconNode);var lib={exports:{}},core_min={};function commonjsRequire(c){throw new Error('Could not dynamically require "'+c+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var pdf={exports:{}};const __viteBrowserExternal={},__viteBrowserExternal$1=Object.freeze(Object.defineProperty({__proto__:null,default:__viteBrowserExternal},Symbol.toStringTag,{value:"Module"})),require$$5=getAugmentedNamespace(__viteBrowserExternal$1);var hasRequiredPdf;function requirePdf(){return hasRequiredPdf||(hasRequiredPdf=1,(function(module,exports){(function(u,_t){module.exports=u.pdfjsLib=_t()})(globalThis,()=>(()=>{var __webpack_modules__=[,((c,u)=>{var Le;Object.defineProperty(u,"__esModule",{value:!0}),u.VerbosityLevel=u.Util=u.UnknownErrorException=u.UnexpectedResponseException=u.TextRenderingMode=u.RenderingIntentFlag=u.PromiseCapability=u.PermissionFlag=u.PasswordResponses=u.PasswordException=u.PageActionEventType=u.OPS=u.MissingPDFException=u.MAX_IMAGE_SIZE_TO_CACHE=u.LINE_FACTOR=u.LINE_DESCENT_FACTOR=u.InvalidPDFException=u.ImageKind=u.IDENTITY_MATRIX=u.FormatError=u.FeatureTest=u.FONT_IDENTITY_MATRIX=u.DocumentActionEventType=u.CMapCompressionType=u.BaseException=u.BASELINE_FACTOR=u.AnnotationType=u.AnnotationReplyType=u.AnnotationPrefix=u.AnnotationMode=u.AnnotationFlag=u.AnnotationFieldFlag=u.AnnotationEditorType=u.AnnotationEditorPrefix=u.AnnotationEditorParamsType=u.AnnotationBorderStyleType=u.AnnotationActionEventType=u.AbortException=void 0,u.assert=N,u.bytesToString=At,u.createValidAbsoluteUrl=ct,u.getModificationDate=Bt,u.getUuid=le,u.getVerbosityLevel=nt,u.info=at,u.isArrayBuffer=et,u.isArrayEqual=jt,u.isNodeJS=void 0,u.normalizeUnicode=Xt,u.objectFromMap=Lt,u.objectSize=Rt,u.setVerbosityLevel=bt,u.shadow=k,u.string32=Pt,u.stringToBytes=Et,u.stringToPDFString=wt,u.stringToUTF8String=Ft,u.unreachable=vt,u.utf8StringToString=Tt,u.warn=K;const _t=typeof process=="object"&&process+""=="[object process]"&&!process.versions.nw&&!(process.versions.electron&&process.type&&process.type!=="browser");u.isNodeJS=_t;const l=[1,0,0,1,0,0];u.IDENTITY_MATRIX=l;const E=[.001,0,0,.001,0,0];u.FONT_IDENTITY_MATRIX=E;const t=1e7;u.MAX_IMAGE_SIZE_TO_CACHE=t;const Z=1.35;u.LINE_FACTOR=Z;const Ct=.35;u.LINE_DESCENT_FACTOR=Ct;const W=Ct/Z;u.BASELINE_FACTOR=W;const T={ANY:1,DISPLAY:2,PRINT:4,SAVE:8,ANNOTATIONS_FORMS:16,ANNOTATIONS_STORAGE:32,ANNOTATIONS_DISABLE:64,OPLIST:256};u.RenderingIntentFlag=T;const d={DISABLE:0,ENABLE:1,ENABLE_FORMS:2,ENABLE_STORAGE:3};u.AnnotationMode=d;const H="pdfjs_internal_editor_";u.AnnotationEditorPrefix=H;const j={DISABLE:-1,NONE:0,FREETEXT:3,STAMP:13,INK:15};u.AnnotationEditorType=j;const y={RESIZE:1,CREATE:2,FREETEXT_SIZE:11,FREETEXT_COLOR:12,FREETEXT_OPACITY:13,INK_COLOR:21,INK_THICKNESS:22,INK_OPACITY:23};u.AnnotationEditorParamsType=y;const b={PRINT:4,MODIFY_CONTENTS:8,COPY:16,MODIFY_ANNOTATIONS:32,FILL_INTERACTIVE_FORMS:256,COPY_FOR_ACCESSIBILITY:512,ASSEMBLE:1024,PRINT_HIGH_QUALITY:2048};u.PermissionFlag=b;const M={FILL:0,STROKE:1,FILL_STROKE:2,INVISIBLE:3,FILL_ADD_TO_PATH:4,STROKE_ADD_TO_PATH:5,FILL_STROKE_ADD_TO_PATH:6,ADD_TO_PATH:7,FILL_STROKE_MASK:3,ADD_TO_PATH_FLAG:4};u.TextRenderingMode=M;const v={GRAYSCALE_1BPP:1,RGB_24BPP:2,RGBA_32BPP:3};u.ImageKind=v;const g={TEXT:1,LINK:2,FREETEXT:3,LINE:4,SQUARE:5,CIRCLE:6,POLYGON:7,POLYLINE:8,HIGHLIGHT:9,UNDERLINE:10,SQUIGGLY:11,STRIKEOUT:12,STAMP:13,CARET:14,INK:15,POPUP:16,FILEATTACHMENT:17,SOUND:18,MOVIE:19,WIDGET:20,SCREEN:21,PRINTERMARK:22,TRAPNET:23,WATERMARK:24,THREED:25,REDACT:26};u.AnnotationType=g;const A={GROUP:"Group",REPLY:"R"};u.AnnotationReplyType=A;const O={INVISIBLE:1,HIDDEN:2,PRINT:4,NOZOOM:8,NOROTATE:16,NOVIEW:32,READONLY:64,LOCKED:128,TOGGLENOVIEW:256,LOCKEDCONTENTS:512};u.AnnotationFlag=O;const w={READONLY:1,REQUIRED:2,NOEXPORT:4,MULTILINE:4096,PASSWORD:8192,NOTOGGLETOOFF:16384,RADIO:32768,PUSHBUTTON:65536,COMBO:131072,EDIT:262144,SORT:524288,FILESELECT:1048576,MULTISELECT:2097152,DONOTSPELLCHECK:4194304,DONOTSCROLL:8388608,COMB:16777216,RICHTEXT:33554432,RADIOSINUNISON:33554432,COMMITONSELCHANGE:67108864};u.AnnotationFieldFlag=w;const o={SOLID:1,DASHED:2,BEVELED:3,INSET:4,UNDERLINE:5};u.AnnotationBorderStyleType=o;const r={E:"Mouse Enter",X:"Mouse Exit",D:"Mouse Down",U:"Mouse Up",Fo:"Focus",Bl:"Blur",PO:"PageOpen",PC:"PageClose",PV:"PageVisible",PI:"PageInvisible",K:"Keystroke",F:"Format",V:"Validate",C:"Calculate"};u.AnnotationActionEventType=r;const n={WC:"WillClose",WS:"WillSave",DS:"DidSave",WP:"WillPrint",DP:"DidPrint"};u.DocumentActionEventType=n;const S={O:"PageOpen",C:"PageClose"};u.PageActionEventType=S;const p={ERRORS:0,WARNINGS:1,INFOS:5};u.VerbosityLevel=p;const G={NONE:0,BINARY:1};u.CMapCompressionType=G;const h={dependency:1,setLineWidth:2,setLineCap:3,setLineJoin:4,setMiterLimit:5,setDash:6,setRenderingIntent:7,setFlatness:8,setGState:9,save:10,restore:11,transform:12,moveTo:13,lineTo:14,curveTo:15,curveTo2:16,curveTo3:17,closePath:18,rectangle:19,stroke:20,closeStroke:21,fill:22,eoFill:23,fillStroke:24,eoFillStroke:25,closeFillStroke:26,closeEOFillStroke:27,endPath:28,clip:29,eoClip:30,beginText:31,endText:32,setCharSpacing:33,setWordSpacing:34,setHScale:35,setLeading:36,setFont:37,setTextRenderingMode:38,setTextRise:39,moveText:40,setLeadingMoveText:41,setTextMatrix:42,nextLine:43,showText:44,showSpacedText:45,nextLineShowText:46,nextLineSetSpacingShowText:47,setCharWidth:48,setCharWidthAndBounds:49,setStrokeColorSpace:50,setFillColorSpace:51,setStrokeColor:52,setStrokeColorN:53,setFillColor:54,setFillColorN:55,setStrokeGray:56,setFillGray:57,setStrokeRGBColor:58,setFillRGBColor:59,setStrokeCMYKColor:60,setFillCMYKColor:61,shadingFill:62,beginInlineImage:63,beginImageData:64,endInlineImage:65,paintXObject:66,markPoint:67,markPointProps:68,beginMarkedContent:69,beginMarkedContentProps:70,endMarkedContent:71,beginCompat:72,endCompat:73,paintFormXObjectBegin:74,paintFormXObjectEnd:75,beginGroup:76,endGroup:77,beginAnnotation:80,endAnnotation:81,paintImageMaskXObject:83,paintImageMaskXObjectGroup:84,paintImageXObject:85,paintInlineImageXObject:86,paintInlineImageXObjectGroup:87,paintImageXObjectRepeat:88,paintImageMaskXObjectRepeat:89,paintSolidColorImageMask:90,constructPath:91};u.OPS=h;const P={NEED_PASSWORD:1,INCORRECT_PASSWORD:2};u.PasswordResponses=P;let $=p.WARNINGS;function bt(Mt){Number.isInteger(Mt)&&($=Mt)}function nt(){return $}function at(Mt){$>=p.INFOS&&console.log(`Info: ${Mt}`)}function K(Mt){$>=p.WARNINGS&&console.log(`Warning: ${Mt}`)}function vt(Mt){throw new Error(Mt)}function N(Mt,ot){Mt||vt(ot)}function Q(Mt){switch(Mt?.protocol){case"http:":case"https:":case"ftp:":case"mailto:":case"tel:":return!0;default:return!1}}function ct(Mt,ot=null,st=null){if(!Mt)return null;try{if(st&&typeof Mt=="string"&&(st.addDefaultProtocol&&Mt.startsWith("www.")&&Mt.match(/\./g)?.length>=2&&(Mt=`http://${Mt}`),st.tryConvertEncoding))try{Mt=Ft(Mt)}catch{}const Yt=ot?new URL(Mt,ot):new URL(Mt);if(Q(Yt))return Yt}catch{}return null}function k(Mt,ot,st,Yt=!1){return Object.defineProperty(Mt,ot,{value:st,enumerable:!Yt,configurable:!0,writable:!1}),st}const s=(function(){function ot(st,Yt){this.constructor===ot&&vt("Cannot initialize BaseException."),this.message=st,this.name=Yt}return ot.prototype=new Error,ot.constructor=ot,ot})();u.BaseException=s;class a extends s{constructor(ot,st){super(ot,"PasswordException"),this.code=st}}u.PasswordException=a;class m extends s{constructor(ot,st){super(ot,"UnknownErrorException"),this.details=st}}u.UnknownErrorException=m;class F extends s{constructor(ot){super(ot,"InvalidPDFException")}}u.InvalidPDFException=F;class L extends s{constructor(ot){super(ot,"MissingPDFException")}}u.MissingPDFException=L;class R extends s{constructor(ot,st){super(ot,"UnexpectedResponseException"),this.status=st}}u.UnexpectedResponseException=R;class q extends s{constructor(ot){super(ot,"FormatError")}}u.FormatError=q;class mt extends s{constructor(ot){super(ot,"AbortException")}}u.AbortException=mt;function At(Mt){(typeof Mt!="object"||Mt?.length===void 0)&&vt("Invalid argument for bytesToString");const ot=Mt.length,st=8192;if(ot<st)return String.fromCharCode.apply(null,Mt);const Yt=[];for(let Jt=0;Jt<ot;Jt+=st){const ne=Math.min(Jt+st,ot),B=Mt.subarray(Jt,ne);Yt.push(String.fromCharCode.apply(null,B))}return Yt.join("")}function Et(Mt){typeof Mt!="string"&&vt("Invalid argument for stringToBytes");const ot=Mt.length,st=new Uint8Array(ot);for(let Yt=0;Yt<ot;++Yt)st[Yt]=Mt.charCodeAt(Yt)&255;return st}function Pt(Mt){return String.fromCharCode(Mt>>24&255,Mt>>16&255,Mt>>8&255,Mt&255)}function Rt(Mt){return Object.keys(Mt).length}function Lt(Mt){const ot=Object.create(null);for(const[st,Yt]of Mt)ot[st]=Yt;return ot}function ht(){const Mt=new Uint8Array(4);return Mt[0]=1,new Uint32Array(Mt.buffer,0,1)[0]===1}function dt(){try{return new Function(""),!0}catch{return!1}}class _{static get isLittleEndian(){return k(this,"isLittleEndian",ht())}static get isEvalSupported(){return k(this,"isEvalSupported",dt())}static get isOffscreenCanvasSupported(){return k(this,"isOffscreenCanvasSupported",typeof OffscreenCanvas<"u")}static get platform(){return typeof navigator>"u"?k(this,"platform",{isWin:!1,isMac:!1}):k(this,"platform",{isWin:navigator.platform.includes("Win"),isMac:navigator.platform.includes("Mac")})}static get isCSSRoundSupported(){return k(this,"isCSSRoundSupported",globalThis.CSS?.supports?.("width: round(1.5px, 1px)"))}}u.FeatureTest=_;const I=[...Array(256).keys()].map(Mt=>Mt.toString(16).padStart(2,"0"));class tt{static makeHexColor(ot,st,Yt){return`#${I[ot]}${I[st]}${I[Yt]}`}static scaleMinMax(ot,st){let Yt;ot[0]?(ot[0]<0&&(Yt=st[0],st[0]=st[1],st[1]=Yt),st[0]*=ot[0],st[1]*=ot[0],ot[3]<0&&(Yt=st[2],st[2]=st[3],st[3]=Yt),st[2]*=ot[3],st[3]*=ot[3]):(Yt=st[0],st[0]=st[2],st[2]=Yt,Yt=st[1],st[1]=st[3],st[3]=Yt,ot[1]<0&&(Yt=st[2],st[2]=st[3],st[3]=Yt),st[2]*=ot[1],st[3]*=ot[1],ot[2]<0&&(Yt=st[0],st[0]=st[1],st[1]=Yt),st[0]*=ot[2],st[1]*=ot[2]),st[0]+=ot[4],st[1]+=ot[4],st[2]+=ot[5],st[3]+=ot[5]}static transform(ot,st){return[ot[0]*st[0]+ot[2]*st[1],ot[1]*st[0]+ot[3]*st[1],ot[0]*st[2]+ot[2]*st[3],ot[1]*st[2]+ot[3]*st[3],ot[0]*st[4]+ot[2]*st[5]+ot[4],ot[1]*st[4]+ot[3]*st[5]+ot[5]]}static applyTransform(ot,st){const Yt=ot[0]*st[0]+ot[1]*st[2]+st[4],Jt=ot[0]*st[1]+ot[1]*st[3]+st[5];return[Yt,Jt]}static applyInverseTransform(ot,st){const Yt=st[0]*st[3]-st[1]*st[2],Jt=(ot[0]*st[3]-ot[1]*st[2]+st[2]*st[5]-st[4]*st[3])/Yt,ne=(-ot[0]*st[1]+ot[1]*st[0]+st[4]*st[1]-st[5]*st[0])/Yt;return[Jt,ne]}static getAxialAlignedBoundingBox(ot,st){const Yt=this.applyTransform(ot,st),Jt=this.applyTransform(ot.slice(2,4),st),ne=this.applyTransform([ot[0],ot[3]],st),B=this.applyTransform([ot[2],ot[1]],st);return[Math.min(Yt[0],Jt[0],ne[0],B[0]),Math.min(Yt[1],Jt[1],ne[1],B[1]),Math.max(Yt[0],Jt[0],ne[0],B[0]),Math.max(Yt[1],Jt[1],ne[1],B[1])]}static inverseTransform(ot){const st=ot[0]*ot[3]-ot[1]*ot[2];return[ot[3]/st,-ot[1]/st,-ot[2]/st,ot[0]/st,(ot[2]*ot[5]-ot[4]*ot[3])/st,(ot[4]*ot[1]-ot[5]*ot[0])/st]}static singularValueDecompose2dScale(ot){const st=[ot[0],ot[2],ot[1],ot[3]],Yt=ot[0]*st[0]+ot[1]*st[2],Jt=ot[0]*st[1]+ot[1]*st[3],ne=ot[2]*st[0]+ot[3]*st[2],B=ot[2]*st[1]+ot[3]*st[3],xt=(Yt+B)/2,Wt=Math.sqrt((Yt+B)**2-4*(Yt*B-ne*Jt))/2,Qt=xt+Wt||1,ee=xt-Wt||1;return[Math.sqrt(Qt),Math.sqrt(ee)]}static normalizeRect(ot){const st=ot.slice(0);return ot[0]>ot[2]&&(st[0]=ot[2],st[2]=ot[0]),ot[1]>ot[3]&&(st[1]=ot[3],st[3]=ot[1]),st}static intersect(ot,st){const Yt=Math.max(Math.min(ot[0],ot[2]),Math.min(st[0],st[2])),Jt=Math.min(Math.max(ot[0],ot[2]),Math.max(st[0],st[2]));if(Yt>Jt)return null;const ne=Math.max(Math.min(ot[1],ot[3]),Math.min(st[1],st[3])),B=Math.min(Math.max(ot[1],ot[3]),Math.max(st[1],st[3]));return ne>B?null:[Yt,ne,Jt,B]}static bezierBoundingBox(ot,st,Yt,Jt,ne,B,xt,Wt){const Qt=[],ee=[[],[]];let Gt,x,C,X,yt,St,kt,Nt;for(let qt=0;qt<2;++qt){if(qt===0?(x=6*ot-12*Yt+6*ne,Gt=-3*ot+9*Yt-9*ne+3*xt,C=3*Yt-3*ot):(x=6*st-12*Jt+6*B,Gt=-3*st+9*Jt-9*B+3*Wt,C=3*Jt-3*st),Math.abs(Gt)<1e-12){if(Math.abs(x)<1e-12)continue;X=-C/x,0<X&&X<1&&Qt.push(X);continue}kt=x*x-4*C*Gt,Nt=Math.sqrt(kt),!(kt<0)&&(yt=(-x+Nt)/(2*Gt),0<yt&&yt<1&&Qt.push(yt),St=(-x-Nt)/(2*Gt),0<St&&St<1&&Qt.push(St))}let Vt=Qt.length,ae;const te=Vt;for(;Vt--;)X=Qt[Vt],ae=1-X,ee[0][Vt]=ae*ae*ae*ot+3*ae*ae*X*Yt+3*ae*X*X*ne+X*X*X*xt,ee[1][Vt]=ae*ae*ae*st+3*ae*ae*X*Jt+3*ae*X*X*B+X*X*X*Wt;return ee[0][te]=ot,ee[1][te]=st,ee[0][te+1]=xt,ee[1][te+1]=Wt,ee[0].length=ee[1].length=te+2,[Math.min(...ee[0]),Math.min(...ee[1]),Math.max(...ee[0]),Math.max(...ee[1])]}}u.Util=tt;const ut=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,728,711,710,729,733,731,730,732,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,8226,8224,8225,8230,8212,8211,402,8260,8249,8250,8722,8240,8222,8220,8221,8216,8217,8218,8482,64257,64258,321,338,352,376,381,305,322,339,353,382,0,8364];function wt(Mt){if(Mt[0]>="ï"){let st;if(Mt[0]==="þ"&&Mt[1]==="ÿ"?st="utf-16be":Mt[0]==="ÿ"&&Mt[1]==="þ"?st="utf-16le":Mt[0]==="ï"&&Mt[1]==="»"&&Mt[2]==="¿"&&(st="utf-8"),st)try{const Yt=new TextDecoder(st,{fatal:!0}),Jt=Et(Mt);return Yt.decode(Jt)}catch(Yt){K(`stringToPDFString: "${Yt}".`)}}const ot=[];for(let st=0,Yt=Mt.length;st<Yt;st++){const Jt=ut[Mt.charCodeAt(st)];ot.push(Jt?String.fromCharCode(Jt):Mt.charAt(st))}return ot.join("")}function Ft(Mt){return decodeURIComponent(escape(Mt))}function Tt(Mt){return unescape(encodeURIComponent(Mt))}function et(Mt){return typeof Mt=="object"&&Mt?.byteLength!==void 0}function jt(Mt,ot){if(Mt.length!==ot.length)return!1;for(let st=0,Yt=Mt.length;st<Yt;st++)if(Mt[st]!==ot[st])return!1;return!0}function Bt(Mt=new Date){return[Mt.getUTCFullYear().toString(),(Mt.getUTCMonth()+1).toString().padStart(2,"0"),Mt.getUTCDate().toString().padStart(2,"0"),Mt.getUTCHours().toString().padStart(2,"0"),Mt.getUTCMinutes().toString().padStart(2,"0"),Mt.getUTCSeconds().toString().padStart(2,"0")].join("")}class he{constructor(){pt(this,Le,!1);this.promise=new Promise((ot,st)=>{this.resolve=Yt=>{gt(this,Le,!0),ot(Yt)},this.reject=Yt=>{gt(this,Le,!0),st(Yt)}})}get settled(){return e(this,Le)}}Le=new WeakMap,u.PromiseCapability=he;let oe=null,xe=null;function Xt(Mt){return oe||(oe=/([\u00a0\u00b5\u037e\u0eb3\u2000-\u200a\u202f\u2126\ufb00-\ufb04\ufb06\ufb20-\ufb36\ufb38-\ufb3c\ufb3e\ufb40-\ufb41\ufb43-\ufb44\ufb46-\ufba1\ufba4-\ufba9\ufbae-\ufbb1\ufbd3-\ufbdc\ufbde-\ufbe7\ufbea-\ufbf8\ufbfc-\ufbfd\ufc00-\ufc5d\ufc64-\ufcf1\ufcf5-\ufd3d\ufd88\ufdf4\ufdfa-\ufdfb\ufe71\ufe77\ufe79\ufe7b\ufe7d]+)|(\ufb05+)/gu,xe=new Map([["ﬅ","ſt"]])),Mt.replaceAll(oe,(ot,st,Yt)=>st?st.normalize("NFKC"):xe.get(Yt))}function le(){if(typeof crypto<"u"&&typeof crypto?.randomUUID=="function")return crypto.randomUUID();const Mt=new Uint8Array(32);if(typeof crypto<"u"&&typeof crypto?.getRandomValues=="function")crypto.getRandomValues(Mt);else for(let ot=0;ot<32;ot++)Mt[ot]=Math.floor(Math.random()*255);return At(Mt)}const _e="pdfjs_internal_id_";u.AnnotationPrefix=_e}),((__unused_webpack_module,exports,__w_pdfjs_require__)=>{var c,_t,l,E,Ln,ii,Ct,W,T,d,H,j,y,b,ri,v,g,Mi,O,w;Object.defineProperty(exports,"__esModule",{value:!0}),exports.RenderTask=exports.PDFWorkerUtil=exports.PDFWorker=exports.PDFPageProxy=exports.PDFDocumentProxy=exports.PDFDocumentLoadingTask=exports.PDFDataRangeTransport=exports.LoopbackPort=exports.DefaultStandardFontDataFactory=exports.DefaultFilterFactory=exports.DefaultCanvasFactory=exports.DefaultCMapReaderFactory=void 0,Object.defineProperty(exports,"SVGGraphics",{enumerable:!0,get:function(){return _displaySvg.SVGGraphics}}),exports.build=void 0,exports.getDocument=getDocument,exports.version=void 0;var _util=__w_pdfjs_require__(1),_annotation_storage=__w_pdfjs_require__(3),_display_utils=__w_pdfjs_require__(6),_font_loader=__w_pdfjs_require__(9),_displayNode_utils=__w_pdfjs_require__(10),_canvas=__w_pdfjs_require__(11),_worker_options=__w_pdfjs_require__(14),_message_handler=__w_pdfjs_require__(15),_metadata=__w_pdfjs_require__(16),_optional_content_config=__w_pdfjs_require__(17),_transport_stream=__w_pdfjs_require__(18),_displayFetch_stream=__w_pdfjs_require__(19),_displayNetwork=__w_pdfjs_require__(22),_displayNode_stream=__w_pdfjs_require__(23),_displaySvg=__w_pdfjs_require__(24),_xfa_text=__w_pdfjs_require__(25);const DEFAULT_RANGE_CHUNK_SIZE=65536,RENDERING_CANCELLED_TIMEOUT=100,DELAYED_CLEANUP_TIMEOUT=5e3,DefaultCanvasFactory=_util.isNodeJS?_displayNode_utils.NodeCanvasFactory:_display_utils.DOMCanvasFactory;exports.DefaultCanvasFactory=DefaultCanvasFactory;const DefaultCMapReaderFactory=_util.isNodeJS?_displayNode_utils.NodeCMapReaderFactory:_display_utils.DOMCMapReaderFactory;exports.DefaultCMapReaderFactory=DefaultCMapReaderFactory;const DefaultFilterFactory=_util.isNodeJS?_displayNode_utils.NodeFilterFactory:_display_utils.DOMFilterFactory;exports.DefaultFilterFactory=DefaultFilterFactory;const DefaultStandardFontDataFactory=_util.isNodeJS?_displayNode_utils.NodeStandardFontDataFactory:_display_utils.DOMStandardFontDataFactory;exports.DefaultStandardFontDataFactory=DefaultStandardFontDataFactory;function getDocument(r){if(typeof r=="string"||r instanceof URL?r={url:r}:(0,_util.isArrayBuffer)(r)&&(r={data:r}),typeof r!="object")throw new Error("Invalid parameter in getDocument, need parameter object.");if(!r.url&&!r.data&&!r.range)throw new Error("Invalid parameter object: need either .data, .range or .url");const n=new PDFDocumentLoadingTask,{docId:S}=n,p=r.url?getUrlProp(r.url):null,G=r.data?getDataProp(r.data):null,h=r.httpHeaders||null,P=r.withCredentials===!0,$=r.password??null,bt=r.range instanceof PDFDataRangeTransport?r.range:null,nt=Number.isInteger(r.rangeChunkSize)&&r.rangeChunkSize>0?r.rangeChunkSize:DEFAULT_RANGE_CHUNK_SIZE;let at=r.worker instanceof PDFWorker?r.worker:null;const K=r.verbosity,vt=typeof r.docBaseUrl=="string"&&!(0,_display_utils.isDataScheme)(r.docBaseUrl)?r.docBaseUrl:null,N=typeof r.cMapUrl=="string"?r.cMapUrl:null,Q=r.cMapPacked!==!1,ct=r.CMapReaderFactory||DefaultCMapReaderFactory,k=typeof r.standardFontDataUrl=="string"?r.standardFontDataUrl:null,s=r.StandardFontDataFactory||DefaultStandardFontDataFactory,a=r.stopAtErrors!==!0,m=Number.isInteger(r.maxImageSize)&&r.maxImageSize>-1?r.maxImageSize:-1,F=r.isEvalSupported!==!1,L=typeof r.isOffscreenCanvasSupported=="boolean"?r.isOffscreenCanvasSupported:!_util.isNodeJS,R=Number.isInteger(r.canvasMaxAreaInBytes)?r.canvasMaxAreaInBytes:-1,q=typeof r.disableFontFace=="boolean"?r.disableFontFace:_util.isNodeJS,mt=r.fontExtraProperties===!0,At=r.enableXfa===!0,Et=r.ownerDocument||globalThis.document,Pt=r.disableRange===!0,Rt=r.disableStream===!0,Lt=r.disableAutoFetch===!0,ht=r.pdfBug===!0,dt=bt?bt.length:r.length??NaN,_=typeof r.useSystemFonts=="boolean"?r.useSystemFonts:!_util.isNodeJS&&!q,I=typeof r.useWorkerFetch=="boolean"?r.useWorkerFetch:ct===_display_utils.DOMCMapReaderFactory&&s===_display_utils.DOMStandardFontDataFactory&&N&&k&&(0,_display_utils.isValidFetchUrl)(N,document.baseURI)&&(0,_display_utils.isValidFetchUrl)(k,document.baseURI),tt=r.canvasFactory||new DefaultCanvasFactory({ownerDocument:Et}),ut=r.filterFactory||new DefaultFilterFactory({docId:S,ownerDocument:Et}),wt=null;(0,_util.setVerbosityLevel)(K);const Ft={canvasFactory:tt,filterFactory:ut};if(I||(Ft.cMapReaderFactory=new ct({baseUrl:N,isCompressed:Q}),Ft.standardFontDataFactory=new s({baseUrl:k})),!at){const jt={verbosity:K,port:_worker_options.GlobalWorkerOptions.workerPort};at=jt.port?PDFWorker.fromPort(jt):new PDFWorker(jt),n._worker=at}const Tt={docId:S,apiVersion:"3.11.174",data:G,password:$,disableAutoFetch:Lt,rangeChunkSize:nt,length:dt,docBaseUrl:vt,enableXfa:At,evaluatorOptions:{maxImageSize:m,disableFontFace:q,ignoreErrors:a,isEvalSupported:F,isOffscreenCanvasSupported:L,canvasMaxAreaInBytes:R,fontExtraProperties:mt,useSystemFonts:_,cMapUrl:I?N:null,standardFontDataUrl:I?k:null}},et={ignoreErrors:a,isEvalSupported:F,disableFontFace:q,fontExtraProperties:mt,enableXfa:At,ownerDocument:Et,disableAutoFetch:Lt,pdfBug:ht,styleElement:wt};return at.promise.then(function(){if(n.destroyed)throw new Error("Loading aborted");const jt=_fetchDocument(at,Tt),Bt=new Promise(function(he){let oe;bt?oe=new _transport_stream.PDFDataTransportStream({length:dt,initialData:bt.initialData,progressiveDone:bt.progressiveDone,contentDispositionFilename:bt.contentDispositionFilename,disableRange:Pt,disableStream:Rt},bt):G||(oe=(Xt=>_util.isNodeJS?new _displayNode_stream.PDFNodeStream(Xt):(0,_display_utils.isValidFetchUrl)(Xt.url)?new _displayFetch_stream.PDFFetchStream(Xt):new _displayNetwork.PDFNetworkStream(Xt))({url:p,length:dt,httpHeaders:h,withCredentials:P,rangeChunkSize:nt,disableRange:Pt,disableStream:Rt})),he(oe)});return Promise.all([jt,Bt]).then(function([he,oe]){if(n.destroyed)throw new Error("Loading aborted");const xe=new _message_handler.MessageHandler(S,he,at.port),Xt=new WorkerTransport(xe,n,oe,et,Ft);n._transport=Xt,xe.send("Ready",null)})}).catch(n._capability.reject),n}async function _fetchDocument(r,n){if(r.destroyed)throw new Error("Worker was destroyed");const S=await r.messageHandler.sendWithPromise("GetDocRequest",n,n.data?[n.data.buffer]:null);if(r.destroyed)throw new Error("Worker was destroyed");return S}function getUrlProp(r){if(r instanceof URL)return r.href;try{return new URL(r,window.location).href}catch{if(_util.isNodeJS&&typeof r=="string")return r}throw new Error("Invalid PDF url data: either string or URL-object is expected in the url property.")}function getDataProp(r){if(_util.isNodeJS&&typeof Buffer<"u"&&r instanceof Buffer)throw new Error("Please provide binary data as `Uint8Array`, rather than `Buffer`.");if(r instanceof Uint8Array&&r.byteLength===r.buffer.byteLength)return r;if(typeof r=="string")return(0,_util.stringToBytes)(r);if(typeof r=="object"&&!isNaN(r?.length)||(0,_util.isArrayBuffer)(r))return new Uint8Array(r);throw new Error("Invalid PDF binary data: either TypedArray, string, or array-like object is expected in the data property.")}const u=class u{constructor(){this._capability=new _util.PromiseCapability,this._transport=null,this._worker=null,this.docId=`d${Hn(u,c)._++}`,this.destroyed=!1,this.onPassword=null,this.onProgress=null}get promise(){return this._capability.promise}async destroy(){this.destroyed=!0;try{this._worker?.port&&(this._worker._pendingDestroy=!0),await this._transport?.destroy()}catch(n){throw this._worker?.port&&delete this._worker._pendingDestroy,n}this._transport=null,this._worker&&(this._worker.destroy(),this._worker=null)}};c=new WeakMap,pt(u,c,0);let PDFDocumentLoadingTask=u;exports.PDFDocumentLoadingTask=PDFDocumentLoadingTask;class PDFDataRangeTransport{constructor(n,S,p=!1,G=null){this.length=n,this.initialData=S,this.progressiveDone=p,this.contentDispositionFilename=G,this._rangeListeners=[],this._progressListeners=[],this._progressiveReadListeners=[],this._progressiveDoneListeners=[],this._readyCapability=new _util.PromiseCapability}addRangeListener(n){this._rangeListeners.push(n)}addProgressListener(n){this._progressListeners.push(n)}addProgressiveReadListener(n){this._progressiveReadListeners.push(n)}addProgressiveDoneListener(n){this._progressiveDoneListeners.push(n)}onDataRange(n,S){for(const p of this._rangeListeners)p(n,S)}onDataProgress(n,S){this._readyCapability.promise.then(()=>{for(const p of this._progressListeners)p(n,S)})}onDataProgressiveRead(n){this._readyCapability.promise.then(()=>{for(const S of this._progressiveReadListeners)S(n)})}onDataProgressiveDone(){this._readyCapability.promise.then(()=>{for(const n of this._progressiveDoneListeners)n()})}transportReady(){this._readyCapability.resolve()}requestDataRange(n,S){(0,_util.unreachable)("Abstract method PDFDataRangeTransport.requestDataRange")}abort(){}}exports.PDFDataRangeTransport=PDFDataRangeTransport;class PDFDocumentProxy{constructor(n,S){this._pdfInfo=n,this._transport=S,Object.defineProperty(this,"getJavaScript",{value:()=>((0,_display_utils.deprecated)("`PDFDocumentProxy.getJavaScript`, please use `PDFDocumentProxy.getJSActions` instead."),this.getJSActions().then(p=>{if(!p)return p;const G=[];for(const h in p)G.push(...p[h]);return G}))})}get annotationStorage(){return this._transport.annotationStorage}get filterFactory(){return this._transport.filterFactory}get numPages(){return this._pdfInfo.numPages}get fingerprints(){return this._pdfInfo.fingerprints}get isPureXfa(){return(0,_util.shadow)(this,"isPureXfa",!!this._transport._htmlForXfa)}get allXfaHtml(){return this._transport._htmlForXfa}getPage(n){return this._transport.getPage(n)}getPageIndex(n){return this._transport.getPageIndex(n)}getDestinations(){return this._transport.getDestinations()}getDestination(n){return this._transport.getDestination(n)}getPageLabels(){return this._transport.getPageLabels()}getPageLayout(){return this._transport.getPageLayout()}getPageMode(){return this._transport.getPageMode()}getViewerPreferences(){return this._transport.getViewerPreferences()}getOpenAction(){return this._transport.getOpenAction()}getAttachments(){return this._transport.getAttachments()}getJSActions(){return this._transport.getDocJSActions()}getOutline(){return this._transport.getOutline()}getOptionalContentConfig(){return this._transport.getOptionalContentConfig()}getPermissions(){return this._transport.getPermissions()}getMetadata(){return this._transport.getMetadata()}getMarkInfo(){return this._transport.getMarkInfo()}getData(){return this._transport.getData()}saveDocument(){return this._transport.saveDocument()}getDownloadInfo(){return this._transport.downloadInfoCapability.promise}cleanup(n=!1){return this._transport.startCleanup(n||this.isPureXfa)}destroy(){return this.loadingTask.destroy()}get loadingParams(){return this._transport.loadingParams}get loadingTask(){return this._transport.loadingTask}getFieldObjects(){return this._transport.getFieldObjects()}hasJSActions(){return this._transport.hasJSActions()}getCalculationOrderIds(){return this._transport.getCalculationOrderIds()}}exports.PDFDocumentProxy=PDFDocumentProxy;class PDFPageProxy{constructor(n,S,p,G=!1){pt(this,E);pt(this,_t,null);pt(this,l,!1);this._pageIndex=n,this._pageInfo=S,this._transport=p,this._stats=G?new _display_utils.StatTimer:null,this._pdfBug=G,this.commonObjs=p.commonObjs,this.objs=new PDFObjects,this._maybeCleanupAfterRender=!1,this._intentStates=new Map,this.destroyed=!1}get pageNumber(){return this._pageIndex+1}get rotate(){return this._pageInfo.rotate}get ref(){return this._pageInfo.ref}get userUnit(){return this._pageInfo.userUnit}get view(){return this._pageInfo.view}getViewport({scale:n,rotation:S=this.rotate,offsetX:p=0,offsetY:G=0,dontFlip:h=!1}={}){return new _display_utils.PageViewport({viewBox:this.view,scale:n,rotation:S,offsetX:p,offsetY:G,dontFlip:h})}getAnnotations({intent:n="display"}={}){const S=this._transport.getRenderingIntent(n);return this._transport.getAnnotations(this._pageIndex,S.renderingIntent)}getJSActions(){return this._transport.getPageJSActions(this._pageIndex)}get filterFactory(){return this._transport.filterFactory}get isPureXfa(){return(0,_util.shadow)(this,"isPureXfa",!!this._transport._htmlForXfa)}async getXfa(){return this._transport._htmlForXfa?.children[this._pageIndex]||null}render({canvasContext:n,viewport:S,intent:p="display",annotationMode:G=_util.AnnotationMode.ENABLE,transform:h=null,background:P=null,optionalContentConfigPromise:$=null,annotationCanvasMap:bt=null,pageColors:nt=null,printAnnotationStorage:at=null}){this._stats?.time("Overall");const K=this._transport.getRenderingIntent(p,G,at);gt(this,l,!1),J(this,E,ii).call(this),$||($=this._transport.getOptionalContentConfig());let vt=this._intentStates.get(K.cacheKey);vt||(vt=Object.create(null),this._intentStates.set(K.cacheKey,vt)),vt.streamReaderCancelTimeout&&(clearTimeout(vt.streamReaderCancelTimeout),vt.streamReaderCancelTimeout=null);const N=!!(K.renderingIntent&_util.RenderingIntentFlag.PRINT);vt.displayReadyCapability||(vt.displayReadyCapability=new _util.PromiseCapability,vt.operatorList={fnArray:[],argsArray:[],lastChunk:!1,separateAnnots:null},this._stats?.time("Page Request"),this._pumpOperatorList(K));const Q=s=>{vt.renderTasks.delete(ct),(this._maybeCleanupAfterRender||N)&&gt(this,l,!0),J(this,E,Ln).call(this,!N),s?(ct.capability.reject(s),this._abortOperatorList({intentState:vt,reason:s instanceof Error?s:new Error(s)})):ct.capability.resolve(),this._stats?.timeEnd("Rendering"),this._stats?.timeEnd("Overall")},ct=new InternalRenderTask({callback:Q,params:{canvasContext:n,viewport:S,transform:h,background:P},objs:this.objs,commonObjs:this.commonObjs,annotationCanvasMap:bt,operatorList:vt.operatorList,pageIndex:this._pageIndex,canvasFactory:this._transport.canvasFactory,filterFactory:this._transport.filterFactory,useRequestAnimationFrame:!N,pdfBug:this._pdfBug,pageColors:nt});(vt.renderTasks||(vt.renderTasks=new Set)).add(ct);const k=ct.task;return Promise.all([vt.displayReadyCapability.promise,$]).then(([s,a])=>{if(this.destroyed){Q();return}this._stats?.time("Rendering"),ct.initializeGraphics({transparency:s,optionalContentConfig:a}),ct.operatorListChanged()}).catch(Q),k}getOperatorList({intent:n="display",annotationMode:S=_util.AnnotationMode.ENABLE,printAnnotationStorage:p=null}={}){function G(){P.operatorList.lastChunk&&(P.opListReadCapability.resolve(P.operatorList),P.renderTasks.delete($))}const h=this._transport.getRenderingIntent(n,S,p,!0);let P=this._intentStates.get(h.cacheKey);P||(P=Object.create(null),this._intentStates.set(h.cacheKey,P));let $;return P.opListReadCapability||($=Object.create(null),$.operatorListChanged=G,P.opListReadCapability=new _util.PromiseCapability,(P.renderTasks||(P.renderTasks=new Set)).add($),P.operatorList={fnArray:[],argsArray:[],lastChunk:!1,separateAnnots:null},this._stats?.time("Page Request"),this._pumpOperatorList(h)),P.opListReadCapability.promise}streamTextContent({includeMarkedContent:n=!1,disableNormalization:S=!1}={}){return this._transport.messageHandler.sendWithStream("GetTextContent",{pageIndex:this._pageIndex,includeMarkedContent:n===!0,disableNormalization:S===!0},{highWaterMark:100,size(G){return G.items.length}})}getTextContent(n={}){if(this._transport._htmlForXfa)return this.getXfa().then(p=>_xfa_text.XfaText.textContent(p));const S=this.streamTextContent(n);return new Promise(function(p,G){function h(){P.read().then(function({value:bt,done:nt}){if(nt){p($);return}Object.assign($.styles,bt.styles),$.items.push(...bt.items),h()},G)}const P=S.getReader(),$={items:[],styles:Object.create(null)};h()})}getStructTree(){return this._transport.getStructTree(this._pageIndex)}_destroy(){this.destroyed=!0;const n=[];for(const S of this._intentStates.values())if(this._abortOperatorList({intentState:S,reason:new Error("Page was destroyed."),force:!0}),!S.opListReadCapability)for(const p of S.renderTasks)n.push(p.completed),p.cancel();return this.objs.clear(),gt(this,l,!1),J(this,E,ii).call(this),Promise.all(n)}cleanup(n=!1){gt(this,l,!0);const S=J(this,E,Ln).call(this,!1);return n&&S&&this._stats&&(this._stats=new _display_utils.StatTimer),S}_startRenderPage(n,S){const p=this._intentStates.get(S);p&&(this._stats?.timeEnd("Page Request"),p.displayReadyCapability?.resolve(n))}_renderPageChunk(n,S){for(let p=0,G=n.length;p<G;p++)S.operatorList.fnArray.push(n.fnArray[p]),S.operatorList.argsArray.push(n.argsArray[p]);S.operatorList.lastChunk=n.lastChunk,S.operatorList.separateAnnots=n.separateAnnots;for(const p of S.renderTasks)p.operatorListChanged();n.lastChunk&&J(this,E,Ln).call(this,!0)}_pumpOperatorList({renderingIntent:n,cacheKey:S,annotationStorageSerializable:p}){const{map:G,transfers:h}=p,$=this._transport.messageHandler.sendWithStream("GetOperatorList",{pageIndex:this._pageIndex,intent:n,cacheKey:S,annotationStorage:G},h).getReader(),bt=this._intentStates.get(S);bt.streamReader=$;const nt=()=>{$.read().then(({value:at,done:K})=>{if(K){bt.streamReader=null;return}this._transport.destroyed||(this._renderPageChunk(at,bt),nt())},at=>{if(bt.streamReader=null,!this._transport.destroyed){if(bt.operatorList){bt.operatorList.lastChunk=!0;for(const K of bt.renderTasks)K.operatorListChanged();J(this,E,Ln).call(this,!0)}if(bt.displayReadyCapability)bt.displayReadyCapability.reject(at);else if(bt.opListReadCapability)bt.opListReadCapability.reject(at);else throw at}})};nt()}_abortOperatorList({intentState:n,reason:S,force:p=!1}){if(n.streamReader){if(n.streamReaderCancelTimeout&&(clearTimeout(n.streamReaderCancelTimeout),n.streamReaderCancelTimeout=null),!p){if(n.renderTasks.size>0)return;if(S instanceof _display_utils.RenderingCancelledException){let G=RENDERING_CANCELLED_TIMEOUT;S.extraDelay>0&&S.extraDelay<1e3&&(G+=S.extraDelay),n.streamReaderCancelTimeout=setTimeout(()=>{n.streamReaderCancelTimeout=null,this._abortOperatorList({intentState:n,reason:S,force:!0})},G);return}}if(n.streamReader.cancel(new _util.AbortException(S.message)).catch(()=>{}),n.streamReader=null,!this._transport.destroyed){for(const[G,h]of this._intentStates)if(h===n){this._intentStates.delete(G);break}this.cleanup()}}}get stats(){return this._stats}}_t=new WeakMap,l=new WeakMap,E=new WeakSet,Ln=function(n=!1){if(J(this,E,ii).call(this),!e(this,l)||this.destroyed)return!1;if(n)return gt(this,_t,setTimeout(()=>{gt(this,_t,null),J(this,E,Ln).call(this,!1)},DELAYED_CLEANUP_TIMEOUT)),!1;for(const{renderTasks:S,operatorList:p}of this._intentStates.values())if(S.size>0||!p.lastChunk)return!1;return this._intentStates.clear(),this.objs.clear(),gt(this,l,!1),!0},ii=function(){e(this,_t)&&(clearTimeout(e(this,_t)),gt(this,_t,null))},exports.PDFPageProxy=PDFPageProxy;class LoopbackPort{constructor(){pt(this,Ct,new Set);pt(this,W,Promise.resolve())}postMessage(n,S){const p={data:structuredClone(n,S?{transfer:S}:null)};e(this,W).then(()=>{for(const G of e(this,Ct))G.call(this,p)})}addEventListener(n,S){e(this,Ct).add(S)}removeEventListener(n,S){e(this,Ct).delete(S)}terminate(){e(this,Ct).clear()}}Ct=new WeakMap,W=new WeakMap,exports.LoopbackPort=LoopbackPort;const PDFWorkerUtil={isWorkerDisabled:!1,fallbackWorkerSrc:null,fakeWorkerId:0};exports.PDFWorkerUtil=PDFWorkerUtil;{if(_util.isNodeJS&&typeof commonjsRequire=="function")PDFWorkerUtil.isWorkerDisabled=!0,PDFWorkerUtil.fallbackWorkerSrc="./pdf.worker.js";else if(typeof document=="object"){const r=document?.currentScript?.src;r&&(PDFWorkerUtil.fallbackWorkerSrc=r.replace(/(\.(?:min\.)?js)(\?.*)?$/i,".worker$1$2"))}PDFWorkerUtil.isSameOrigin=function(r,n){let S;try{if(S=new URL(r),!S.origin||S.origin==="null")return!1}catch{return!1}const p=new URL(n,S);return S.origin===p.origin},PDFWorkerUtil.createCDNWrapper=function(r){const n=`importScripts("${r}");`;return URL.createObjectURL(new Blob([n]))}}const _PDFWorker=class _PDFWorker{constructor({name:r=null,port:n=null,verbosity:S=(0,_util.getVerbosityLevel)()}={}){if(this.name=r,this.destroyed=!1,this.verbosity=S,this._readyCapability=new _util.PromiseCapability,this._port=null,this._webWorker=null,this._messageHandler=null,n){if(e(_PDFWorker,T)?.has(n))throw new Error("Cannot use more than one PDFWorker per port.");(e(_PDFWorker,T)||gt(_PDFWorker,T,new WeakMap)).set(n,this),this._initializeFromPort(n);return}this._initialize()}get promise(){return this._readyCapability.promise}get port(){return this._port}get messageHandler(){return this._messageHandler}_initializeFromPort(r){this._port=r,this._messageHandler=new _message_handler.MessageHandler("main","worker",r),this._messageHandler.on("ready",function(){}),this._readyCapability.resolve(),this._messageHandler.send("configure",{verbosity:this.verbosity})}_initialize(){if(!PDFWorkerUtil.isWorkerDisabled&&!_PDFWorker._mainThreadWorkerMessageHandler){let{workerSrc:r}=_PDFWorker;try{PDFWorkerUtil.isSameOrigin(window.location.href,r)||(r=PDFWorkerUtil.createCDNWrapper(new URL(r,window.location).href));const n=new Worker(r),S=new _message_handler.MessageHandler("main","worker",n),p=()=>{n.removeEventListener("error",G),S.destroy(),n.terminate(),this.destroyed?this._readyCapability.reject(new Error("Worker was destroyed")):this._setupFakeWorker()},G=()=>{this._webWorker||p()};n.addEventListener("error",G),S.on("test",P=>{if(n.removeEventListener("error",G),this.destroyed){p();return}P?(this._messageHandler=S,this._port=n,this._webWorker=n,this._readyCapability.resolve(),S.send("configure",{verbosity:this.verbosity})):(this._setupFakeWorker(),S.destroy(),n.terminate())}),S.on("ready",P=>{if(n.removeEventListener("error",G),this.destroyed){p();return}try{h()}catch{this._setupFakeWorker()}});const h=()=>{const P=new Uint8Array;S.send("test",P,[P.buffer])};h();return}catch{(0,_util.info)("The worker has been disabled.")}}this._setupFakeWorker()}_setupFakeWorker(){PDFWorkerUtil.isWorkerDisabled||((0,_util.warn)("Setting up fake worker."),PDFWorkerUtil.isWorkerDisabled=!0),_PDFWorker._setupFakeWorkerGlobal.then(r=>{if(this.destroyed){this._readyCapability.reject(new Error("Worker was destroyed"));return}const n=new LoopbackPort;this._port=n;const S=`fake${PDFWorkerUtil.fakeWorkerId++}`,p=new _message_handler.MessageHandler(S+"_worker",S,n);r.setup(p,n);const G=new _message_handler.MessageHandler(S,S+"_worker",n);this._messageHandler=G,this._readyCapability.resolve(),G.send("configure",{verbosity:this.verbosity})}).catch(r=>{this._readyCapability.reject(new Error(`Setting up fake worker failed: "${r.message}".`))})}destroy(){this.destroyed=!0,this._webWorker&&(this._webWorker.terminate(),this._webWorker=null),e(_PDFWorker,T)?.delete(this._port),this._port=null,this._messageHandler&&(this._messageHandler.destroy(),this._messageHandler=null)}static fromPort(r){if(!r?.port)throw new Error("PDFWorker.fromPort - invalid method signature.");const n=e(this,T)?.get(r.port);if(n){if(n._pendingDestroy)throw new Error("PDFWorker.fromPort - the worker is being destroyed.\nPlease remember to await `PDFDocumentLoadingTask.destroy()`-calls.");return n}return new _PDFWorker(r)}static get workerSrc(){if(_worker_options.GlobalWorkerOptions.workerSrc)return _worker_options.GlobalWorkerOptions.workerSrc;if(PDFWorkerUtil.fallbackWorkerSrc!==null)return _util.isNodeJS||(0,_display_utils.deprecated)('No "GlobalWorkerOptions.workerSrc" specified.'),PDFWorkerUtil.fallbackWorkerSrc;throw new Error('No "GlobalWorkerOptions.workerSrc" specified.')}static get _mainThreadWorkerMessageHandler(){try{return globalThis.pdfjsWorker?.WorkerMessageHandler||null}catch{return null}}static get _setupFakeWorkerGlobal(){const loader=async()=>{const mainWorkerMessageHandler=this._mainThreadWorkerMessageHandler;if(mainWorkerMessageHandler)return mainWorkerMessageHandler;if(_util.isNodeJS&&typeof commonjsRequire=="function"){const worker=eval("require")(this.workerSrc);return worker.WorkerMessageHandler}return await(0,_display_utils.loadScript)(this.workerSrc),window.pdfjsWorker.WorkerMessageHandler};return(0,_util.shadow)(this,"_setupFakeWorkerGlobal",loader())}};T=new WeakMap,pt(_PDFWorker,T);let PDFWorker=_PDFWorker;exports.PDFWorker=PDFWorker;class WorkerTransport{constructor(n,S,p,G,h){pt(this,b);pt(this,d,new Map);pt(this,H,new Map);pt(this,j,new Map);pt(this,y,null);this.messageHandler=n,this.loadingTask=S,this.commonObjs=new PDFObjects,this.fontLoader=new _font_loader.FontLoader({ownerDocument:G.ownerDocument,styleElement:G.styleElement}),this._params=G,this.canvasFactory=h.canvasFactory,this.filterFactory=h.filterFactory,this.cMapReaderFactory=h.cMapReaderFactory,this.standardFontDataFactory=h.standardFontDataFactory,this.destroyed=!1,this.destroyCapability=null,this._networkStream=p,this._fullReader=null,this._lastProgress=null,this.downloadInfoCapability=new _util.PromiseCapability,this.setupMessageHandler()}get annotationStorage(){return(0,_util.shadow)(this,"annotationStorage",new _annotation_storage.AnnotationStorage)}getRenderingIntent(n,S=_util.AnnotationMode.ENABLE,p=null,G=!1){let h=_util.RenderingIntentFlag.DISPLAY,P=_annotation_storage.SerializableEmpty;switch(n){case"any":h=_util.RenderingIntentFlag.ANY;break;case"display":break;case"print":h=_util.RenderingIntentFlag.PRINT;break;default:(0,_util.warn)(`getRenderingIntent - invalid intent: ${n}`)}switch(S){case _util.AnnotationMode.DISABLE:h+=_util.RenderingIntentFlag.ANNOTATIONS_DISABLE;break;case _util.AnnotationMode.ENABLE:break;case _util.AnnotationMode.ENABLE_FORMS:h+=_util.RenderingIntentFlag.ANNOTATIONS_FORMS;break;case _util.AnnotationMode.ENABLE_STORAGE:h+=_util.RenderingIntentFlag.ANNOTATIONS_STORAGE,P=(h&_util.RenderingIntentFlag.PRINT&&p instanceof _annotation_storage.PrintAnnotationStorage?p:this.annotationStorage).serializable;break;default:(0,_util.warn)(`getRenderingIntent - invalid annotationMode: ${S}`)}return G&&(h+=_util.RenderingIntentFlag.OPLIST),{renderingIntent:h,cacheKey:`${h}_${P.hash}`,annotationStorageSerializable:P}}destroy(){if(this.destroyCapability)return this.destroyCapability.promise;this.destroyed=!0,this.destroyCapability=new _util.PromiseCapability,e(this,y)?.reject(new Error("Worker was destroyed during onPassword callback"));const n=[];for(const p of e(this,H).values())n.push(p._destroy());e(this,H).clear(),e(this,j).clear(),this.hasOwnProperty("annotationStorage")&&this.annotationStorage.resetModified();const S=this.messageHandler.sendWithPromise("Terminate",null);return n.push(S),Promise.all(n).then(()=>{this.commonObjs.clear(),this.fontLoader.clear(),e(this,d).clear(),this.filterFactory.destroy(),this._networkStream?.cancelAllRequests(new _util.AbortException("Worker was terminated.")),this.messageHandler&&(this.messageHandler.destroy(),this.messageHandler=null),this.destroyCapability.resolve()},this.destroyCapability.reject),this.destroyCapability.promise}setupMessageHandler(){const{messageHandler:n,loadingTask:S}=this;n.on("GetReader",(p,G)=>{(0,_util.assert)(this._networkStream,"GetReader - no `IPDFStream` instance available."),this._fullReader=this._networkStream.getFullReader(),this._fullReader.onProgress=h=>{this._lastProgress={loaded:h.loaded,total:h.total}},G.onPull=()=>{this._fullReader.read().then(function({value:h,done:P}){if(P){G.close();return}(0,_util.assert)(h instanceof ArrayBuffer,"GetReader - expected an ArrayBuffer."),G.enqueue(new Uint8Array(h),1,[h])}).catch(h=>{G.error(h)})},G.onCancel=h=>{this._fullReader.cancel(h),G.ready.catch(P=>{if(!this.destroyed)throw P})}}),n.on("ReaderHeadersReady",p=>{const G=new _util.PromiseCapability,h=this._fullReader;return h.headersReady.then(()=>{(!h.isStreamingSupported||!h.isRangeSupported)&&(this._lastProgress&&S.onProgress?.(this._lastProgress),h.onProgress=P=>{S.onProgress?.({loaded:P.loaded,total:P.total})}),G.resolve({isStreamingSupported:h.isStreamingSupported,isRangeSupported:h.isRangeSupported,contentLength:h.contentLength})},G.reject),G.promise}),n.on("GetRangeReader",(p,G)=>{(0,_util.assert)(this._networkStream,"GetRangeReader - no `IPDFStream` instance available.");const h=this._networkStream.getRangeReader(p.begin,p.end);if(!h){G.close();return}G.onPull=()=>{h.read().then(function({value:P,done:$}){if($){G.close();return}(0,_util.assert)(P instanceof ArrayBuffer,"GetRangeReader - expected an ArrayBuffer."),G.enqueue(new Uint8Array(P),1,[P])}).catch(P=>{G.error(P)})},G.onCancel=P=>{h.cancel(P),G.ready.catch($=>{if(!this.destroyed)throw $})}}),n.on("GetDoc",({pdfInfo:p})=>{this._numPages=p.numPages,this._htmlForXfa=p.htmlForXfa,delete p.htmlForXfa,S._capability.resolve(new PDFDocumentProxy(p,this))}),n.on("DocException",function(p){let G;switch(p.name){case"PasswordException":G=new _util.PasswordException(p.message,p.code);break;case"InvalidPDFException":G=new _util.InvalidPDFException(p.message);break;case"MissingPDFException":G=new _util.MissingPDFException(p.message);break;case"UnexpectedResponseException":G=new _util.UnexpectedResponseException(p.message,p.status);break;case"UnknownErrorException":G=new _util.UnknownErrorException(p.message,p.details);break;default:(0,_util.unreachable)("DocException - expected a valid Error.")}S._capability.reject(G)}),n.on("PasswordRequest",p=>{if(gt(this,y,new _util.PromiseCapability),S.onPassword){const G=h=>{h instanceof Error?e(this,y).reject(h):e(this,y).resolve({password:h})};try{S.onPassword(G,p.code)}catch(h){e(this,y).reject(h)}}else e(this,y).reject(new _util.PasswordException(p.message,p.code));return e(this,y).promise}),n.on("DataLoaded",p=>{S.onProgress?.({loaded:p.length,total:p.length}),this.downloadInfoCapability.resolve(p)}),n.on("StartRenderPage",p=>{if(this.destroyed)return;e(this,H).get(p.pageIndex)._startRenderPage(p.transparency,p.cacheKey)}),n.on("commonobj",([p,G,h])=>{if(!this.destroyed&&!this.commonObjs.has(p))switch(G){case"Font":const P=this._params;if("error"in h){const nt=h.error;(0,_util.warn)(`Error during font loading: ${nt}`),this.commonObjs.resolve(p,nt);break}const $=P.pdfBug&&globalThis.FontInspector?.enabled?(nt,at)=>globalThis.FontInspector.fontAdded(nt,at):null,bt=new _font_loader.FontFaceObject(h,{isEvalSupported:P.isEvalSupported,disableFontFace:P.disableFontFace,ignoreErrors:P.ignoreErrors,inspectFont:$});this.fontLoader.bind(bt).catch(nt=>n.sendWithPromise("FontFallback",{id:p})).finally(()=>{!P.fontExtraProperties&&bt.data&&(bt.data=null),this.commonObjs.resolve(p,bt)});break;case"FontPath":case"Image":case"Pattern":this.commonObjs.resolve(p,h);break;default:throw new Error(`Got unknown common object type ${G}`)}}),n.on("obj",([p,G,h,P])=>{if(this.destroyed)return;const $=e(this,H).get(G);if(!$.objs.has(p))switch(h){case"Image":if($.objs.resolve(p,P),P){let bt;if(P.bitmap){const{width:nt,height:at}=P;bt=nt*at*4}else bt=P.data?.length||0;bt>_util.MAX_IMAGE_SIZE_TO_CACHE&&($._maybeCleanupAfterRender=!0)}break;case"Pattern":$.objs.resolve(p,P);break;default:throw new Error(`Got unknown object type ${h}`)}}),n.on("DocProgress",p=>{this.destroyed||S.onProgress?.({loaded:p.loaded,total:p.total})}),n.on("FetchBuiltInCMap",p=>this.destroyed?Promise.reject(new Error("Worker was destroyed.")):this.cMapReaderFactory?this.cMapReaderFactory.fetch(p):Promise.reject(new Error("CMapReaderFactory not initialized, see the `useWorkerFetch` parameter."))),n.on("FetchStandardFontData",p=>this.destroyed?Promise.reject(new Error("Worker was destroyed.")):this.standardFontDataFactory?this.standardFontDataFactory.fetch(p):Promise.reject(new Error("StandardFontDataFactory not initialized, see the `useWorkerFetch` parameter.")))}getData(){return this.messageHandler.sendWithPromise("GetData",null)}saveDocument(){this.annotationStorage.size<=0&&(0,_util.warn)("saveDocument called while `annotationStorage` is empty, please use the getData-method instead.");const{map:n,transfers:S}=this.annotationStorage.serializable;return this.messageHandler.sendWithPromise("SaveDocument",{isPureXfa:!!this._htmlForXfa,numPages:this._numPages,annotationStorage:n,filename:this._fullReader?.filename??null},S).finally(()=>{this.annotationStorage.resetModified()})}getPage(n){if(!Number.isInteger(n)||n<=0||n>this._numPages)return Promise.reject(new Error("Invalid page request."));const S=n-1,p=e(this,j).get(S);if(p)return p;const G=this.messageHandler.sendWithPromise("GetPage",{pageIndex:S}).then(h=>{if(this.destroyed)throw new Error("Transport destroyed");const P=new PDFPageProxy(S,h,this,this._params.pdfBug);return e(this,H).set(S,P),P});return e(this,j).set(S,G),G}getPageIndex(n){return typeof n!="object"||n===null||!Number.isInteger(n.num)||n.num<0||!Number.isInteger(n.gen)||n.gen<0?Promise.reject(new Error("Invalid pageIndex request.")):this.messageHandler.sendWithPromise("GetPageIndex",{num:n.num,gen:n.gen})}getAnnotations(n,S){return this.messageHandler.sendWithPromise("GetAnnotations",{pageIndex:n,intent:S})}getFieldObjects(){return J(this,b,ri).call(this,"GetFieldObjects")}hasJSActions(){return J(this,b,ri).call(this,"HasJSActions")}getCalculationOrderIds(){return this.messageHandler.sendWithPromise("GetCalculationOrderIds",null)}getDestinations(){return this.messageHandler.sendWithPromise("GetDestinations",null)}getDestination(n){return typeof n!="string"?Promise.reject(new Error("Invalid destination request.")):this.messageHandler.sendWithPromise("GetDestination",{id:n})}getPageLabels(){return this.messageHandler.sendWithPromise("GetPageLabels",null)}getPageLayout(){return this.messageHandler.sendWithPromise("GetPageLayout",null)}getPageMode(){return this.messageHandler.sendWithPromise("GetPageMode",null)}getViewerPreferences(){return this.messageHandler.sendWithPromise("GetViewerPreferences",null)}getOpenAction(){return this.messageHandler.sendWithPromise("GetOpenAction",null)}getAttachments(){return this.messageHandler.sendWithPromise("GetAttachments",null)}getDocJSActions(){return J(this,b,ri).call(this,"GetDocJSActions")}getPageJSActions(n){return this.messageHandler.sendWithPromise("GetPageJSActions",{pageIndex:n})}getStructTree(n){return this.messageHandler.sendWithPromise("GetStructTree",{pageIndex:n})}getOutline(){return this.messageHandler.sendWithPromise("GetOutline",null)}getOptionalContentConfig(){return this.messageHandler.sendWithPromise("GetOptionalContentConfig",null).then(n=>new _optional_content_config.OptionalContentConfig(n))}getPermissions(){return this.messageHandler.sendWithPromise("GetPermissions",null)}getMetadata(){const n="GetMetadata",S=e(this,d).get(n);if(S)return S;const p=this.messageHandler.sendWithPromise(n,null).then(G=>({info:G[0],metadata:G[1]?new _metadata.Metadata(G[1]):null,contentDispositionFilename:this._fullReader?.filename??null,contentLength:this._fullReader?.contentLength??null}));return e(this,d).set(n,p),p}getMarkInfo(){return this.messageHandler.sendWithPromise("GetMarkInfo",null)}async startCleanup(n=!1){if(!this.destroyed){await this.messageHandler.sendWithPromise("Cleanup",null);for(const S of e(this,H).values())if(!S.cleanup())throw new Error(`startCleanup: Page ${S.pageNumber} is currently rendering.`);this.commonObjs.clear(),n||this.fontLoader.clear(),e(this,d).clear(),this.filterFactory.destroy(!0)}}get loadingParams(){const{disableAutoFetch:n,enableXfa:S}=this._params;return(0,_util.shadow)(this,"loadingParams",{disableAutoFetch:n,enableXfa:S})}}d=new WeakMap,H=new WeakMap,j=new WeakMap,y=new WeakMap,b=new WeakSet,ri=function(n,S=null){const p=e(this,d).get(n);if(p)return p;const G=this.messageHandler.sendWithPromise(n,S);return e(this,d).set(n,G),G};class PDFObjects{constructor(){pt(this,g);pt(this,v,Object.create(null))}get(n,S=null){if(S){const G=J(this,g,Mi).call(this,n);return G.capability.promise.then(()=>S(G.data)),null}const p=e(this,v)[n];if(!p?.capability.settled)throw new Error(`Requesting object that isn't resolved yet ${n}.`);return p.data}has(n){return e(this,v)[n]?.capability.settled||!1}resolve(n,S=null){const p=J(this,g,Mi).call(this,n);p.data=S,p.capability.resolve()}clear(){for(const n in e(this,v)){const{data:S}=e(this,v)[n];S?.bitmap?.close()}gt(this,v,Object.create(null))}}v=new WeakMap,g=new WeakSet,Mi=function(n){var S;return(S=e(this,v))[n]||(S[n]={capability:new _util.PromiseCapability,data:null})};class RenderTask{constructor(n){pt(this,O,null);gt(this,O,n),this.onContinue=null}get promise(){return e(this,O).capability.promise}cancel(n=0){e(this,O).cancel(null,n)}get separateAnnots(){const{separateAnnots:n}=e(this,O).operatorList;if(!n)return!1;const{annotationCanvasMap:S}=e(this,O);return n.form||n.canvas&&S?.size>0}}O=new WeakMap,exports.RenderTask=RenderTask;const o=class o{constructor({callback:n,params:S,objs:p,commonObjs:G,annotationCanvasMap:h,operatorList:P,pageIndex:$,canvasFactory:bt,filterFactory:nt,useRequestAnimationFrame:at=!1,pdfBug:K=!1,pageColors:vt=null}){this.callback=n,this.params=S,this.objs=p,this.commonObjs=G,this.annotationCanvasMap=h,this.operatorListIdx=null,this.operatorList=P,this._pageIndex=$,this.canvasFactory=bt,this.filterFactory=nt,this._pdfBug=K,this.pageColors=vt,this.running=!1,this.graphicsReadyCallback=null,this.graphicsReady=!1,this._useRequestAnimationFrame=at===!0&&typeof window<"u",this.cancelled=!1,this.capability=new _util.PromiseCapability,this.task=new RenderTask(this),this._cancelBound=this.cancel.bind(this),this._continueBound=this._continue.bind(this),this._scheduleNextBound=this._scheduleNext.bind(this),this._nextBound=this._next.bind(this),this._canvas=S.canvasContext.canvas}get completed(){return this.capability.promise.catch(function(){})}initializeGraphics({transparency:n=!1,optionalContentConfig:S}){if(this.cancelled)return;if(this._canvas){if(e(o,w).has(this._canvas))throw new Error("Cannot use the same canvas during multiple render() operations. Use different canvas or ensure previous operations were cancelled or completed.");e(o,w).add(this._canvas)}this._pdfBug&&globalThis.StepperManager?.enabled&&(this.stepper=globalThis.StepperManager.create(this._pageIndex),this.stepper.init(this.operatorList),this.stepper.nextBreakPoint=this.stepper.getNextBreakPoint());const{canvasContext:p,viewport:G,transform:h,background:P}=this.params;this.gfx=new _canvas.CanvasGraphics(p,this.commonObjs,this.objs,this.canvasFactory,this.filterFactory,{optionalContentConfig:S},this.annotationCanvasMap,this.pageColors),this.gfx.beginDrawing({transform:h,viewport:G,transparency:n,background:P}),this.operatorListIdx=0,this.graphicsReady=!0,this.graphicsReadyCallback?.()}cancel(n=null,S=0){this.running=!1,this.cancelled=!0,this.gfx?.endDrawing(),e(o,w).delete(this._canvas),this.callback(n||new _display_utils.RenderingCancelledException(`Rendering cancelled, page ${this._pageIndex+1}`,S))}operatorListChanged(){if(!this.graphicsReady){this.graphicsReadyCallback||(this.graphicsReadyCallback=this._continueBound);return}this.stepper?.updateOperatorList(this.operatorList),!this.running&&this._continue()}_continue(){this.running=!0,!this.cancelled&&(this.task.onContinue?this.task.onContinue(this._scheduleNextBound):this._scheduleNext())}_scheduleNext(){this._useRequestAnimationFrame?window.requestAnimationFrame(()=>{this._nextBound().catch(this._cancelBound)}):Promise.resolve().then(this._nextBound).catch(this._cancelBound)}async _next(){this.cancelled||(this.operatorListIdx=this.gfx.executeOperatorList(this.operatorList,this.operatorListIdx,this._continueBound,this.stepper),this.operatorListIdx===this.operatorList.argsArray.length&&(this.running=!1,this.operatorList.lastChunk&&(this.gfx.endDrawing(),e(o,w).delete(this._canvas),this.callback())))}};w=new WeakMap,pt(o,w,new WeakSet);let InternalRenderTask=o;const version="3.11.174";exports.version=version;const build="ce8716743";exports.build=build}),((c,u,_t)=>{var T,d,H,xr,y;Object.defineProperty(u,"__esModule",{value:!0}),u.SerializableEmpty=u.PrintAnnotationStorage=u.AnnotationStorage=void 0;var l=_t(1),E=_t(4),t=_t(8);const Z=Object.freeze({map:null,hash:"",transfers:void 0});u.SerializableEmpty=Z;class Ct{constructor(){pt(this,H);pt(this,T,!1);pt(this,d,new Map);this.onSetModified=null,this.onResetModified=null,this.onAnnotationEditor=null}getValue(M,v){const g=e(this,d).get(M);return g===void 0?v:Object.assign(v,g)}getRawValue(M){return e(this,d).get(M)}remove(M){if(e(this,d).delete(M),e(this,d).size===0&&this.resetModified(),typeof this.onAnnotationEditor=="function"){for(const v of e(this,d).values())if(v instanceof E.AnnotationEditor)return;this.onAnnotationEditor(null)}}setValue(M,v){const g=e(this,d).get(M);let A=!1;if(g!==void 0)for(const[O,w]of Object.entries(v))g[O]!==w&&(A=!0,g[O]=w);else A=!0,e(this,d).set(M,v);A&&J(this,H,xr).call(this),v instanceof E.AnnotationEditor&&typeof this.onAnnotationEditor=="function"&&this.onAnnotationEditor(v.constructor._type)}has(M){return e(this,d).has(M)}getAll(){return e(this,d).size>0?(0,l.objectFromMap)(e(this,d)):null}setAll(M){for(const[v,g]of Object.entries(M))this.setValue(v,g)}get size(){return e(this,d).size}resetModified(){e(this,T)&&(gt(this,T,!1),typeof this.onResetModified=="function"&&this.onResetModified())}get print(){return new W(this)}get serializable(){if(e(this,d).size===0)return Z;const M=new Map,v=new t.MurmurHash3_64,g=[],A=Object.create(null);let O=!1;for(const[w,o]of e(this,d)){const r=o instanceof E.AnnotationEditor?o.serialize(!1,A):o;r&&(M.set(w,r),v.update(`${w}:${JSON.stringify(r)}`),O||(O=!!r.bitmap))}if(O)for(const w of M.values())w.bitmap&&g.push(w.bitmap);return M.size>0?{map:M,hash:v.hexdigest(),transfers:g}:Z}}T=new WeakMap,d=new WeakMap,H=new WeakSet,xr=function(){e(this,T)||(gt(this,T,!0),typeof this.onSetModified=="function"&&this.onSetModified())},u.AnnotationStorage=Ct;class W extends Ct{constructor(v){super();pt(this,y);const{map:g,hash:A,transfers:O}=v.serializable,w=structuredClone(g,O?{transfer:O}:null);gt(this,y,{map:w,hash:A,transfers:O})}get print(){(0,l.unreachable)("Should not call PrintAnnotationStorage.print")}get serializable(){return e(this,y)}}y=new WeakMap,u.PrintAnnotationStorage=W}),((c,u,_t)=>{var W,T,d,H,j,y,b,M,v,g,A,O,w,o,r,Ri,Fi,p,Li,Ii,Mr,Rr,Fr,Di,Lr;Object.defineProperty(u,"__esModule",{value:!0}),u.AnnotationEditor=void 0;var l=_t(5),E=_t(1),t=_t(6);const K=class K{constructor(N){pt(this,r);pt(this,W,"");pt(this,T,!1);pt(this,d,null);pt(this,H,null);pt(this,j,null);pt(this,y,!1);pt(this,b,null);pt(this,M,this.focusin.bind(this));pt(this,v,this.focusout.bind(this));pt(this,g,!1);pt(this,A,!1);pt(this,O,!1);$e(this,"_initialOptions",Object.create(null));$e(this,"_uiManager",null);$e(this,"_focusEventsAllowed",!0);$e(this,"_l10nPromise",null);pt(this,w,!1);pt(this,o,K._zIndex++);this.constructor===K&&(0,E.unreachable)("Cannot initialize AnnotationEditor."),this.parent=N.parent,this.id=N.id,this.width=this.height=null,this.pageIndex=N.parent.pageIndex,this.name=N.name,this.div=null,this._uiManager=N.uiManager,this.annotationElementId=null,this._willKeepAspectRatio=!1,this._initialOptions.isCentered=N.isCentered,this._structTreeParentId=null;const{rotation:Q,rawDims:{pageWidth:ct,pageHeight:k,pageX:s,pageY:a}}=this.parent.viewport;this.rotation=Q,this.pageRotation=(360+Q-this._uiManager.viewParameters.rotation)%360,this.pageDimensions=[ct,k],this.pageTranslation=[s,a];const[m,F]=this.parentDimensions;this.x=N.x/m,this.y=N.y/F,this.isAttachedToDOM=!1,this.deleted=!1}get editorType(){return Object.getPrototypeOf(this).constructor._type}static get _defaultLineColor(){return(0,E.shadow)(this,"_defaultLineColor",this._colorManager.getHexCode("CanvasText"))}static deleteAnnotationElement(N){const Q=new Ct({id:N.parent.getNextId(),parent:N.parent,uiManager:N._uiManager});Q.annotationElementId=N.annotationElementId,Q.deleted=!0,Q._uiManager.addToAnnotationStorage(Q)}static initialize(N,Q=null){if(K._l10nPromise||(K._l10nPromise=new Map(["editor_alt_text_button_label","editor_alt_text_edit_button_label","editor_alt_text_decorative_tooltip"].map(k=>[k,N.get(k)]))),Q?.strings)for(const k of Q.strings)K._l10nPromise.set(k,N.get(k));if(K._borderLineWidth!==-1)return;const ct=getComputedStyle(document.documentElement);K._borderLineWidth=parseFloat(ct.getPropertyValue("--outline-width"))||0}static updateDefaultParams(N,Q){}static get defaultPropertiesToUpdate(){return[]}static isHandlingMimeForPasting(N){return!1}static paste(N,Q){(0,E.unreachable)("Not implemented")}get propertiesToUpdate(){return[]}get _isDraggable(){return e(this,w)}set _isDraggable(N){gt(this,w,N),this.div?.classList.toggle("draggable",N)}center(){const[N,Q]=this.pageDimensions;switch(this.parentRotation){case 90:this.x-=this.height*Q/(N*2),this.y+=this.width*N/(Q*2);break;case 180:this.x+=this.width/2,this.y+=this.height/2;break;case 270:this.x+=this.height*Q/(N*2),this.y-=this.width*N/(Q*2);break;default:this.x-=this.width/2,this.y-=this.height/2;break}this.fixAndSetPosition()}addCommands(N){this._uiManager.addCommands(N)}get currentLayer(){return this._uiManager.currentLayer}setInBackground(){this.div.style.zIndex=0}setInForeground(){this.div.style.zIndex=e(this,o)}setParent(N){N!==null&&(this.pageIndex=N.pageIndex,this.pageDimensions=N.pageDimensions),this.parent=N}focusin(N){this._focusEventsAllowed&&(e(this,g)?gt(this,g,!1):this.parent.setSelected(this))}focusout(N){!this._focusEventsAllowed||!this.isAttachedToDOM||N.relatedTarget?.closest(`#${this.id}`)||(N.preventDefault(),this.parent?.isMultipleSelection||this.commitOrRemove())}commitOrRemove(){this.isEmpty()?this.remove():this.commit()}commit(){this.addToAnnotationStorage()}addToAnnotationStorage(){this._uiManager.addToAnnotationStorage(this)}setAt(N,Q,ct,k){const[s,a]=this.parentDimensions;[ct,k]=this.screenToPageTranslation(ct,k),this.x=(N+ct)/s,this.y=(Q+k)/a,this.fixAndSetPosition()}translate(N,Q){J(this,r,Ri).call(this,this.parentDimensions,N,Q)}translateInPage(N,Q){J(this,r,Ri).call(this,this.pageDimensions,N,Q),this.div.scrollIntoView({block:"nearest"})}drag(N,Q){const[ct,k]=this.parentDimensions;if(this.x+=N/ct,this.y+=Q/k,this.parent&&(this.x<0||this.x>1||this.y<0||this.y>1)){const{x:L,y:R}=this.div.getBoundingClientRect();this.parent.findNewParent(this,L,R)&&(this.x-=Math.floor(this.x),this.y-=Math.floor(this.y))}let{x:s,y:a}=this;const[m,F]=J(this,r,Fi).call(this);s+=m,a+=F,this.div.style.left=`${(100*s).toFixed(2)}%`,this.div.style.top=`${(100*a).toFixed(2)}%`,this.div.scrollIntoView({block:"nearest"})}fixAndSetPosition(){const[N,Q]=this.pageDimensions;let{x:ct,y:k,width:s,height:a}=this;switch(s*=N,a*=Q,ct*=N,k*=Q,this.rotation){case 0:ct=Math.max(0,Math.min(N-s,ct)),k=Math.max(0,Math.min(Q-a,k));break;case 90:ct=Math.max(0,Math.min(N-a,ct)),k=Math.min(Q,Math.max(s,k));break;case 180:ct=Math.min(N,Math.max(s,ct)),k=Math.min(Q,Math.max(a,k));break;case 270:ct=Math.min(N,Math.max(a,ct)),k=Math.max(0,Math.min(Q-s,k));break}this.x=ct/=N,this.y=k/=Q;const[m,F]=J(this,r,Fi).call(this);ct+=m,k+=F;const{style:L}=this.div;L.left=`${(100*ct).toFixed(2)}%`,L.top=`${(100*k).toFixed(2)}%`,this.moveInDOM()}screenToPageTranslation(N,Q){var ct;return J(ct=K,p,Li).call(ct,N,Q,this.parentRotation)}pageTranslationToScreen(N,Q){var ct;return J(ct=K,p,Li).call(ct,N,Q,360-this.parentRotation)}get parentScale(){return this._uiManager.viewParameters.realScale}get parentRotation(){return(this._uiManager.viewParameters.rotation+this.pageRotation)%360}get parentDimensions(){const{parentScale:N,pageDimensions:[Q,ct]}=this,k=Q*N,s=ct*N;return E.FeatureTest.isCSSRoundSupported?[Math.round(k),Math.round(s)]:[k,s]}setDims(N,Q){const[ct,k]=this.parentDimensions;this.div.style.width=`${(100*N/ct).toFixed(2)}%`,e(this,y)||(this.div.style.height=`${(100*Q/k).toFixed(2)}%`),e(this,d)?.classList.toggle("small",N<K.SMALL_EDITOR_SIZE||Q<K.SMALL_EDITOR_SIZE)}fixDims(){const{style:N}=this.div,{height:Q,width:ct}=N,k=ct.endsWith("%"),s=!e(this,y)&&Q.endsWith("%");if(k&&s)return;const[a,m]=this.parentDimensions;k||(N.width=`${(100*parseFloat(ct)/a).toFixed(2)}%`),!e(this,y)&&!s&&(N.height=`${(100*parseFloat(Q)/m).toFixed(2)}%`)}getInitialTranslation(){return[0,0]}async addAltTextButton(){if(e(this,d))return;const N=gt(this,d,document.createElement("button"));N.className="altText";const Q=await K._l10nPromise.get("editor_alt_text_button_label");N.textContent=Q,N.setAttribute("aria-label",Q),N.tabIndex="0",N.addEventListener("contextmenu",t.noContextMenu),N.addEventListener("pointerdown",ct=>ct.stopPropagation()),N.addEventListener("click",ct=>{ct.preventDefault(),this._uiManager.editAltText(this)},{capture:!0}),N.addEventListener("keydown",ct=>{ct.target===N&&ct.key==="Enter"&&(ct.preventDefault(),this._uiManager.editAltText(this))}),J(this,r,Di).call(this),this.div.append(N),K.SMALL_EDITOR_SIZE||(K.SMALL_EDITOR_SIZE=Math.min(128,Math.round(N.getBoundingClientRect().width*1.4)))}getClientDimensions(){return this.div.getBoundingClientRect()}get altTextData(){return{altText:e(this,W),decorative:e(this,T)}}set altTextData({altText:N,decorative:Q}){e(this,W)===N&&e(this,T)===Q||(gt(this,W,N),gt(this,T,Q),J(this,r,Di).call(this))}render(){this.div=document.createElement("div"),this.div.setAttribute("data-editor-rotation",(360-this.rotation)%360),this.div.className=this.name,this.div.setAttribute("id",this.id),this.div.setAttribute("tabIndex",0),this.setInForeground(),this.div.addEventListener("focusin",e(this,M)),this.div.addEventListener("focusout",e(this,v));const[N,Q]=this.parentDimensions;this.parentRotation%180!==0&&(this.div.style.maxWidth=`${(100*Q/N).toFixed(2)}%`,this.div.style.maxHeight=`${(100*N/Q).toFixed(2)}%`);const[ct,k]=this.getInitialTranslation();return this.translate(ct,k),(0,l.bindEvents)(this,this.div,["pointerdown"]),this.div}pointerdown(N){const{isMac:Q}=E.FeatureTest.platform;if(N.button!==0||N.ctrlKey&&Q){N.preventDefault();return}gt(this,g,!0),J(this,r,Lr).call(this,N)}moveInDOM(){this.parent?.moveEditorInDOM(this)}_setParentAndPosition(N,Q,ct){N.changeParent(this),this.x=Q,this.y=ct,this.fixAndSetPosition()}getRect(N,Q){const ct=this.parentScale,[k,s]=this.pageDimensions,[a,m]=this.pageTranslation,F=N/ct,L=Q/ct,R=this.x*k,q=this.y*s,mt=this.width*k,At=this.height*s;switch(this.rotation){case 0:return[R+F+a,s-q-L-At+m,R+F+mt+a,s-q-L+m];case 90:return[R+L+a,s-q+F+m,R+L+At+a,s-q+F+mt+m];case 180:return[R-F-mt+a,s-q+L+m,R-F+a,s-q+L+At+m];case 270:return[R-L-At+a,s-q-F-mt+m,R-L+a,s-q-F+m];default:throw new Error("Invalid rotation")}}getRectInCurrentCoords(N,Q){const[ct,k,s,a]=N,m=s-ct,F=a-k;switch(this.rotation){case 0:return[ct,Q-a,m,F];case 90:return[ct,Q-k,F,m];case 180:return[s,Q-k,m,F];case 270:return[s,Q-a,F,m];default:throw new Error("Invalid rotation")}}onceAdded(){}isEmpty(){return!1}enableEditMode(){gt(this,O,!0)}disableEditMode(){gt(this,O,!1)}isInEditMode(){return e(this,O)}shouldGetKeyboardEvents(){return!1}needsToBeRebuilt(){return this.div&&!this.isAttachedToDOM}rebuild(){this.div?.addEventListener("focusin",e(this,M)),this.div?.addEventListener("focusout",e(this,v))}serialize(N=!1,Q=null){(0,E.unreachable)("An editor must be serializable")}static deserialize(N,Q,ct){const k=new this.prototype.constructor({parent:Q,id:Q.getNextId(),uiManager:ct});k.rotation=N.rotation;const[s,a]=k.pageDimensions,[m,F,L,R]=k.getRectInCurrentCoords(N.rect,a);return k.x=m/s,k.y=F/a,k.width=L/s,k.height=R/a,k}remove(){this.div.removeEventListener("focusin",e(this,M)),this.div.removeEventListener("focusout",e(this,v)),this.isEmpty()||this.commit(),this.parent?this.parent.remove(this):this._uiManager.removeEditor(this),e(this,d)?.remove(),gt(this,d,null),gt(this,H,null)}get isResizable(){return!1}makeResizable(){this.isResizable&&(J(this,r,Mr).call(this),e(this,b).classList.remove("hidden"))}select(){this.makeResizable(),this.div?.classList.add("selectedEditor")}unselect(){e(this,b)?.classList.add("hidden"),this.div?.classList.remove("selectedEditor"),this.div?.contains(document.activeElement)&&this._uiManager.currentLayer.div.focus()}updateParams(N,Q){}disableEditing(){e(this,d)&&(e(this,d).hidden=!0)}enableEditing(){e(this,d)&&(e(this,d).hidden=!1)}enterInEditMode(){}get contentDiv(){return this.div}get isEditing(){return e(this,A)}set isEditing(N){gt(this,A,N),this.parent&&(N?(this.parent.setSelected(this),this.parent.setActiveEditor(this)):this.parent.setActiveEditor(null))}setAspectRatio(N,Q){gt(this,y,!0);const ct=N/Q,{style:k}=this.div;k.aspectRatio=ct,k.height="auto"}static get MIN_SIZE(){return 16}};W=new WeakMap,T=new WeakMap,d=new WeakMap,H=new WeakMap,j=new WeakMap,y=new WeakMap,b=new WeakMap,M=new WeakMap,v=new WeakMap,g=new WeakMap,A=new WeakMap,O=new WeakMap,w=new WeakMap,o=new WeakMap,r=new WeakSet,Ri=function([N,Q],ct,k){[ct,k]=this.screenToPageTranslation(ct,k),this.x+=ct/N,this.y+=k/Q,this.fixAndSetPosition()},Fi=function(){const[N,Q]=this.parentDimensions,{_borderLineWidth:ct}=K,k=ct/N,s=ct/Q;switch(this.rotation){case 90:return[-k,s];case 180:return[k,s];case 270:return[k,-s];default:return[-k,-s]}},p=new WeakSet,Li=function(N,Q,ct){switch(ct){case 90:return[Q,-N];case 180:return[-N,-Q];case 270:return[-Q,N];default:return[N,Q]}},Ii=function(N){switch(N){case 90:{const[Q,ct]=this.pageDimensions;return[0,-Q/ct,ct/Q,0]}case 180:return[-1,0,0,-1];case 270:{const[Q,ct]=this.pageDimensions;return[0,Q/ct,-ct/Q,0]}default:return[1,0,0,1]}},Mr=function(){if(e(this,b))return;gt(this,b,document.createElement("div")),e(this,b).classList.add("resizers");const N=["topLeft","topRight","bottomRight","bottomLeft"];this._willKeepAspectRatio||N.push("topMiddle","middleRight","bottomMiddle","middleLeft");for(const Q of N){const ct=document.createElement("div");e(this,b).append(ct),ct.classList.add("resizer",Q),ct.addEventListener("pointerdown",J(this,r,Rr).bind(this,Q)),ct.addEventListener("contextmenu",t.noContextMenu)}this.div.prepend(e(this,b))},Rr=function(N,Q){Q.preventDefault();const{isMac:ct}=E.FeatureTest.platform;if(Q.button!==0||Q.ctrlKey&&ct)return;const k=J(this,r,Fr).bind(this,N),s=this._isDraggable;this._isDraggable=!1;const a={passive:!0,capture:!0};window.addEventListener("pointermove",k,a);const m=this.x,F=this.y,L=this.width,R=this.height,q=this.parent.div.style.cursor,mt=this.div.style.cursor;this.div.style.cursor=this.parent.div.style.cursor=window.getComputedStyle(Q.target).cursor;const At=()=>{this._isDraggable=s,window.removeEventListener("pointerup",At),window.removeEventListener("blur",At),window.removeEventListener("pointermove",k,a),this.parent.div.style.cursor=q,this.div.style.cursor=mt;const Et=this.x,Pt=this.y,Rt=this.width,Lt=this.height;Et===m&&Pt===F&&Rt===L&&Lt===R||this.addCommands({cmd:()=>{this.width=Rt,this.height=Lt,this.x=Et,this.y=Pt;const[ht,dt]=this.parentDimensions;this.setDims(ht*Rt,dt*Lt),this.fixAndSetPosition()},undo:()=>{this.width=L,this.height=R,this.x=m,this.y=F;const[ht,dt]=this.parentDimensions;this.setDims(ht*L,dt*R),this.fixAndSetPosition()},mustExec:!0})};window.addEventListener("pointerup",At),window.addEventListener("blur",At)},Fr=function(N,Q){const[ct,k]=this.parentDimensions,s=this.x,a=this.y,m=this.width,F=this.height,L=K.MIN_SIZE/ct,R=K.MIN_SIZE/k,q=Xt=>Math.round(Xt*1e4)/1e4,mt=J(this,r,Ii).call(this,this.rotation),At=(Xt,le)=>[mt[0]*Xt+mt[2]*le,mt[1]*Xt+mt[3]*le],Et=J(this,r,Ii).call(this,360-this.rotation),Pt=(Xt,le)=>[Et[0]*Xt+Et[2]*le,Et[1]*Xt+Et[3]*le];let Rt,Lt,ht=!1,dt=!1;switch(N){case"topLeft":ht=!0,Rt=(Xt,le)=>[0,0],Lt=(Xt,le)=>[Xt,le];break;case"topMiddle":Rt=(Xt,le)=>[Xt/2,0],Lt=(Xt,le)=>[Xt/2,le];break;case"topRight":ht=!0,Rt=(Xt,le)=>[Xt,0],Lt=(Xt,le)=>[0,le];break;case"middleRight":dt=!0,Rt=(Xt,le)=>[Xt,le/2],Lt=(Xt,le)=>[0,le/2];break;case"bottomRight":ht=!0,Rt=(Xt,le)=>[Xt,le],Lt=(Xt,le)=>[0,0];break;case"bottomMiddle":Rt=(Xt,le)=>[Xt/2,le],Lt=(Xt,le)=>[Xt/2,0];break;case"bottomLeft":ht=!0,Rt=(Xt,le)=>[0,le],Lt=(Xt,le)=>[Xt,0];break;case"middleLeft":dt=!0,Rt=(Xt,le)=>[0,le/2],Lt=(Xt,le)=>[Xt,le/2];break}const _=Rt(m,F),I=Lt(m,F);let tt=At(...I);const ut=q(s+tt[0]),wt=q(a+tt[1]);let Ft=1,Tt=1,[et,jt]=this.screenToPageTranslation(Q.movementX,Q.movementY);if([et,jt]=Pt(et/ct,jt/k),ht){const Xt=Math.hypot(m,F);Ft=Tt=Math.max(Math.min(Math.hypot(I[0]-_[0]-et,I[1]-_[1]-jt)/Xt,1/m,1/F),L/m,R/F)}else dt?Ft=Math.max(L,Math.min(1,Math.abs(I[0]-_[0]-et)))/m:Tt=Math.max(R,Math.min(1,Math.abs(I[1]-_[1]-jt)))/F;const Bt=q(m*Ft),he=q(F*Tt);tt=At(...Lt(Bt,he));const oe=ut-tt[0],xe=wt-tt[1];this.width=Bt,this.height=he,this.x=oe,this.y=xe,this.setDims(ct*Bt,k*he),this.fixAndSetPosition()},Di=async function(){const N=e(this,d);if(!N)return;if(!e(this,W)&&!e(this,T)){N.classList.remove("done"),e(this,H)?.remove();return}K._l10nPromise.get("editor_alt_text_edit_button_label").then(ct=>{N.setAttribute("aria-label",ct)});let Q=e(this,H);if(!Q){gt(this,H,Q=document.createElement("span")),Q.className="tooltip",Q.setAttribute("role","tooltip");const ct=Q.id=`alt-text-tooltip-${this.id}`;N.setAttribute("aria-describedby",ct);const k=100;N.addEventListener("mouseenter",()=>{gt(this,j,setTimeout(()=>{gt(this,j,null),e(this,H).classList.add("show"),this._uiManager._eventBus.dispatch("reporttelemetry",{source:this,details:{type:"editing",subtype:this.editorType,data:{action:"alt_text_tooltip"}}})},k))}),N.addEventListener("mouseleave",()=>{clearTimeout(e(this,j)),gt(this,j,null),e(this,H)?.classList.remove("show")})}N.classList.add("done"),Q.innerText=e(this,T)?await K._l10nPromise.get("editor_alt_text_decorative_tooltip"):e(this,W),Q.parentNode||N.append(Q)},Lr=function(N){if(!this._isDraggable)return;const Q=this._uiManager.isSelected(this);this._uiManager.setUpDragSession();let ct,k;Q&&(ct={passive:!0,capture:!0},k=a=>{const[m,F]=this.screenToPageTranslation(a.movementX,a.movementY);this._uiManager.dragSelectedEditors(m,F)},window.addEventListener("pointermove",k,ct));const s=()=>{if(window.removeEventListener("pointerup",s),window.removeEventListener("blur",s),Q&&window.removeEventListener("pointermove",k,ct),gt(this,g,!1),!this._uiManager.endDragSession()){const{isMac:a}=E.FeatureTest.platform;N.ctrlKey&&!a||N.shiftKey||N.metaKey&&a?this.parent.toggleSelected(this):this.parent.setSelected(this)}};window.addEventListener("pointerup",s),window.addEventListener("blur",s)},pt(K,p),$e(K,"_borderLineWidth",-1),$e(K,"_colorManager",new l.ColorManager),$e(K,"_zIndex",1),$e(K,"SMALL_EDITOR_SIZE",0);let Z=K;u.AnnotationEditor=Z;class Ct extends Z{constructor(N){super(N),this.annotationElementId=N.annotationElementId,this.deleted=!0}serialize(){return{id:this.annotationElementId,deleted:!0,pageIndex:this.pageIndex}}}}),((c,u,_t)=>{var y,b,M,v,g,Oi,w,o,r,n,S,Ir,h,P,$,bt,nt,at,K,vt,N,Q,ct,k,s,a,m,F,L,R,q,mt,At,Et,Pt,Rt,Lt,ht,dt,_,I,tt,ut,wt,Ft,Tt,et,Dr,Ni,Bi,si,ji,Hi,gn,Un,Or,Nr,Ui,Wn,Wi;Object.defineProperty(u,"__esModule",{value:!0}),u.KeyboardManager=u.CommandManager=u.ColorManager=u.AnnotationEditorUIManager=void 0,u.bindEvents=t,u.opacityToHex=Z;var l=_t(1),E=_t(6);function t(ne,B,xt){for(const Wt of xt)B.addEventListener(Wt,ne[Wt].bind(ne))}function Z(ne){return Math.round(Math.min(255,Math.max(1,255*ne))).toString(16).padStart(2,"0")}class Ct{constructor(){pt(this,y,0)}getId(){return`${l.AnnotationEditorPrefix}${Hn(this,y)._++}`}}y=new WeakMap;const O=class O{constructor(){pt(this,g);pt(this,b,(0,l.getUuid)());pt(this,M,0);pt(this,v,null)}static get _isSVGFittingCanvas(){const B='data:image/svg+xml;charset=UTF-8,<svg viewBox="0 0 1 1" width="1" height="1" xmlns="http://www.w3.org/2000/svg"><rect width="1" height="1" style="fill:red;"/></svg>',Wt=new OffscreenCanvas(1,3).getContext("2d"),Qt=new Image;Qt.src=B;const ee=Qt.decode().then(()=>(Wt.drawImage(Qt,0,0,1,1,0,0,1,3),new Uint32Array(Wt.getImageData(0,0,1,1).data.buffer)[0]===0));return(0,l.shadow)(this,"_isSVGFittingCanvas",ee)}async getFromFile(B){const{lastModified:xt,name:Wt,size:Qt,type:ee}=B;return J(this,g,Oi).call(this,`${xt}_${Wt}_${Qt}_${ee}`,B)}async getFromUrl(B){return J(this,g,Oi).call(this,B,B)}async getFromId(B){e(this,v)||gt(this,v,new Map);const xt=e(this,v).get(B);return xt?xt.bitmap?(xt.refCounter+=1,xt):xt.file?this.getFromFile(xt.file):this.getFromUrl(xt.url):null}getSvgUrl(B){const xt=e(this,v).get(B);return xt?.isSvg?xt.svgUrl:null}deleteId(B){e(this,v)||gt(this,v,new Map);const xt=e(this,v).get(B);xt&&(xt.refCounter-=1,xt.refCounter===0&&(xt.bitmap=null))}isValidId(B){return B.startsWith(`image_${e(this,b)}_`)}};b=new WeakMap,M=new WeakMap,v=new WeakMap,g=new WeakSet,Oi=async function(B,xt){e(this,v)||gt(this,v,new Map);let Wt=e(this,v).get(B);if(Wt===null)return null;if(Wt?.bitmap)return Wt.refCounter+=1,Wt;try{Wt||(Wt={bitmap:null,id:`image_${e(this,b)}_${Hn(this,M)._++}`,refCounter:0,isSvg:!1});let Qt;if(typeof xt=="string"){Wt.url=xt;const ee=await fetch(xt);if(!ee.ok)throw new Error(ee.statusText);Qt=await ee.blob()}else Qt=Wt.file=xt;if(Qt.type==="image/svg+xml"){const ee=O._isSVGFittingCanvas,Gt=new FileReader,x=new Image,C=new Promise((X,yt)=>{x.onload=()=>{Wt.bitmap=x,Wt.isSvg=!0,X()},Gt.onload=async()=>{const St=Wt.svgUrl=Gt.result;x.src=await ee?`${St}#svgView(preserveAspectRatio(none))`:St},x.onerror=Gt.onerror=yt});Gt.readAsDataURL(Qt),await C}else Wt.bitmap=await createImageBitmap(Qt);Wt.refCounter=1}catch(Qt){console.error(Qt),Wt=null}return e(this,v).set(B,Wt),Wt&&e(this,v).set(Wt.id,Wt),Wt};let W=O;class T{constructor(B=128){pt(this,w,[]);pt(this,o,!1);pt(this,r);pt(this,n,-1);gt(this,r,B)}add({cmd:B,undo:xt,mustExec:Wt,type:Qt=NaN,overwriteIfSameType:ee=!1,keepUndo:Gt=!1}){if(Wt&&B(),e(this,o))return;const x={cmd:B,undo:xt,type:Qt};if(e(this,n)===-1){e(this,w).length>0&&(e(this,w).length=0),gt(this,n,0),e(this,w).push(x);return}if(ee&&e(this,w)[e(this,n)].type===Qt){Gt&&(x.undo=e(this,w)[e(this,n)].undo),e(this,w)[e(this,n)]=x;return}const C=e(this,n)+1;C===e(this,r)?e(this,w).splice(0,1):(gt(this,n,C),C<e(this,w).length&&e(this,w).splice(C)),e(this,w).push(x)}undo(){e(this,n)!==-1&&(gt(this,o,!0),e(this,w)[e(this,n)].undo(),gt(this,o,!1),gt(this,n,e(this,n)-1))}redo(){e(this,n)<e(this,w).length-1&&(gt(this,n,e(this,n)+1),gt(this,o,!0),e(this,w)[e(this,n)].cmd(),gt(this,o,!1))}hasSomethingToUndo(){return e(this,n)!==-1}hasSomethingToRedo(){return e(this,n)<e(this,w).length-1}destroy(){gt(this,w,null)}}w=new WeakMap,o=new WeakMap,r=new WeakMap,n=new WeakMap,u.CommandManager=T;class d{constructor(B){pt(this,S);this.buffer=[],this.callbacks=new Map,this.allKeys=new Set;const{isMac:xt}=l.FeatureTest.platform;for(const[Wt,Qt,ee={}]of B)for(const Gt of Wt){const x=Gt.startsWith("mac+");xt&&x?(this.callbacks.set(Gt.slice(4),{callback:Qt,options:ee}),this.allKeys.add(Gt.split("+").at(-1))):!xt&&!x&&(this.callbacks.set(Gt,{callback:Qt,options:ee}),this.allKeys.add(Gt.split("+").at(-1)))}}exec(B,xt){if(!this.allKeys.has(xt.key))return;const Wt=this.callbacks.get(J(this,S,Ir).call(this,xt));if(!Wt)return;const{callback:Qt,options:{bubbles:ee=!1,args:Gt=[],checker:x=null}}=Wt;x&&!x(B,xt)||(Qt.bind(B,...Gt)(),ee||(xt.stopPropagation(),xt.preventDefault()))}}S=new WeakSet,Ir=function(B){B.altKey&&this.buffer.push("alt"),B.ctrlKey&&this.buffer.push("ctrl"),B.metaKey&&this.buffer.push("meta"),B.shiftKey&&this.buffer.push("shift"),this.buffer.push(B.key);const xt=this.buffer.join("+");return this.buffer.length=0,xt},u.KeyboardManager=d;const G=class G{get _colors(){const B=new Map([["CanvasText",null],["Canvas",null]]);return(0,E.getColorValues)(B),(0,l.shadow)(this,"_colors",B)}convert(B){const xt=(0,E.getRGB)(B);if(!window.matchMedia("(forced-colors: active)").matches)return xt;for(const[Wt,Qt]of this._colors)if(Qt.every((ee,Gt)=>ee===xt[Gt]))return G._colorsMapping.get(Wt);return xt}getHexCode(B){const xt=this._colors.get(B);return xt?l.Util.makeHexColor(...xt):B}};$e(G,"_colorsMapping",new Map([["CanvasText",[0,0,0]],["Canvas",[255,255,255]]]));let H=G;u.ColorManager=H;const Jt=class Jt{constructor(B,xt,Wt,Qt,ee,Gt){pt(this,et);pt(this,h,null);pt(this,P,new Map);pt(this,$,new Map);pt(this,bt,null);pt(this,nt,null);pt(this,at,new T);pt(this,K,0);pt(this,vt,new Set);pt(this,N,null);pt(this,Q,null);pt(this,ct,new Set);pt(this,k,null);pt(this,s,new Ct);pt(this,a,!1);pt(this,m,!1);pt(this,F,null);pt(this,L,l.AnnotationEditorType.NONE);pt(this,R,new Set);pt(this,q,null);pt(this,mt,this.blur.bind(this));pt(this,At,this.focus.bind(this));pt(this,Et,this.copy.bind(this));pt(this,Pt,this.cut.bind(this));pt(this,Rt,this.paste.bind(this));pt(this,Lt,this.keydown.bind(this));pt(this,ht,this.onEditingAction.bind(this));pt(this,dt,this.onPageChanging.bind(this));pt(this,_,this.onScaleChanging.bind(this));pt(this,I,this.onRotationChanging.bind(this));pt(this,tt,{isEditing:!1,isEmpty:!0,hasSomethingToUndo:!1,hasSomethingToRedo:!1,hasSelectedEditor:!1});pt(this,ut,[0,0]);pt(this,wt,null);pt(this,Ft,null);pt(this,Tt,null);gt(this,Ft,B),gt(this,Tt,xt),gt(this,bt,Wt),this._eventBus=Qt,this._eventBus._on("editingaction",e(this,ht)),this._eventBus._on("pagechanging",e(this,dt)),this._eventBus._on("scalechanging",e(this,_)),this._eventBus._on("rotationchanging",e(this,I)),gt(this,nt,ee.annotationStorage),gt(this,k,ee.filterFactory),gt(this,q,Gt),this.viewParameters={realScale:E.PixelsPerInch.PDF_TO_CSS_UNITS,rotation:0}}static get _keyboardManager(){const B=Jt.prototype,xt=ee=>{const{activeElement:Gt}=document;return Gt&&e(ee,Ft).contains(Gt)&&ee.hasSomethingToControl()},Wt=this.TRANSLATE_SMALL,Qt=this.TRANSLATE_BIG;return(0,l.shadow)(this,"_keyboardManager",new d([[["ctrl+a","mac+meta+a"],B.selectAll],[["ctrl+z","mac+meta+z"],B.undo],[["ctrl+y","ctrl+shift+z","mac+meta+shift+z","ctrl+shift+Z","mac+meta+shift+Z"],B.redo],[["Backspace","alt+Backspace","ctrl+Backspace","shift+Backspace","mac+Backspace","mac+alt+Backspace","mac+ctrl+Backspace","Delete","ctrl+Delete","shift+Delete","mac+Delete"],B.delete],[["Escape","mac+Escape"],B.unselectAll],[["ArrowLeft","mac+ArrowLeft"],B.translateSelectedEditors,{args:[-Wt,0],checker:xt}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],B.translateSelectedEditors,{args:[-Qt,0],checker:xt}],[["ArrowRight","mac+ArrowRight"],B.translateSelectedEditors,{args:[Wt,0],checker:xt}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],B.translateSelectedEditors,{args:[Qt,0],checker:xt}],[["ArrowUp","mac+ArrowUp"],B.translateSelectedEditors,{args:[0,-Wt],checker:xt}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],B.translateSelectedEditors,{args:[0,-Qt],checker:xt}],[["ArrowDown","mac+ArrowDown"],B.translateSelectedEditors,{args:[0,Wt],checker:xt}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],B.translateSelectedEditors,{args:[0,Qt],checker:xt}]]))}destroy(){J(this,et,si).call(this),J(this,et,Ni).call(this),this._eventBus._off("editingaction",e(this,ht)),this._eventBus._off("pagechanging",e(this,dt)),this._eventBus._off("scalechanging",e(this,_)),this._eventBus._off("rotationchanging",e(this,I));for(const B of e(this,$).values())B.destroy();e(this,$).clear(),e(this,P).clear(),e(this,ct).clear(),gt(this,h,null),e(this,R).clear(),e(this,at).destroy(),e(this,bt).destroy()}get hcmFilter(){return(0,l.shadow)(this,"hcmFilter",e(this,q)?e(this,k).addHCMFilter(e(this,q).foreground,e(this,q).background):"none")}get direction(){return(0,l.shadow)(this,"direction",getComputedStyle(e(this,Ft)).direction)}editAltText(B){e(this,bt)?.editAltText(this,B)}onPageChanging({pageNumber:B}){gt(this,K,B-1)}focusMainContainer(){e(this,Ft).focus()}findParent(B,xt){for(const Wt of e(this,$).values()){const{x:Qt,y:ee,width:Gt,height:x}=Wt.div.getBoundingClientRect();if(B>=Qt&&B<=Qt+Gt&&xt>=ee&&xt<=ee+x)return Wt}return null}disableUserSelect(B=!1){e(this,Tt).classList.toggle("noUserSelect",B)}addShouldRescale(B){e(this,ct).add(B)}removeShouldRescale(B){e(this,ct).delete(B)}onScaleChanging({scale:B}){this.commitOrRemove(),this.viewParameters.realScale=B*E.PixelsPerInch.PDF_TO_CSS_UNITS;for(const xt of e(this,ct))xt.onScaleChanging()}onRotationChanging({pagesRotation:B}){this.commitOrRemove(),this.viewParameters.rotation=B}addToAnnotationStorage(B){!B.isEmpty()&&e(this,nt)&&!e(this,nt).has(B.id)&&e(this,nt).setValue(B.id,B)}blur(){if(!this.hasSelection)return;const{activeElement:B}=document;for(const xt of e(this,R))if(xt.div.contains(B)){gt(this,F,[xt,B]),xt._focusEventsAllowed=!1;break}}focus(){if(!e(this,F))return;const[B,xt]=e(this,F);gt(this,F,null),xt.addEventListener("focusin",()=>{B._focusEventsAllowed=!0},{once:!0}),xt.focus()}addEditListeners(){J(this,et,Bi).call(this),J(this,et,ji).call(this)}removeEditListeners(){J(this,et,si).call(this),J(this,et,Hi).call(this)}copy(B){if(B.preventDefault(),e(this,h)?.commitOrRemove(),!this.hasSelection)return;const xt=[];for(const Wt of e(this,R)){const Qt=Wt.serialize(!0);Qt&&xt.push(Qt)}xt.length!==0&&B.clipboardData.setData("application/pdfjs",JSON.stringify(xt))}cut(B){this.copy(B),this.delete()}paste(B){B.preventDefault();const{clipboardData:xt}=B;for(const ee of xt.items)for(const Gt of e(this,Q))if(Gt.isHandlingMimeForPasting(ee.type)){Gt.paste(ee,this.currentLayer);return}let Wt=xt.getData("application/pdfjs");if(!Wt)return;try{Wt=JSON.parse(Wt)}catch(ee){(0,l.warn)(`paste: "${ee.message}".`);return}if(!Array.isArray(Wt))return;this.unselectAll();const Qt=this.currentLayer;try{const ee=[];for(const C of Wt){const X=Qt.deserialize(C);if(!X)return;ee.push(X)}const Gt=()=>{for(const C of ee)J(this,et,Ui).call(this,C);J(this,et,Wi).call(this,ee)},x=()=>{for(const C of ee)C.remove()};this.addCommands({cmd:Gt,undo:x,mustExec:!0})}catch(ee){(0,l.warn)(`paste: "${ee.message}".`)}}keydown(B){this.getActive()?.shouldGetKeyboardEvents()||Jt._keyboardManager.exec(this,B)}onEditingAction(B){["undo","redo","delete","selectAll"].includes(B.name)&&this[B.name]()}setEditingState(B){B?(J(this,et,Dr).call(this),J(this,et,Bi).call(this),J(this,et,ji).call(this),J(this,et,gn).call(this,{isEditing:e(this,L)!==l.AnnotationEditorType.NONE,isEmpty:J(this,et,Wn).call(this),hasSomethingToUndo:e(this,at).hasSomethingToUndo(),hasSomethingToRedo:e(this,at).hasSomethingToRedo(),hasSelectedEditor:!1})):(J(this,et,Ni).call(this),J(this,et,si).call(this),J(this,et,Hi).call(this),J(this,et,gn).call(this,{isEditing:!1}),this.disableUserSelect(!1))}registerEditorTypes(B){if(!e(this,Q)){gt(this,Q,B);for(const xt of e(this,Q))J(this,et,Un).call(this,xt.defaultPropertiesToUpdate)}}getId(){return e(this,s).getId()}get currentLayer(){return e(this,$).get(e(this,K))}getLayer(B){return e(this,$).get(B)}get currentPageIndex(){return e(this,K)}addLayer(B){e(this,$).set(B.pageIndex,B),e(this,a)?B.enable():B.disable()}removeLayer(B){e(this,$).delete(B.pageIndex)}updateMode(B,xt=null){if(e(this,L)!==B){if(gt(this,L,B),B===l.AnnotationEditorType.NONE){this.setEditingState(!1),J(this,et,Nr).call(this);return}this.setEditingState(!0),J(this,et,Or).call(this),this.unselectAll();for(const Wt of e(this,$).values())Wt.updateMode(B);if(xt){for(const Wt of e(this,P).values())if(Wt.annotationElementId===xt){this.setSelected(Wt),Wt.enterInEditMode();break}}}}updateToolbar(B){B!==e(this,L)&&this._eventBus.dispatch("switchannotationeditormode",{source:this,mode:B})}updateParams(B,xt){if(e(this,Q)){if(B===l.AnnotationEditorParamsType.CREATE){this.currentLayer.addNewEditor(B);return}for(const Wt of e(this,R))Wt.updateParams(B,xt);for(const Wt of e(this,Q))Wt.updateDefaultParams(B,xt)}}enableWaiting(B=!1){if(e(this,m)!==B){gt(this,m,B);for(const xt of e(this,$).values())B?xt.disableClick():xt.enableClick(),xt.div.classList.toggle("waiting",B)}}getEditors(B){const xt=[];for(const Wt of e(this,P).values())Wt.pageIndex===B&&xt.push(Wt);return xt}getEditor(B){return e(this,P).get(B)}addEditor(B){e(this,P).set(B.id,B)}removeEditor(B){e(this,P).delete(B.id),this.unselect(B),(!B.annotationElementId||!e(this,vt).has(B.annotationElementId))&&e(this,nt)?.remove(B.id)}addDeletedAnnotationElement(B){e(this,vt).add(B.annotationElementId),B.deleted=!0}isDeletedAnnotationElement(B){return e(this,vt).has(B)}removeDeletedAnnotationElement(B){e(this,vt).delete(B.annotationElementId),B.deleted=!1}setActiveEditor(B){e(this,h)!==B&&(gt(this,h,B),B&&J(this,et,Un).call(this,B.propertiesToUpdate))}toggleSelected(B){if(e(this,R).has(B)){e(this,R).delete(B),B.unselect(),J(this,et,gn).call(this,{hasSelectedEditor:this.hasSelection});return}e(this,R).add(B),B.select(),J(this,et,Un).call(this,B.propertiesToUpdate),J(this,et,gn).call(this,{hasSelectedEditor:!0})}setSelected(B){for(const xt of e(this,R))xt!==B&&xt.unselect();e(this,R).clear(),e(this,R).add(B),B.select(),J(this,et,Un).call(this,B.propertiesToUpdate),J(this,et,gn).call(this,{hasSelectedEditor:!0})}isSelected(B){return e(this,R).has(B)}unselect(B){B.unselect(),e(this,R).delete(B),J(this,et,gn).call(this,{hasSelectedEditor:this.hasSelection})}get hasSelection(){return e(this,R).size!==0}undo(){e(this,at).undo(),J(this,et,gn).call(this,{hasSomethingToUndo:e(this,at).hasSomethingToUndo(),hasSomethingToRedo:!0,isEmpty:J(this,et,Wn).call(this)})}redo(){e(this,at).redo(),J(this,et,gn).call(this,{hasSomethingToUndo:!0,hasSomethingToRedo:e(this,at).hasSomethingToRedo(),isEmpty:J(this,et,Wn).call(this)})}addCommands(B){e(this,at).add(B),J(this,et,gn).call(this,{hasSomethingToUndo:!0,hasSomethingToRedo:!1,isEmpty:J(this,et,Wn).call(this)})}delete(){if(this.commitOrRemove(),!this.hasSelection)return;const B=[...e(this,R)],xt=()=>{for(const Qt of B)Qt.remove()},Wt=()=>{for(const Qt of B)J(this,et,Ui).call(this,Qt)};this.addCommands({cmd:xt,undo:Wt,mustExec:!0})}commitOrRemove(){e(this,h)?.commitOrRemove()}hasSomethingToControl(){return e(this,h)||this.hasSelection}selectAll(){for(const B of e(this,R))B.commit();J(this,et,Wi).call(this,e(this,P).values())}unselectAll(){if(e(this,h)){e(this,h).commitOrRemove();return}if(this.hasSelection){for(const B of e(this,R))B.unselect();e(this,R).clear(),J(this,et,gn).call(this,{hasSelectedEditor:!1})}}translateSelectedEditors(B,xt,Wt=!1){if(Wt||this.commitOrRemove(),!this.hasSelection)return;e(this,ut)[0]+=B,e(this,ut)[1]+=xt;const[Qt,ee]=e(this,ut),Gt=[...e(this,R)],x=1e3;e(this,wt)&&clearTimeout(e(this,wt)),gt(this,wt,setTimeout(()=>{gt(this,wt,null),e(this,ut)[0]=e(this,ut)[1]=0,this.addCommands({cmd:()=>{for(const C of Gt)e(this,P).has(C.id)&&C.translateInPage(Qt,ee)},undo:()=>{for(const C of Gt)e(this,P).has(C.id)&&C.translateInPage(-Qt,-ee)},mustExec:!1})},x));for(const C of Gt)C.translateInPage(B,xt)}setUpDragSession(){if(this.hasSelection){this.disableUserSelect(!0),gt(this,N,new Map);for(const B of e(this,R))e(this,N).set(B,{savedX:B.x,savedY:B.y,savedPageIndex:B.pageIndex,newX:0,newY:0,newPageIndex:-1})}}endDragSession(){if(!e(this,N))return!1;this.disableUserSelect(!1);const B=e(this,N);gt(this,N,null);let xt=!1;for(const[{x:Qt,y:ee,pageIndex:Gt},x]of B)x.newX=Qt,x.newY=ee,x.newPageIndex=Gt,xt||(xt=Qt!==x.savedX||ee!==x.savedY||Gt!==x.savedPageIndex);if(!xt)return!1;const Wt=(Qt,ee,Gt,x)=>{if(e(this,P).has(Qt.id)){const C=e(this,$).get(x);C?Qt._setParentAndPosition(C,ee,Gt):(Qt.pageIndex=x,Qt.x=ee,Qt.y=Gt)}};return this.addCommands({cmd:()=>{for(const[Qt,{newX:ee,newY:Gt,newPageIndex:x}]of B)Wt(Qt,ee,Gt,x)},undo:()=>{for(const[Qt,{savedX:ee,savedY:Gt,savedPageIndex:x}]of B)Wt(Qt,ee,Gt,x)},mustExec:!0}),!0}dragSelectedEditors(B,xt){if(e(this,N))for(const Wt of e(this,N).keys())Wt.drag(B,xt)}rebuild(B){if(B.parent===null){const xt=this.getLayer(B.pageIndex);xt?(xt.changeParent(B),xt.addOrRebuild(B)):(this.addEditor(B),this.addToAnnotationStorage(B),B.rebuild())}else B.parent.addOrRebuild(B)}isActive(B){return e(this,h)===B}getActive(){return e(this,h)}getMode(){return e(this,L)}get imageManager(){return(0,l.shadow)(this,"imageManager",new W)}};h=new WeakMap,P=new WeakMap,$=new WeakMap,bt=new WeakMap,nt=new WeakMap,at=new WeakMap,K=new WeakMap,vt=new WeakMap,N=new WeakMap,Q=new WeakMap,ct=new WeakMap,k=new WeakMap,s=new WeakMap,a=new WeakMap,m=new WeakMap,F=new WeakMap,L=new WeakMap,R=new WeakMap,q=new WeakMap,mt=new WeakMap,At=new WeakMap,Et=new WeakMap,Pt=new WeakMap,Rt=new WeakMap,Lt=new WeakMap,ht=new WeakMap,dt=new WeakMap,_=new WeakMap,I=new WeakMap,tt=new WeakMap,ut=new WeakMap,wt=new WeakMap,Ft=new WeakMap,Tt=new WeakMap,et=new WeakSet,Dr=function(){window.addEventListener("focus",e(this,At)),window.addEventListener("blur",e(this,mt))},Ni=function(){window.removeEventListener("focus",e(this,At)),window.removeEventListener("blur",e(this,mt))},Bi=function(){window.addEventListener("keydown",e(this,Lt),{capture:!0})},si=function(){window.removeEventListener("keydown",e(this,Lt),{capture:!0})},ji=function(){document.addEventListener("copy",e(this,Et)),document.addEventListener("cut",e(this,Pt)),document.addEventListener("paste",e(this,Rt))},Hi=function(){document.removeEventListener("copy",e(this,Et)),document.removeEventListener("cut",e(this,Pt)),document.removeEventListener("paste",e(this,Rt))},gn=function(B){Object.entries(B).some(([Wt,Qt])=>e(this,tt)[Wt]!==Qt)&&this._eventBus.dispatch("annotationeditorstateschanged",{source:this,details:Object.assign(e(this,tt),B)})},Un=function(B){this._eventBus.dispatch("annotationeditorparamschanged",{source:this,details:B})},Or=function(){if(!e(this,a)){gt(this,a,!0);for(const B of e(this,$).values())B.enable()}},Nr=function(){if(this.unselectAll(),e(this,a)){gt(this,a,!1);for(const B of e(this,$).values())B.disable()}},Ui=function(B){const xt=e(this,$).get(B.pageIndex);xt?xt.addOrRebuild(B):this.addEditor(B)},Wn=function(){if(e(this,P).size===0)return!0;if(e(this,P).size===1)for(const B of e(this,P).values())return B.isEmpty();return!1},Wi=function(B){e(this,R).clear();for(const xt of B)xt.isEmpty()||(e(this,R).add(xt),xt.select());J(this,et,gn).call(this,{hasSelectedEditor:!0})},$e(Jt,"TRANSLATE_SMALL",1),$e(Jt,"TRANSLATE_BIG",10);let j=Jt;u.AnnotationEditorUIManager=j}),((c,u,_t)=>{var K,vt,N,Q,ct,k,s,a,m,F,L,R,In,Dn,zi,ai,oi,zn,Vn;Object.defineProperty(u,"__esModule",{value:!0}),u.StatTimer=u.RenderingCancelledException=u.PixelsPerInch=u.PageViewport=u.PDFDateString=u.DOMStandardFontDataFactory=u.DOMSVGFactory=u.DOMFilterFactory=u.DOMCanvasFactory=u.DOMCMapReaderFactory=void 0,u.deprecated=n,u.getColorValues=P,u.getCurrentTransform=$,u.getCurrentTransformInverse=bt,u.getFilenameFromUrl=g,u.getPdfFilenameFromUrl=A,u.getRGB=h,u.getXfaPageViewport=G,u.isDataScheme=M,u.isPdfFile=v,u.isValidFetchUrl=w,u.loadScript=r,u.noContextMenu=o,u.setLayerDimensions=nt;var l=_t(7),E=_t(1);const t="http://www.w3.org/2000/svg",at=class at{};$e(at,"CSS",96),$e(at,"PDF",72),$e(at,"PDF_TO_CSS_UNITS",at.CSS/at.PDF);let Z=at;u.PixelsPerInch=Z;class Ct extends l.BaseFilterFactory{constructor({docId:_,ownerDocument:I=globalThis.document}={}){super();pt(this,R);pt(this,K);pt(this,vt);pt(this,N);pt(this,Q);pt(this,ct);pt(this,k);pt(this,s);pt(this,a);pt(this,m);pt(this,F);pt(this,L,0);gt(this,N,_),gt(this,Q,I)}addFilter(_){if(!_)return"none";let I=e(this,R,In).get(_);if(I)return I;let tt,ut,wt,Ft;if(_.length===1){const Bt=_[0],he=new Array(256);for(let oe=0;oe<256;oe++)he[oe]=Bt[oe]/255;Ft=tt=ut=wt=he.join(",")}else{const[Bt,he,oe]=_,xe=new Array(256),Xt=new Array(256),le=new Array(256);for(let _e=0;_e<256;_e++)xe[_e]=Bt[_e]/255,Xt[_e]=he[_e]/255,le[_e]=oe[_e]/255;tt=xe.join(","),ut=Xt.join(","),wt=le.join(","),Ft=`${tt}${ut}${wt}`}if(I=e(this,R,In).get(Ft),I)return e(this,R,In).set(_,I),I;const Tt=`g_${e(this,N)}_transfer_map_${Hn(this,L)._++}`,et=`url(#${Tt})`;e(this,R,In).set(_,et),e(this,R,In).set(Ft,et);const jt=J(this,R,ai).call(this,Tt);return J(this,R,zn).call(this,tt,ut,wt,jt),et}addHCMFilter(_,I){const tt=`${_}-${I}`;if(e(this,k)===tt)return e(this,s);if(gt(this,k,tt),gt(this,s,"none"),e(this,ct)?.remove(),!_||!I)return e(this,s);const ut=J(this,R,Vn).call(this,_);_=E.Util.makeHexColor(...ut);const wt=J(this,R,Vn).call(this,I);if(I=E.Util.makeHexColor(...wt),e(this,R,Dn).style.color="",_==="#000000"&&I==="#ffffff"||_===I)return e(this,s);const Ft=new Array(256);for(let he=0;he<=255;he++){const oe=he/255;Ft[he]=oe<=.03928?oe/12.92:((oe+.055)/1.055)**2.4}const Tt=Ft.join(","),et=`g_${e(this,N)}_hcm_filter`,jt=gt(this,a,J(this,R,ai).call(this,et));J(this,R,zn).call(this,Tt,Tt,Tt,jt),J(this,R,zi).call(this,jt);const Bt=(he,oe)=>{const xe=ut[he]/255,Xt=wt[he]/255,le=new Array(oe+1);for(let _e=0;_e<=oe;_e++)le[_e]=xe+_e/oe*(Xt-xe);return le.join(",")};return J(this,R,zn).call(this,Bt(0,5),Bt(1,5),Bt(2,5),jt),gt(this,s,`url(#${et})`),e(this,s)}addHighlightHCMFilter(_,I,tt,ut){const wt=`${_}-${I}-${tt}-${ut}`;if(e(this,m)===wt)return e(this,F);if(gt(this,m,wt),gt(this,F,"none"),e(this,a)?.remove(),!_||!I)return e(this,F);const[Ft,Tt]=[_,I].map(J(this,R,Vn).bind(this));let et=Math.round(.2126*Ft[0]+.7152*Ft[1]+.0722*Ft[2]),jt=Math.round(.2126*Tt[0]+.7152*Tt[1]+.0722*Tt[2]),[Bt,he]=[tt,ut].map(J(this,R,Vn).bind(this));jt<et&&([et,jt,Bt,he]=[jt,et,he,Bt]),e(this,R,Dn).style.color="";const oe=(le,_e,Le)=>{const Mt=new Array(256),ot=(jt-et)/Le,st=le/255,Yt=(_e-le)/(255*Le);let Jt=0;for(let ne=0;ne<=Le;ne++){const B=Math.round(et+ne*ot),xt=st+ne*Yt;for(let Wt=Jt;Wt<=B;Wt++)Mt[Wt]=xt;Jt=B+1}for(let ne=Jt;ne<256;ne++)Mt[ne]=Mt[Jt-1];return Mt.join(",")},xe=`g_${e(this,N)}_hcm_highlight_filter`,Xt=gt(this,a,J(this,R,ai).call(this,xe));return J(this,R,zi).call(this,Xt),J(this,R,zn).call(this,oe(Bt[0],he[0],5),oe(Bt[1],he[1],5),oe(Bt[2],he[2],5),Xt),gt(this,F,`url(#${xe})`),e(this,F)}destroy(_=!1){_&&(e(this,s)||e(this,F))||(e(this,vt)&&(e(this,vt).parentNode.parentNode.remove(),gt(this,vt,null)),e(this,K)&&(e(this,K).clear(),gt(this,K,null)),gt(this,L,0))}}K=new WeakMap,vt=new WeakMap,N=new WeakMap,Q=new WeakMap,ct=new WeakMap,k=new WeakMap,s=new WeakMap,a=new WeakMap,m=new WeakMap,F=new WeakMap,L=new WeakMap,R=new WeakSet,In=function(){return e(this,K)||gt(this,K,new Map)},Dn=function(){if(!e(this,vt)){const _=e(this,Q).createElement("div"),{style:I}=_;I.visibility="hidden",I.contain="strict",I.width=I.height=0,I.position="absolute",I.top=I.left=0,I.zIndex=-1;const tt=e(this,Q).createElementNS(t,"svg");tt.setAttribute("width",0),tt.setAttribute("height",0),gt(this,vt,e(this,Q).createElementNS(t,"defs")),_.append(tt),tt.append(e(this,vt)),e(this,Q).body.append(_)}return e(this,vt)},zi=function(_){const I=e(this,Q).createElementNS(t,"feColorMatrix");I.setAttribute("type","matrix"),I.setAttribute("values","0.2126 0.7152 0.0722 0 0 0.2126 0.7152 0.0722 0 0 0.2126 0.7152 0.0722 0 0 0 0 0 1 0"),_.append(I)},ai=function(_){const I=e(this,Q).createElementNS(t,"filter");return I.setAttribute("color-interpolation-filters","sRGB"),I.setAttribute("id",_),e(this,R,Dn).append(I),I},oi=function(_,I,tt){const ut=e(this,Q).createElementNS(t,I);ut.setAttribute("type","discrete"),ut.setAttribute("tableValues",tt),_.append(ut)},zn=function(_,I,tt,ut){const wt=e(this,Q).createElementNS(t,"feComponentTransfer");ut.append(wt),J(this,R,oi).call(this,wt,"feFuncR",_),J(this,R,oi).call(this,wt,"feFuncG",I),J(this,R,oi).call(this,wt,"feFuncB",tt)},Vn=function(_){return e(this,R,Dn).style.color=_,h(getComputedStyle(e(this,R,Dn)).getPropertyValue("color"))},u.DOMFilterFactory=Ct;class W extends l.BaseCanvasFactory{constructor({ownerDocument:dt=globalThis.document}={}){super(),this._document=dt}_createCanvas(dt,_){const I=this._document.createElement("canvas");return I.width=dt,I.height=_,I}}u.DOMCanvasFactory=W;async function T(ht,dt=!1){if(w(ht,document.baseURI)){const _=await fetch(ht);if(!_.ok)throw new Error(_.statusText);return dt?new Uint8Array(await _.arrayBuffer()):(0,E.stringToBytes)(await _.text())}return new Promise((_,I)=>{const tt=new XMLHttpRequest;tt.open("GET",ht,!0),dt&&(tt.responseType="arraybuffer"),tt.onreadystatechange=()=>{if(tt.readyState===XMLHttpRequest.DONE){if(tt.status===200||tt.status===0){let ut;if(dt&&tt.response?ut=new Uint8Array(tt.response):!dt&&tt.responseText&&(ut=(0,E.stringToBytes)(tt.responseText)),ut){_(ut);return}}I(new Error(tt.statusText))}},tt.send(null)})}class d extends l.BaseCMapReaderFactory{_fetchData(dt,_){return T(dt,this.isCompressed).then(I=>({cMapData:I,compressionType:_}))}}u.DOMCMapReaderFactory=d;class H extends l.BaseStandardFontDataFactory{_fetchData(dt){return T(dt,!0)}}u.DOMStandardFontDataFactory=H;class j extends l.BaseSVGFactory{_createSVG(dt){return document.createElementNS(t,dt)}}u.DOMSVGFactory=j;class y{constructor({viewBox:dt,scale:_,rotation:I,offsetX:tt=0,offsetY:ut=0,dontFlip:wt=!1}){this.viewBox=dt,this.scale=_,this.rotation=I,this.offsetX=tt,this.offsetY=ut;const Ft=(dt[2]+dt[0])/2,Tt=(dt[3]+dt[1])/2;let et,jt,Bt,he;switch(I%=360,I<0&&(I+=360),I){case 180:et=-1,jt=0,Bt=0,he=1;break;case 90:et=0,jt=1,Bt=1,he=0;break;case 270:et=0,jt=-1,Bt=-1,he=0;break;case 0:et=1,jt=0,Bt=0,he=-1;break;default:throw new Error("PageViewport: Invalid rotation, must be a multiple of 90 degrees.")}wt&&(Bt=-Bt,he=-he);let oe,xe,Xt,le;et===0?(oe=Math.abs(Tt-dt[1])*_+tt,xe=Math.abs(Ft-dt[0])*_+ut,Xt=(dt[3]-dt[1])*_,le=(dt[2]-dt[0])*_):(oe=Math.abs(Ft-dt[0])*_+tt,xe=Math.abs(Tt-dt[1])*_+ut,Xt=(dt[2]-dt[0])*_,le=(dt[3]-dt[1])*_),this.transform=[et*_,jt*_,Bt*_,he*_,oe-et*_*Ft-Bt*_*Tt,xe-jt*_*Ft-he*_*Tt],this.width=Xt,this.height=le}get rawDims(){const{viewBox:dt}=this;return(0,E.shadow)(this,"rawDims",{pageWidth:dt[2]-dt[0],pageHeight:dt[3]-dt[1],pageX:dt[0],pageY:dt[1]})}clone({scale:dt=this.scale,rotation:_=this.rotation,offsetX:I=this.offsetX,offsetY:tt=this.offsetY,dontFlip:ut=!1}={}){return new y({viewBox:this.viewBox.slice(),scale:dt,rotation:_,offsetX:I,offsetY:tt,dontFlip:ut})}convertToViewportPoint(dt,_){return E.Util.applyTransform([dt,_],this.transform)}convertToViewportRectangle(dt){const _=E.Util.applyTransform([dt[0],dt[1]],this.transform),I=E.Util.applyTransform([dt[2],dt[3]],this.transform);return[_[0],_[1],I[0],I[1]]}convertToPdfPoint(dt,_){return E.Util.applyInverseTransform([dt,_],this.transform)}}u.PageViewport=y;class b extends E.BaseException{constructor(dt,_=0){super(dt,"RenderingCancelledException"),this.extraDelay=_}}u.RenderingCancelledException=b;function M(ht){const dt=ht.length;let _=0;for(;_<dt&&ht[_].trim()==="";)_++;return ht.substring(_,_+5).toLowerCase()==="data:"}function v(ht){return typeof ht=="string"&&/\.pdf$/i.test(ht)}function g(ht,dt=!1){return dt||([ht]=ht.split(/[#?]/,1)),ht.substring(ht.lastIndexOf("/")+1)}function A(ht,dt="document.pdf"){if(typeof ht!="string")return dt;if(M(ht))return(0,E.warn)('getPdfFilenameFromUrl: ignore "data:"-URL for performance reasons.'),dt;const _=/^(?:(?:[^:]+:)?\/\/[^/]+)?([^?#]*)(\?[^#]*)?(#.*)?$/,I=/[^/?#=]+\.pdf\b(?!.*\.pdf\b)/i,tt=_.exec(ht);let ut=I.exec(tt[1])||I.exec(tt[2])||I.exec(tt[3]);if(ut&&(ut=ut[0],ut.includes("%")))try{ut=I.exec(decodeURIComponent(ut))[0]}catch{}return ut||dt}class O{constructor(){$e(this,"started",Object.create(null));$e(this,"times",[])}time(dt){dt in this.started&&(0,E.warn)(`Timer is already running for ${dt}`),this.started[dt]=Date.now()}timeEnd(dt){dt in this.started||(0,E.warn)(`Timer has not been started for ${dt}`),this.times.push({name:dt,start:this.started[dt],end:Date.now()}),delete this.started[dt]}toString(){const dt=[];let _=0;for(const{name:I}of this.times)_=Math.max(I.length,_);for(const{name:I,start:tt,end:ut}of this.times)dt.push(`${I.padEnd(_)} ${ut-tt}ms
`);return dt.join("")}}u.StatTimer=O;function w(ht,dt){try{const{protocol:_}=dt?new URL(ht,dt):new URL(ht);return _==="http:"||_==="https:"}catch{return!1}}function o(ht){ht.preventDefault()}function r(ht,dt=!1){return new Promise((_,I)=>{const tt=document.createElement("script");tt.src=ht,tt.onload=function(ut){dt&&tt.remove(),_(ut)},tt.onerror=function(){I(new Error(`Cannot load script at: ${tt.src}`))},(document.head||document.documentElement).append(tt)})}function n(ht){console.log("Deprecated API usage: "+ht)}let S;class p{static toDateObject(dt){if(!dt||typeof dt!="string")return null;S||(S=new RegExp("^D:(\\d{4})(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?([Z|+|-])?(\\d{2})?'?(\\d{2})?'?"));const _=S.exec(dt);if(!_)return null;const I=parseInt(_[1],10);let tt=parseInt(_[2],10);tt=tt>=1&&tt<=12?tt-1:0;let ut=parseInt(_[3],10);ut=ut>=1&&ut<=31?ut:1;let wt=parseInt(_[4],10);wt=wt>=0&&wt<=23?wt:0;let Ft=parseInt(_[5],10);Ft=Ft>=0&&Ft<=59?Ft:0;let Tt=parseInt(_[6],10);Tt=Tt>=0&&Tt<=59?Tt:0;const et=_[7]||"Z";let jt=parseInt(_[8],10);jt=jt>=0&&jt<=23?jt:0;let Bt=parseInt(_[9],10)||0;return Bt=Bt>=0&&Bt<=59?Bt:0,et==="-"?(wt+=jt,Ft+=Bt):et==="+"&&(wt-=jt,Ft-=Bt),new Date(Date.UTC(I,tt,ut,wt,Ft,Tt))}}u.PDFDateString=p;function G(ht,{scale:dt=1,rotation:_=0}){const{width:I,height:tt}=ht.attributes.style,ut=[0,0,parseInt(I),parseInt(tt)];return new y({viewBox:ut,scale:dt,rotation:_})}function h(ht){if(ht.startsWith("#")){const dt=parseInt(ht.slice(1),16);return[(dt&16711680)>>16,(dt&65280)>>8,dt&255]}return ht.startsWith("rgb(")?ht.slice(4,-1).split(",").map(dt=>parseInt(dt)):ht.startsWith("rgba(")?ht.slice(5,-1).split(",").map(dt=>parseInt(dt)).slice(0,3):((0,E.warn)(`Not a valid color format: "${ht}"`),[0,0,0])}function P(ht){const dt=document.createElement("span");dt.style.visibility="hidden",document.body.append(dt);for(const _ of ht.keys()){dt.style.color=_;const I=window.getComputedStyle(dt).color;ht.set(_,h(I))}dt.remove()}function $(ht){const{a:dt,b:_,c:I,d:tt,e:ut,f:wt}=ht.getTransform();return[dt,_,I,tt,ut,wt]}function bt(ht){const{a:dt,b:_,c:I,d:tt,e:ut,f:wt}=ht.getTransform().invertSelf();return[dt,_,I,tt,ut,wt]}function nt(ht,dt,_=!1,I=!0){if(dt instanceof y){const{pageWidth:tt,pageHeight:ut}=dt.rawDims,{style:wt}=ht,Ft=E.FeatureTest.isCSSRoundSupported,Tt=`var(--scale-factor) * ${tt}px`,et=`var(--scale-factor) * ${ut}px`,jt=Ft?`round(${Tt}, 1px)`:`calc(${Tt})`,Bt=Ft?`round(${et}, 1px)`:`calc(${et})`;!_||dt.rotation%180===0?(wt.width=jt,wt.height=Bt):(wt.width=Bt,wt.height=jt)}I&&ht.setAttribute("data-main-rotation",dt.rotation)}}),((c,u,_t)=>{Object.defineProperty(u,"__esModule",{value:!0}),u.BaseStandardFontDataFactory=u.BaseSVGFactory=u.BaseFilterFactory=u.BaseCanvasFactory=u.BaseCMapReaderFactory=void 0;var l=_t(1);class E{constructor(){this.constructor===E&&(0,l.unreachable)("Cannot initialize BaseFilterFactory.")}addFilter(d){return"none"}addHCMFilter(d,H){return"none"}addHighlightHCMFilter(d,H,j,y){return"none"}destroy(d=!1){}}u.BaseFilterFactory=E;class t{constructor(){this.constructor===t&&(0,l.unreachable)("Cannot initialize BaseCanvasFactory.")}create(d,H){if(d<=0||H<=0)throw new Error("Invalid canvas size");const j=this._createCanvas(d,H);return{canvas:j,context:j.getContext("2d")}}reset(d,H,j){if(!d.canvas)throw new Error("Canvas is not specified");if(H<=0||j<=0)throw new Error("Invalid canvas size");d.canvas.width=H,d.canvas.height=j}destroy(d){if(!d.canvas)throw new Error("Canvas is not specified");d.canvas.width=0,d.canvas.height=0,d.canvas=null,d.context=null}_createCanvas(d,H){(0,l.unreachable)("Abstract method `_createCanvas` called.")}}u.BaseCanvasFactory=t;class Z{constructor({baseUrl:d=null,isCompressed:H=!0}){this.constructor===Z&&(0,l.unreachable)("Cannot initialize BaseCMapReaderFactory."),this.baseUrl=d,this.isCompressed=H}async fetch({name:d}){if(!this.baseUrl)throw new Error('The CMap "baseUrl" parameter must be specified, ensure that the "cMapUrl" and "cMapPacked" API parameters are provided.');if(!d)throw new Error("CMap name must be specified.");const H=this.baseUrl+d+(this.isCompressed?".bcmap":""),j=this.isCompressed?l.CMapCompressionType.BINARY:l.CMapCompressionType.NONE;return this._fetchData(H,j).catch(y=>{throw new Error(`Unable to load ${this.isCompressed?"binary ":""}CMap at: ${H}`)})}_fetchData(d,H){(0,l.unreachable)("Abstract method `_fetchData` called.")}}u.BaseCMapReaderFactory=Z;class Ct{constructor({baseUrl:d=null}){this.constructor===Ct&&(0,l.unreachable)("Cannot initialize BaseStandardFontDataFactory."),this.baseUrl=d}async fetch({filename:d}){if(!this.baseUrl)throw new Error('The standard font "baseUrl" parameter must be specified, ensure that the "standardFontDataUrl" API parameter is provided.');if(!d)throw new Error("Font filename must be specified.");const H=`${this.baseUrl}${d}`;return this._fetchData(H).catch(j=>{throw new Error(`Unable to load font data at: ${H}`)})}_fetchData(d){(0,l.unreachable)("Abstract method `_fetchData` called.")}}u.BaseStandardFontDataFactory=Ct;class W{constructor(){this.constructor===W&&(0,l.unreachable)("Cannot initialize BaseSVGFactory.")}create(d,H,j=!1){if(d<=0||H<=0)throw new Error("Invalid SVG dimensions");const y=this._createSVG("svg:svg");return y.setAttribute("version","1.1"),j||(y.setAttribute("width",`${d}px`),y.setAttribute("height",`${H}px`)),y.setAttribute("preserveAspectRatio","none"),y.setAttribute("viewBox",`0 0 ${d} ${H}`),y}createElement(d){if(typeof d!="string")throw new Error("Invalid SVG element type");return this._createSVG(d)}_createSVG(d){(0,l.unreachable)("Abstract method `_createSVG` called.")}}u.BaseSVGFactory=W}),((c,u,_t)=>{Object.defineProperty(u,"__esModule",{value:!0}),u.MurmurHash3_64=void 0;var l=_t(1);const E=3285377520,t=4294901760,Z=65535;class Ct{constructor(T){this.h1=T?T&4294967295:E,this.h2=T?T&4294967295:E}update(T){let d,H;if(typeof T=="string"){d=new Uint8Array(T.length*2),H=0;for(let n=0,S=T.length;n<S;n++){const p=T.charCodeAt(n);p<=255?d[H++]=p:(d[H++]=p>>>8,d[H++]=p&255)}}else if((0,l.isArrayBuffer)(T))d=T.slice(),H=d.byteLength;else throw new Error("Wrong data format in MurmurHash3_64_update. Input must be a string or array.");const j=H>>2,y=H-j*4,b=new Uint32Array(d.buffer,0,j);let M=0,v=0,g=this.h1,A=this.h2;const O=3432918353,w=461845907,o=O&Z,r=w&Z;for(let n=0;n<j;n++)n&1?(M=b[n],M=M*O&t|M*o&Z,M=M<<15|M>>>17,M=M*w&t|M*r&Z,g^=M,g=g<<13|g>>>19,g=g*5+3864292196):(v=b[n],v=v*O&t|v*o&Z,v=v<<15|v>>>17,v=v*w&t|v*r&Z,A^=v,A=A<<13|A>>>19,A=A*5+3864292196);switch(M=0,y){case 3:M^=d[j*4+2]<<16;case 2:M^=d[j*4+1]<<8;case 1:M^=d[j*4],M=M*O&t|M*o&Z,M=M<<15|M>>>17,M=M*w&t|M*r&Z,j&1?g^=M:A^=M}this.h1=g,this.h2=A}hexdigest(){let T=this.h1,d=this.h2;return T^=d>>>1,T=T*3981806797&t|T*36045&Z,d=d*4283543511&t|((d<<16|T>>>16)*2950163797&t)>>>16,T^=d>>>1,T=T*444984403&t|T*60499&Z,d=d*3301882366&t|((d<<16|T>>>16)*3120437893&t)>>>16,T^=d>>>1,(T>>>0).toString(16).padStart(8,"0")+(d>>>0).toString(16).padStart(8,"0")}}u.MurmurHash3_64=Ct}),((c,u,_t)=>{var Z;Object.defineProperty(u,"__esModule",{value:!0}),u.FontLoader=u.FontFaceObject=void 0;var l=_t(1);class E{constructor({ownerDocument:W=globalThis.document,styleElement:T=null}){pt(this,Z,new Set);this._document=W,this.nativeFontFaces=new Set,this.styleElement=null,this.loadingRequests=[],this.loadTestFontId=0}addNativeFontFace(W){this.nativeFontFaces.add(W),this._document.fonts.add(W)}removeNativeFontFace(W){this.nativeFontFaces.delete(W),this._document.fonts.delete(W)}insertRule(W){this.styleElement||(this.styleElement=this._document.createElement("style"),this._document.documentElement.getElementsByTagName("head")[0].append(this.styleElement));const T=this.styleElement.sheet;T.insertRule(W,T.cssRules.length)}clear(){for(const W of this.nativeFontFaces)this._document.fonts.delete(W);this.nativeFontFaces.clear(),e(this,Z).clear(),this.styleElement&&(this.styleElement.remove(),this.styleElement=null)}async loadSystemFont(W){if(!(!W||e(this,Z).has(W.loadedName))){if((0,l.assert)(!this.disableFontFace,"loadSystemFont shouldn't be called when `disableFontFace` is set."),this.isFontLoadingAPISupported){const{loadedName:T,src:d,style:H}=W,j=new FontFace(T,d,H);this.addNativeFontFace(j);try{await j.load(),e(this,Z).add(T)}catch{(0,l.warn)(`Cannot load system font: ${W.baseFontName}, installing it could help to improve PDF rendering.`),this.removeNativeFontFace(j)}return}(0,l.unreachable)("Not implemented: loadSystemFont without the Font Loading API.")}}async bind(W){if(W.attached||W.missingFile&&!W.systemFontInfo)return;if(W.attached=!0,W.systemFontInfo){await this.loadSystemFont(W.systemFontInfo);return}if(this.isFontLoadingAPISupported){const d=W.createNativeFontFace();if(d){this.addNativeFontFace(d);try{await d.loaded}catch(H){throw(0,l.warn)(`Failed to load font '${d.family}': '${H}'.`),W.disableFontFace=!0,H}}return}const T=W.createFontFaceRule();if(T){if(this.insertRule(T),this.isSyncFontLoadingSupported)return;await new Promise(d=>{const H=this._queueLoadingCallback(d);this._prepareFontLoadEvent(W,H)})}}get isFontLoadingAPISupported(){const W=!!this._document?.fonts;return(0,l.shadow)(this,"isFontLoadingAPISupported",W)}get isSyncFontLoadingSupported(){let W=!1;return(l.isNodeJS||typeof navigator<"u"&&/Mozilla\/5.0.*?rv:\d+.*? Gecko/.test(navigator.userAgent))&&(W=!0),(0,l.shadow)(this,"isSyncFontLoadingSupported",W)}_queueLoadingCallback(W){function T(){for((0,l.assert)(!H.done,"completeRequest() cannot be called twice."),H.done=!0;d.length>0&&d[0].done;){const j=d.shift();setTimeout(j.callback,0)}}const{loadingRequests:d}=this,H={done:!1,complete:T,callback:W};return d.push(H),H}get _loadTestFont(){const W=atob("T1RUTwALAIAAAwAwQ0ZGIDHtZg4AAAOYAAAAgUZGVE1lkzZwAAAEHAAAABxHREVGABQAFQAABDgAAAAeT1MvMlYNYwkAAAEgAAAAYGNtYXABDQLUAAACNAAAAUJoZWFk/xVFDQAAALwAAAA2aGhlYQdkA+oAAAD0AAAAJGhtdHgD6AAAAAAEWAAAAAZtYXhwAAJQAAAAARgAAAAGbmFtZVjmdH4AAAGAAAAAsXBvc3T/hgAzAAADeAAAACAAAQAAAAEAALZRFsRfDzz1AAsD6AAAAADOBOTLAAAAAM4KHDwAAAAAA+gDIQAAAAgAAgAAAAAAAAABAAADIQAAAFoD6AAAAAAD6AABAAAAAAAAAAAAAAAAAAAAAQAAUAAAAgAAAAQD6AH0AAUAAAKKArwAAACMAooCvAAAAeAAMQECAAACAAYJAAAAAAAAAAAAAQAAAAAAAAAAAAAAAFBmRWQAwAAuAC4DIP84AFoDIQAAAAAAAQAAAAAAAAAAACAAIAABAAAADgCuAAEAAAAAAAAAAQAAAAEAAAAAAAEAAQAAAAEAAAAAAAIAAQAAAAEAAAAAAAMAAQAAAAEAAAAAAAQAAQAAAAEAAAAAAAUAAQAAAAEAAAAAAAYAAQAAAAMAAQQJAAAAAgABAAMAAQQJAAEAAgABAAMAAQQJAAIAAgABAAMAAQQJAAMAAgABAAMAAQQJAAQAAgABAAMAAQQJAAUAAgABAAMAAQQJAAYAAgABWABYAAAAAAAAAwAAAAMAAAAcAAEAAAAAADwAAwABAAAAHAAEACAAAAAEAAQAAQAAAC7//wAAAC7////TAAEAAAAAAAABBgAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAMAAAAAAAD/gwAyAAAAAQAAAAAAAAAAAAAAAAAAAAABAAQEAAEBAQJYAAEBASH4DwD4GwHEAvgcA/gXBIwMAYuL+nz5tQXkD5j3CBLnEQACAQEBIVhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYAAABAQAADwACAQEEE/t3Dov6fAH6fAT+fPp8+nwHDosMCvm1Cvm1DAz6fBQAAAAAAAABAAAAAMmJbzEAAAAAzgTjFQAAAADOBOQpAAEAAAAAAAAADAAUAAQAAAABAAAAAgABAAAAAAAAAAAD6AAAAAAAAA==");return(0,l.shadow)(this,"_loadTestFont",W)}_prepareFontLoadEvent(W,T){function d(h,P){return h.charCodeAt(P)<<24|h.charCodeAt(P+1)<<16|h.charCodeAt(P+2)<<8|h.charCodeAt(P+3)&255}function H(h,P,$,bt){const nt=h.substring(0,P),at=h.substring(P+$);return nt+bt+at}let j,y;const b=this._document.createElement("canvas");b.width=1,b.height=1;const M=b.getContext("2d");let v=0;function g(h,P){if(++v>30){(0,l.warn)("Load test font never loaded."),P();return}if(M.font="30px "+h,M.fillText(".",0,20),M.getImageData(0,0,1,1).data[3]>0){P();return}setTimeout(g.bind(null,h,P))}const A=`lt${Date.now()}${this.loadTestFontId++}`;let O=this._loadTestFont;O=H(O,976,A.length,A);const o=16,r=1482184792;let n=d(O,o);for(j=0,y=A.length-3;j<y;j+=4)n=n-r+d(A,j)|0;j<A.length&&(n=n-r+d(A+"XXX",j)|0),O=H(O,o,4,(0,l.string32)(n));const S=`url(data:font/opentype;base64,${btoa(O)});`,p=`@font-face {font-family:"${A}";src:${S}}`;this.insertRule(p);const G=this._document.createElement("div");G.style.visibility="hidden",G.style.width=G.style.height="10px",G.style.position="absolute",G.style.top=G.style.left="0px";for(const h of[W.loadedName,A]){const P=this._document.createElement("span");P.textContent="Hi",P.style.fontFamily=h,G.append(P)}this._document.body.append(G),g(A,()=>{G.remove(),T.complete()})}}Z=new WeakMap,u.FontLoader=E;class t{constructor(W,{isEvalSupported:T=!0,disableFontFace:d=!1,ignoreErrors:H=!1,inspectFont:j=null}){this.compiledGlyphs=Object.create(null);for(const y in W)this[y]=W[y];this.isEvalSupported=T!==!1,this.disableFontFace=d===!0,this.ignoreErrors=H===!0,this._inspectFont=j}createNativeFontFace(){if(!this.data||this.disableFontFace)return null;let W;if(!this.cssFontInfo)W=new FontFace(this.loadedName,this.data,{});else{const T={weight:this.cssFontInfo.fontWeight};this.cssFontInfo.italicAngle&&(T.style=`oblique ${this.cssFontInfo.italicAngle}deg`),W=new FontFace(this.cssFontInfo.fontFamily,this.data,T)}return this._inspectFont?.(this),W}createFontFaceRule(){if(!this.data||this.disableFontFace)return null;const W=(0,l.bytesToString)(this.data),T=`url(data:${this.mimetype};base64,${btoa(W)});`;let d;if(!this.cssFontInfo)d=`@font-face {font-family:"${this.loadedName}";src:${T}}`;else{let H=`font-weight: ${this.cssFontInfo.fontWeight};`;this.cssFontInfo.italicAngle&&(H+=`font-style: oblique ${this.cssFontInfo.italicAngle}deg;`),d=`@font-face {font-family:"${this.cssFontInfo.fontFamily}";${H}src:${T}}`}return this._inspectFont?.(this,T),d}getPathGenerator(W,T){if(this.compiledGlyphs[T]!==void 0)return this.compiledGlyphs[T];let d;try{d=W.get(this.loadedName+"_path_"+T)}catch(H){if(!this.ignoreErrors)throw H;return(0,l.warn)(`getPathGenerator - ignoring character: "${H}".`),this.compiledGlyphs[T]=function(j,y){}}if(this.isEvalSupported&&l.FeatureTest.isEvalSupported){const H=[];for(const j of d){const y=j.args!==void 0?j.args.join(","):"";H.push("c.",j.cmd,"(",y,`);
`)}return this.compiledGlyphs[T]=new Function("c","size",H.join(""))}return this.compiledGlyphs[T]=function(H,j){for(const y of d)y.cmd==="scale"&&(y.args=[j,-j]),H[y.cmd].apply(H,y.args)}}}u.FontFaceObject=t}),((c,u,_t)=>{Object.defineProperty(u,"__esModule",{value:!0}),u.NodeStandardFontDataFactory=u.NodeFilterFactory=u.NodeCanvasFactory=u.NodeCMapReaderFactory=void 0;var l=_t(7);_t(1);const E=function(T){return new Promise((d,H)=>{require$$5.readFile(T,(y,b)=>{if(y||!b){H(new Error(y));return}d(new Uint8Array(b))})})};class t extends l.BaseFilterFactory{}u.NodeFilterFactory=t;class Z extends l.BaseCanvasFactory{_createCanvas(d,H){return require$$5.createCanvas(d,H)}}u.NodeCanvasFactory=Z;class Ct extends l.BaseCMapReaderFactory{_fetchData(d,H){return E(d).then(j=>({cMapData:j,compressionType:H}))}}u.NodeCMapReaderFactory=Ct;class W extends l.BaseStandardFontDataFactory{_fetchData(d){return E(d)}}u.NodeStandardFontDataFactory=W}),((c,u,_t)=>{var vt,Vi,$i;Object.defineProperty(u,"__esModule",{value:!0}),u.CanvasGraphics=void 0;var l=_t(1),E=_t(6),t=_t(12),Z=_t(13);const Ct=16,W=100,T=4096,d=15,H=10,j=1e3,y=16;function b(k,s){if(k._removeMirroring)throw new Error("Context is already forwarding operations.");k.__originalSave=k.save,k.__originalRestore=k.restore,k.__originalRotate=k.rotate,k.__originalScale=k.scale,k.__originalTranslate=k.translate,k.__originalTransform=k.transform,k.__originalSetTransform=k.setTransform,k.__originalResetTransform=k.resetTransform,k.__originalClip=k.clip,k.__originalMoveTo=k.moveTo,k.__originalLineTo=k.lineTo,k.__originalBezierCurveTo=k.bezierCurveTo,k.__originalRect=k.rect,k.__originalClosePath=k.closePath,k.__originalBeginPath=k.beginPath,k._removeMirroring=()=>{k.save=k.__originalSave,k.restore=k.__originalRestore,k.rotate=k.__originalRotate,k.scale=k.__originalScale,k.translate=k.__originalTranslate,k.transform=k.__originalTransform,k.setTransform=k.__originalSetTransform,k.resetTransform=k.__originalResetTransform,k.clip=k.__originalClip,k.moveTo=k.__originalMoveTo,k.lineTo=k.__originalLineTo,k.bezierCurveTo=k.__originalBezierCurveTo,k.rect=k.__originalRect,k.closePath=k.__originalClosePath,k.beginPath=k.__originalBeginPath,delete k._removeMirroring},k.save=function(){s.save(),this.__originalSave()},k.restore=function(){s.restore(),this.__originalRestore()},k.translate=function(m,F){s.translate(m,F),this.__originalTranslate(m,F)},k.scale=function(m,F){s.scale(m,F),this.__originalScale(m,F)},k.transform=function(m,F,L,R,q,mt){s.transform(m,F,L,R,q,mt),this.__originalTransform(m,F,L,R,q,mt)},k.setTransform=function(m,F,L,R,q,mt){s.setTransform(m,F,L,R,q,mt),this.__originalSetTransform(m,F,L,R,q,mt)},k.resetTransform=function(){s.resetTransform(),this.__originalResetTransform()},k.rotate=function(m){s.rotate(m),this.__originalRotate(m)},k.clip=function(m){s.clip(m),this.__originalClip(m)},k.moveTo=function(a,m){s.moveTo(a,m),this.__originalMoveTo(a,m)},k.lineTo=function(a,m){s.lineTo(a,m),this.__originalLineTo(a,m)},k.bezierCurveTo=function(a,m,F,L,R,q){s.bezierCurveTo(a,m,F,L,R,q),this.__originalBezierCurveTo(a,m,F,L,R,q)},k.rect=function(a,m,F,L){s.rect(a,m,F,L),this.__originalRect(a,m,F,L)},k.closePath=function(){s.closePath(),this.__originalClosePath()},k.beginPath=function(){s.beginPath(),this.__originalBeginPath()}}class M{constructor(s){this.canvasFactory=s,this.cache=Object.create(null)}getCanvas(s,a,m){let F;return this.cache[s]!==void 0?(F=this.cache[s],this.canvasFactory.reset(F,a,m)):(F=this.canvasFactory.create(a,m),this.cache[s]=F),F}delete(s){delete this.cache[s]}clear(){for(const s in this.cache){const a=this.cache[s];this.canvasFactory.destroy(a),delete this.cache[s]}}}function v(k,s,a,m,F,L,R,q,mt,At){const[Et,Pt,Rt,Lt,ht,dt]=(0,E.getCurrentTransform)(k);if(Pt===0&&Rt===0){const tt=R*Et+ht,ut=Math.round(tt),wt=q*Lt+dt,Ft=Math.round(wt),Tt=(R+mt)*Et+ht,et=Math.abs(Math.round(Tt)-ut)||1,jt=(q+At)*Lt+dt,Bt=Math.abs(Math.round(jt)-Ft)||1;return k.setTransform(Math.sign(Et),0,0,Math.sign(Lt),ut,Ft),k.drawImage(s,a,m,F,L,0,0,et,Bt),k.setTransform(Et,Pt,Rt,Lt,ht,dt),[et,Bt]}if(Et===0&&Lt===0){const tt=q*Rt+ht,ut=Math.round(tt),wt=R*Pt+dt,Ft=Math.round(wt),Tt=(q+At)*Rt+ht,et=Math.abs(Math.round(Tt)-ut)||1,jt=(R+mt)*Pt+dt,Bt=Math.abs(Math.round(jt)-Ft)||1;return k.setTransform(0,Math.sign(Pt),Math.sign(Rt),0,ut,Ft),k.drawImage(s,a,m,F,L,0,0,Bt,et),k.setTransform(Et,Pt,Rt,Lt,ht,dt),[Bt,et]}k.drawImage(s,a,m,F,L,R,q,mt,At);const _=Math.hypot(Et,Pt),I=Math.hypot(Rt,Lt);return[_*mt,I*At]}function g(k){const{width:s,height:a}=k;if(s>j||a>j)return null;const m=1e3,F=new Uint8Array([0,2,4,0,1,0,5,4,8,10,0,8,0,2,1,0]),L=s+1;let R=new Uint8Array(L*(a+1)),q,mt,At;const Et=s+7&-8;let Pt=new Uint8Array(Et*a),Rt=0;for(const I of k.data){let tt=128;for(;tt>0;)Pt[Rt++]=I&tt?0:255,tt>>=1}let Lt=0;for(Rt=0,Pt[Rt]!==0&&(R[0]=1,++Lt),mt=1;mt<s;mt++)Pt[Rt]!==Pt[Rt+1]&&(R[mt]=Pt[Rt]?2:1,++Lt),Rt++;for(Pt[Rt]!==0&&(R[mt]=2,++Lt),q=1;q<a;q++){Rt=q*Et,At=q*L,Pt[Rt-Et]!==Pt[Rt]&&(R[At]=Pt[Rt]?1:8,++Lt);let I=(Pt[Rt]?4:0)+(Pt[Rt-Et]?8:0);for(mt=1;mt<s;mt++)I=(I>>2)+(Pt[Rt+1]?4:0)+(Pt[Rt-Et+1]?8:0),F[I]&&(R[At+mt]=F[I],++Lt),Rt++;if(Pt[Rt-Et]!==Pt[Rt]&&(R[At+mt]=Pt[Rt]?2:4,++Lt),Lt>m)return null}for(Rt=Et*(a-1),At=q*L,Pt[Rt]!==0&&(R[At]=8,++Lt),mt=1;mt<s;mt++)Pt[Rt]!==Pt[Rt+1]&&(R[At+mt]=Pt[Rt]?4:8,++Lt),Rt++;if(Pt[Rt]!==0&&(R[At+mt]=4,++Lt),Lt>m)return null;const ht=new Int32Array([0,L,-1,0,-L,0,0,0,1]),dt=new Path2D;for(q=0;Lt&&q<=a;q++){let I=q*L;const tt=I+s;for(;I<tt&&!R[I];)I++;if(I===tt)continue;dt.moveTo(I%L,q);const ut=I;let wt=R[I];do{const Ft=ht[wt];do I+=Ft;while(!R[I]);const Tt=R[I];Tt!==5&&Tt!==10?(wt=Tt,R[I]=0):(wt=Tt&51*wt>>4,R[I]&=wt>>2|wt<<2),dt.lineTo(I%L,I/L|0),R[I]||--Lt}while(ut!==I);--q}return Pt=null,R=null,function(I){I.save(),I.scale(1/s,-1/a),I.translate(0,-a),I.fill(dt),I.beginPath(),I.restore()}}class A{constructor(s,a){this.alphaIsShape=!1,this.fontSize=0,this.fontSizeScale=1,this.textMatrix=l.IDENTITY_MATRIX,this.textMatrixScale=1,this.fontMatrix=l.FONT_IDENTITY_MATRIX,this.leading=0,this.x=0,this.y=0,this.lineX=0,this.lineY=0,this.charSpacing=0,this.wordSpacing=0,this.textHScale=1,this.textRenderingMode=l.TextRenderingMode.FILL,this.textRise=0,this.fillColor="#000000",this.strokeColor="#000000",this.patternFill=!1,this.fillAlpha=1,this.strokeAlpha=1,this.lineWidth=1,this.activeSMask=null,this.transferMaps="none",this.startNewPathAndClipBox([0,0,s,a])}clone(){const s=Object.create(this);return s.clipBox=this.clipBox.slice(),s}setCurrentPoint(s,a){this.x=s,this.y=a}updatePathMinMax(s,a,m){[a,m]=l.Util.applyTransform([a,m],s),this.minX=Math.min(this.minX,a),this.minY=Math.min(this.minY,m),this.maxX=Math.max(this.maxX,a),this.maxY=Math.max(this.maxY,m)}updateRectMinMax(s,a){const m=l.Util.applyTransform(a,s),F=l.Util.applyTransform(a.slice(2),s);this.minX=Math.min(this.minX,m[0],F[0]),this.minY=Math.min(this.minY,m[1],F[1]),this.maxX=Math.max(this.maxX,m[0],F[0]),this.maxY=Math.max(this.maxY,m[1],F[1])}updateScalingPathMinMax(s,a){l.Util.scaleMinMax(s,a),this.minX=Math.min(this.minX,a[0]),this.maxX=Math.max(this.maxX,a[1]),this.minY=Math.min(this.minY,a[2]),this.maxY=Math.max(this.maxY,a[3])}updateCurvePathMinMax(s,a,m,F,L,R,q,mt,At,Et){const Pt=l.Util.bezierBoundingBox(a,m,F,L,R,q,mt,At);if(Et){Et[0]=Math.min(Et[0],Pt[0],Pt[2]),Et[1]=Math.max(Et[1],Pt[0],Pt[2]),Et[2]=Math.min(Et[2],Pt[1],Pt[3]),Et[3]=Math.max(Et[3],Pt[1],Pt[3]);return}this.updateRectMinMax(s,Pt)}getPathBoundingBox(s=t.PathType.FILL,a=null){const m=[this.minX,this.minY,this.maxX,this.maxY];if(s===t.PathType.STROKE){a||(0,l.unreachable)("Stroke bounding box must include transform.");const F=l.Util.singularValueDecompose2dScale(a),L=F[0]*this.lineWidth/2,R=F[1]*this.lineWidth/2;m[0]-=L,m[1]-=R,m[2]+=L,m[3]+=R}return m}updateClipFromPath(){const s=l.Util.intersect(this.clipBox,this.getPathBoundingBox());this.startNewPathAndClipBox(s||[0,0,0,0])}isEmptyClip(){return this.minX===1/0}startNewPathAndClipBox(s){this.clipBox=s,this.minX=1/0,this.minY=1/0,this.maxX=0,this.maxY=0}getClippedPathBoundingBox(s=t.PathType.FILL,a=null){return l.Util.intersect(this.clipBox,this.getPathBoundingBox(s,a))}}function O(k,s){if(typeof ImageData<"u"&&s instanceof ImageData){k.putImageData(s,0,0);return}const a=s.height,m=s.width,F=a%y,L=(a-F)/y,R=F===0?L:L+1,q=k.createImageData(m,y);let mt=0,At;const Et=s.data,Pt=q.data;let Rt,Lt,ht,dt;if(s.kind===l.ImageKind.GRAYSCALE_1BPP){const _=Et.byteLength,I=new Uint32Array(Pt.buffer,0,Pt.byteLength>>2),tt=I.length,ut=m+7>>3,wt=4294967295,Ft=l.FeatureTest.isLittleEndian?4278190080:255;for(Rt=0;Rt<R;Rt++){for(ht=Rt<L?y:F,At=0,Lt=0;Lt<ht;Lt++){const Tt=_-mt;let et=0;const jt=Tt>ut?m:Tt*8-7,Bt=jt&-8;let he=0,oe=0;for(;et<Bt;et+=8)oe=Et[mt++],I[At++]=oe&128?wt:Ft,I[At++]=oe&64?wt:Ft,I[At++]=oe&32?wt:Ft,I[At++]=oe&16?wt:Ft,I[At++]=oe&8?wt:Ft,I[At++]=oe&4?wt:Ft,I[At++]=oe&2?wt:Ft,I[At++]=oe&1?wt:Ft;for(;et<jt;et++)he===0&&(oe=Et[mt++],he=128),I[At++]=oe&he?wt:Ft,he>>=1}for(;At<tt;)I[At++]=0;k.putImageData(q,0,Rt*y)}}else if(s.kind===l.ImageKind.RGBA_32BPP){for(Lt=0,dt=m*y*4,Rt=0;Rt<L;Rt++)Pt.set(Et.subarray(mt,mt+dt)),mt+=dt,k.putImageData(q,0,Lt),Lt+=y;Rt<R&&(dt=m*F*4,Pt.set(Et.subarray(mt,mt+dt)),k.putImageData(q,0,Lt))}else if(s.kind===l.ImageKind.RGB_24BPP)for(ht=y,dt=m*ht,Rt=0;Rt<R;Rt++){for(Rt>=L&&(ht=F,dt=m*ht),At=0,Lt=dt;Lt--;)Pt[At++]=Et[mt++],Pt[At++]=Et[mt++],Pt[At++]=Et[mt++],Pt[At++]=255;k.putImageData(q,0,Rt*y)}else throw new Error(`bad image kind: ${s.kind}`)}function w(k,s){if(s.bitmap){k.drawImage(s.bitmap,0,0);return}const a=s.height,m=s.width,F=a%y,L=(a-F)/y,R=F===0?L:L+1,q=k.createImageData(m,y);let mt=0;const At=s.data,Et=q.data;for(let Pt=0;Pt<R;Pt++){const Rt=Pt<L?y:F;({srcPos:mt}=(0,Z.convertBlackAndWhiteToRGBA)({src:At,srcPos:mt,dest:Et,width:m,height:Rt,nonBlackColor:0})),k.putImageData(q,0,Pt*y)}}function o(k,s){const a=["strokeStyle","fillStyle","fillRule","globalAlpha","lineWidth","lineCap","lineJoin","miterLimit","globalCompositeOperation","font","filter"];for(const m of a)k[m]!==void 0&&(s[m]=k[m]);k.setLineDash!==void 0&&(s.setLineDash(k.getLineDash()),s.lineDashOffset=k.lineDashOffset)}function r(k){if(k.strokeStyle=k.fillStyle="#000000",k.fillRule="nonzero",k.globalAlpha=1,k.lineWidth=1,k.lineCap="butt",k.lineJoin="miter",k.miterLimit=10,k.globalCompositeOperation="source-over",k.font="10px sans-serif",k.setLineDash!==void 0&&(k.setLineDash([]),k.lineDashOffset=0),!l.isNodeJS){const{filter:s}=k;s!=="none"&&s!==""&&(k.filter="none")}}function n(k,s,a,m){const F=k.length;for(let L=3;L<F;L+=4){const R=k[L];if(R===0)k[L-3]=s,k[L-2]=a,k[L-1]=m;else if(R<255){const q=255-R;k[L-3]=k[L-3]*R+s*q>>8,k[L-2]=k[L-2]*R+a*q>>8,k[L-1]=k[L-1]*R+m*q>>8}}}function S(k,s,a){const m=k.length,F=1/255;for(let L=3;L<m;L+=4){const R=a?a[k[L]]:k[L];s[L]=s[L]*R*F|0}}function p(k,s,a){const m=k.length;for(let F=3;F<m;F+=4){const L=k[F-3]*77+k[F-2]*152+k[F-1]*28;s[F]=a?s[F]*a[L>>8]>>8:s[F]*L>>16}}function G(k,s,a,m,F,L,R,q,mt,At,Et){const Pt=!!L,Rt=Pt?L[0]:0,Lt=Pt?L[1]:0,ht=Pt?L[2]:0,dt=F==="Luminosity"?p:S,I=Math.min(m,Math.ceil(1048576/a));for(let tt=0;tt<m;tt+=I){const ut=Math.min(I,m-tt),wt=k.getImageData(q-At,tt+(mt-Et),a,ut),Ft=s.getImageData(q,tt+mt,a,ut);Pt&&n(wt.data,Rt,Lt,ht),dt(wt.data,Ft.data,R),s.putImageData(Ft,q,tt+mt)}}function h(k,s,a,m){const F=m[0],L=m[1],R=m[2]-F,q=m[3]-L;R===0||q===0||(G(s.context,a,R,q,s.subtype,s.backdrop,s.transferMap,F,L,s.offsetX,s.offsetY),k.save(),k.globalAlpha=1,k.globalCompositeOperation="source-over",k.setTransform(1,0,0,1,0,0),k.drawImage(a.canvas,0,0),k.restore())}function P(k,s){const a=l.Util.singularValueDecompose2dScale(k);a[0]=Math.fround(a[0]),a[1]=Math.fround(a[1]);const m=Math.fround((globalThis.devicePixelRatio||1)*E.PixelsPerInch.PDF_TO_CSS_UNITS);return s!==void 0?s:a[0]<=m||a[1]<=m}const $=["butt","round","square"],bt=["miter","round","bevel"],nt={},at={},ct=class ct{constructor(s,a,m,F,L,{optionalContentConfig:R,markedContentStack:q=null},mt,At){pt(this,vt);this.ctx=s,this.current=new A(this.ctx.canvas.width,this.ctx.canvas.height),this.stateStack=[],this.pendingClip=null,this.pendingEOFill=!1,this.res=null,this.xobjs=null,this.commonObjs=a,this.objs=m,this.canvasFactory=F,this.filterFactory=L,this.groupStack=[],this.processingType3=null,this.baseTransform=null,this.baseTransformStack=[],this.groupLevel=0,this.smaskStack=[],this.smaskCounter=0,this.tempSMask=null,this.suspendedCtx=null,this.contentVisible=!0,this.markedContentStack=q||[],this.optionalContentConfig=R,this.cachedCanvases=new M(this.canvasFactory),this.cachedPatterns=new Map,this.annotationCanvasMap=mt,this.viewportScale=1,this.outputScaleX=1,this.outputScaleY=1,this.pageColors=At,this._cachedScaleForStroking=[-1,0],this._cachedGetSinglePixelWidth=null,this._cachedBitmapsMap=new Map}getObject(s,a=null){return typeof s=="string"?s.startsWith("g_")?this.commonObjs.get(s):this.objs.get(s):a}beginDrawing({transform:s,viewport:a,transparency:m=!1,background:F=null}){const L=this.ctx.canvas.width,R=this.ctx.canvas.height,q=this.ctx.fillStyle;if(this.ctx.fillStyle=F||"#ffffff",this.ctx.fillRect(0,0,L,R),this.ctx.fillStyle=q,m){const mt=this.cachedCanvases.getCanvas("transparent",L,R);this.compositeCtx=this.ctx,this.transparentCanvas=mt.canvas,this.ctx=mt.context,this.ctx.save(),this.ctx.transform(...(0,E.getCurrentTransform)(this.compositeCtx))}this.ctx.save(),r(this.ctx),s&&(this.ctx.transform(...s),this.outputScaleX=s[0],this.outputScaleY=s[0]),this.ctx.transform(...a.transform),this.viewportScale=a.scale,this.baseTransform=(0,E.getCurrentTransform)(this.ctx)}executeOperatorList(s,a,m,F){const L=s.argsArray,R=s.fnArray;let q=a||0;const mt=L.length;if(mt===q)return q;const At=mt-q>H&&typeof m=="function",Et=At?Date.now()+d:0;let Pt=0;const Rt=this.commonObjs,Lt=this.objs;let ht;for(;;){if(F!==void 0&&q===F.nextBreakPoint)return F.breakIt(q,m),q;if(ht=R[q],ht!==l.OPS.dependency)this[ht].apply(this,L[q]);else for(const dt of L[q]){const _=dt.startsWith("g_")?Rt:Lt;if(!_.has(dt))return _.get(dt,m),q}if(q++,q===mt)return q;if(At&&++Pt>H){if(Date.now()>Et)return m(),q;Pt=0}}}endDrawing(){J(this,vt,Vi).call(this),this.cachedCanvases.clear(),this.cachedPatterns.clear();for(const s of this._cachedBitmapsMap.values()){for(const a of s.values())typeof HTMLCanvasElement<"u"&&a instanceof HTMLCanvasElement&&(a.width=a.height=0);s.clear()}this._cachedBitmapsMap.clear(),J(this,vt,$i).call(this)}_scaleImage(s,a){const m=s.width,F=s.height;let L=Math.max(Math.hypot(a[0],a[1]),1),R=Math.max(Math.hypot(a[2],a[3]),1),q=m,mt=F,At="prescale1",Et,Pt;for(;L>2&&q>1||R>2&&mt>1;){let Rt=q,Lt=mt;L>2&&q>1&&(Rt=q>=16384?Math.floor(q/2)-1||1:Math.ceil(q/2),L/=q/Rt),R>2&&mt>1&&(Lt=mt>=16384?Math.floor(mt/2)-1||1:Math.ceil(mt)/2,R/=mt/Lt),Et=this.cachedCanvases.getCanvas(At,Rt,Lt),Pt=Et.context,Pt.clearRect(0,0,Rt,Lt),Pt.drawImage(s,0,0,q,mt,0,0,Rt,Lt),s=Et.canvas,q=Rt,mt=Lt,At=At==="prescale1"?"prescale2":"prescale1"}return{img:s,paintWidth:q,paintHeight:mt}}_createMaskCanvas(s){const a=this.ctx,{width:m,height:F}=s,L=this.current.fillColor,R=this.current.patternFill,q=(0,E.getCurrentTransform)(a);let mt,At,Et,Pt;if((s.bitmap||s.data)&&s.count>1){const et=s.bitmap||s.data.buffer;At=JSON.stringify(R?q:[q.slice(0,4),L]),mt=this._cachedBitmapsMap.get(et),mt||(mt=new Map,this._cachedBitmapsMap.set(et,mt));const jt=mt.get(At);if(jt&&!R){const Bt=Math.round(Math.min(q[0],q[2])+q[4]),he=Math.round(Math.min(q[1],q[3])+q[5]);return{canvas:jt,offsetX:Bt,offsetY:he}}Et=jt}Et||(Pt=this.cachedCanvases.getCanvas("maskCanvas",m,F),w(Pt.context,s));let Rt=l.Util.transform(q,[1/m,0,0,-1/F,0,0]);Rt=l.Util.transform(Rt,[1,0,0,1,0,-F]);const Lt=l.Util.applyTransform([0,0],Rt),ht=l.Util.applyTransform([m,F],Rt),dt=l.Util.normalizeRect([Lt[0],Lt[1],ht[0],ht[1]]),_=Math.round(dt[2]-dt[0])||1,I=Math.round(dt[3]-dt[1])||1,tt=this.cachedCanvases.getCanvas("fillCanvas",_,I),ut=tt.context,wt=Math.min(Lt[0],ht[0]),Ft=Math.min(Lt[1],ht[1]);ut.translate(-wt,-Ft),ut.transform(...Rt),Et||(Et=this._scaleImage(Pt.canvas,(0,E.getCurrentTransformInverse)(ut)),Et=Et.img,mt&&R&&mt.set(At,Et)),ut.imageSmoothingEnabled=P((0,E.getCurrentTransform)(ut),s.interpolate),v(ut,Et,0,0,Et.width,Et.height,0,0,m,F),ut.globalCompositeOperation="source-in";const Tt=l.Util.transform((0,E.getCurrentTransformInverse)(ut),[1,0,0,1,-wt,-Ft]);return ut.fillStyle=R?L.getPattern(a,this,Tt,t.PathType.FILL):L,ut.fillRect(0,0,m,F),mt&&!R&&(this.cachedCanvases.delete("fillCanvas"),mt.set(At,tt.canvas)),{canvas:tt.canvas,offsetX:Math.round(wt),offsetY:Math.round(Ft)}}setLineWidth(s){s!==this.current.lineWidth&&(this._cachedScaleForStroking[0]=-1),this.current.lineWidth=s,this.ctx.lineWidth=s}setLineCap(s){this.ctx.lineCap=$[s]}setLineJoin(s){this.ctx.lineJoin=bt[s]}setMiterLimit(s){this.ctx.miterLimit=s}setDash(s,a){const m=this.ctx;m.setLineDash!==void 0&&(m.setLineDash(s),m.lineDashOffset=a)}setRenderingIntent(s){}setFlatness(s){}setGState(s){for(const[a,m]of s)switch(a){case"LW":this.setLineWidth(m);break;case"LC":this.setLineCap(m);break;case"LJ":this.setLineJoin(m);break;case"ML":this.setMiterLimit(m);break;case"D":this.setDash(m[0],m[1]);break;case"RI":this.setRenderingIntent(m);break;case"FL":this.setFlatness(m);break;case"Font":this.setFont(m[0],m[1]);break;case"CA":this.current.strokeAlpha=m;break;case"ca":this.current.fillAlpha=m,this.ctx.globalAlpha=m;break;case"BM":this.ctx.globalCompositeOperation=m;break;case"SMask":this.current.activeSMask=m?this.tempSMask:null,this.tempSMask=null,this.checkSMaskState();break;case"TR":this.ctx.filter=this.current.transferMaps=this.filterFactory.addFilter(m);break}}get inSMaskMode(){return!!this.suspendedCtx}checkSMaskState(){const s=this.inSMaskMode;this.current.activeSMask&&!s?this.beginSMaskMode():!this.current.activeSMask&&s&&this.endSMaskMode()}beginSMaskMode(){if(this.inSMaskMode)throw new Error("beginSMaskMode called while already in smask mode");const s=this.ctx.canvas.width,a=this.ctx.canvas.height,m="smaskGroupAt"+this.groupLevel,F=this.cachedCanvases.getCanvas(m,s,a);this.suspendedCtx=this.ctx,this.ctx=F.context;const L=this.ctx;L.setTransform(...(0,E.getCurrentTransform)(this.suspendedCtx)),o(this.suspendedCtx,L),b(L,this.suspendedCtx),this.setGState([["BM","source-over"],["ca",1],["CA",1]])}endSMaskMode(){if(!this.inSMaskMode)throw new Error("endSMaskMode called while not in smask mode");this.ctx._removeMirroring(),o(this.ctx,this.suspendedCtx),this.ctx=this.suspendedCtx,this.suspendedCtx=null}compose(s){if(!this.current.activeSMask)return;s?(s[0]=Math.floor(s[0]),s[1]=Math.floor(s[1]),s[2]=Math.ceil(s[2]),s[3]=Math.ceil(s[3])):s=[0,0,this.ctx.canvas.width,this.ctx.canvas.height];const a=this.current.activeSMask,m=this.suspendedCtx;h(m,a,this.ctx,s),this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.clearRect(0,0,this.ctx.canvas.width,this.ctx.canvas.height),this.ctx.restore()}save(){this.inSMaskMode?(o(this.ctx,this.suspendedCtx),this.suspendedCtx.save()):this.ctx.save();const s=this.current;this.stateStack.push(s),this.current=s.clone()}restore(){this.stateStack.length===0&&this.inSMaskMode&&this.endSMaskMode(),this.stateStack.length!==0&&(this.current=this.stateStack.pop(),this.inSMaskMode?(this.suspendedCtx.restore(),o(this.suspendedCtx,this.ctx)):this.ctx.restore(),this.checkSMaskState(),this.pendingClip=null,this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null)}transform(s,a,m,F,L,R){this.ctx.transform(s,a,m,F,L,R),this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null}constructPath(s,a,m){const F=this.ctx,L=this.current;let R=L.x,q=L.y,mt,At;const Et=(0,E.getCurrentTransform)(F),Pt=Et[0]===0&&Et[3]===0||Et[1]===0&&Et[2]===0,Rt=Pt?m.slice(0):null;for(let Lt=0,ht=0,dt=s.length;Lt<dt;Lt++)switch(s[Lt]|0){case l.OPS.rectangle:R=a[ht++],q=a[ht++];const _=a[ht++],I=a[ht++],tt=R+_,ut=q+I;F.moveTo(R,q),_===0||I===0?F.lineTo(tt,ut):(F.lineTo(tt,q),F.lineTo(tt,ut),F.lineTo(R,ut)),Pt||L.updateRectMinMax(Et,[R,q,tt,ut]),F.closePath();break;case l.OPS.moveTo:R=a[ht++],q=a[ht++],F.moveTo(R,q),Pt||L.updatePathMinMax(Et,R,q);break;case l.OPS.lineTo:R=a[ht++],q=a[ht++],F.lineTo(R,q),Pt||L.updatePathMinMax(Et,R,q);break;case l.OPS.curveTo:mt=R,At=q,R=a[ht+4],q=a[ht+5],F.bezierCurveTo(a[ht],a[ht+1],a[ht+2],a[ht+3],R,q),L.updateCurvePathMinMax(Et,mt,At,a[ht],a[ht+1],a[ht+2],a[ht+3],R,q,Rt),ht+=6;break;case l.OPS.curveTo2:mt=R,At=q,F.bezierCurveTo(R,q,a[ht],a[ht+1],a[ht+2],a[ht+3]),L.updateCurvePathMinMax(Et,mt,At,R,q,a[ht],a[ht+1],a[ht+2],a[ht+3],Rt),R=a[ht+2],q=a[ht+3],ht+=4;break;case l.OPS.curveTo3:mt=R,At=q,R=a[ht+2],q=a[ht+3],F.bezierCurveTo(a[ht],a[ht+1],R,q,R,q),L.updateCurvePathMinMax(Et,mt,At,a[ht],a[ht+1],R,q,R,q,Rt),ht+=4;break;case l.OPS.closePath:F.closePath();break}Pt&&L.updateScalingPathMinMax(Et,Rt),L.setCurrentPoint(R,q)}closePath(){this.ctx.closePath()}stroke(s=!0){const a=this.ctx,m=this.current.strokeColor;a.globalAlpha=this.current.strokeAlpha,this.contentVisible&&(typeof m=="object"&&m?.getPattern?(a.save(),a.strokeStyle=m.getPattern(a,this,(0,E.getCurrentTransformInverse)(a),t.PathType.STROKE),this.rescaleAndStroke(!1),a.restore()):this.rescaleAndStroke(!0)),s&&this.consumePath(this.current.getClippedPathBoundingBox()),a.globalAlpha=this.current.fillAlpha}closeStroke(){this.closePath(),this.stroke()}fill(s=!0){const a=this.ctx,m=this.current.fillColor,F=this.current.patternFill;let L=!1;F&&(a.save(),a.fillStyle=m.getPattern(a,this,(0,E.getCurrentTransformInverse)(a),t.PathType.FILL),L=!0);const R=this.current.getClippedPathBoundingBox();this.contentVisible&&R!==null&&(this.pendingEOFill?(a.fill("evenodd"),this.pendingEOFill=!1):a.fill()),L&&a.restore(),s&&this.consumePath(R)}eoFill(){this.pendingEOFill=!0,this.fill()}fillStroke(){this.fill(!1),this.stroke(!1),this.consumePath()}eoFillStroke(){this.pendingEOFill=!0,this.fillStroke()}closeFillStroke(){this.closePath(),this.fillStroke()}closeEOFillStroke(){this.pendingEOFill=!0,this.closePath(),this.fillStroke()}endPath(){this.consumePath()}clip(){this.pendingClip=nt}eoClip(){this.pendingClip=at}beginText(){this.current.textMatrix=l.IDENTITY_MATRIX,this.current.textMatrixScale=1,this.current.x=this.current.lineX=0,this.current.y=this.current.lineY=0}endText(){const s=this.pendingTextPaths,a=this.ctx;if(s===void 0){a.beginPath();return}a.save(),a.beginPath();for(const m of s)a.setTransform(...m.transform),a.translate(m.x,m.y),m.addToPath(a,m.fontSize);a.restore(),a.clip(),a.beginPath(),delete this.pendingTextPaths}setCharSpacing(s){this.current.charSpacing=s}setWordSpacing(s){this.current.wordSpacing=s}setHScale(s){this.current.textHScale=s/100}setLeading(s){this.current.leading=-s}setFont(s,a){const m=this.commonObjs.get(s),F=this.current;if(!m)throw new Error(`Can't find font for ${s}`);if(F.fontMatrix=m.fontMatrix||l.FONT_IDENTITY_MATRIX,(F.fontMatrix[0]===0||F.fontMatrix[3]===0)&&(0,l.warn)("Invalid font matrix for font "+s),a<0?(a=-a,F.fontDirection=-1):F.fontDirection=1,this.current.font=m,this.current.fontSize=a,m.isType3Font)return;const L=m.loadedName||"sans-serif",R=m.systemFontInfo?.css||`"${L}", ${m.fallbackName}`;let q="normal";m.black?q="900":m.bold&&(q="bold");const mt=m.italic?"italic":"normal";let At=a;a<Ct?At=Ct:a>W&&(At=W),this.current.fontSizeScale=a/At,this.ctx.font=`${mt} ${q} ${At}px ${R}`}setTextRenderingMode(s){this.current.textRenderingMode=s}setTextRise(s){this.current.textRise=s}moveText(s,a){this.current.x=this.current.lineX+=s,this.current.y=this.current.lineY+=a}setLeadingMoveText(s,a){this.setLeading(-a),this.moveText(s,a)}setTextMatrix(s,a,m,F,L,R){this.current.textMatrix=[s,a,m,F,L,R],this.current.textMatrixScale=Math.hypot(s,a),this.current.x=this.current.lineX=0,this.current.y=this.current.lineY=0}nextLine(){this.moveText(0,this.current.leading)}paintChar(s,a,m,F){const L=this.ctx,R=this.current,q=R.font,mt=R.textRenderingMode,At=R.fontSize/R.fontSizeScale,Et=mt&l.TextRenderingMode.FILL_STROKE_MASK,Pt=!!(mt&l.TextRenderingMode.ADD_TO_PATH_FLAG),Rt=R.patternFill&&!q.missingFile;let Lt;(q.disableFontFace||Pt||Rt)&&(Lt=q.getPathGenerator(this.commonObjs,s)),q.disableFontFace||Rt?(L.save(),L.translate(a,m),L.beginPath(),Lt(L,At),F&&L.setTransform(...F),(Et===l.TextRenderingMode.FILL||Et===l.TextRenderingMode.FILL_STROKE)&&L.fill(),(Et===l.TextRenderingMode.STROKE||Et===l.TextRenderingMode.FILL_STROKE)&&L.stroke(),L.restore()):((Et===l.TextRenderingMode.FILL||Et===l.TextRenderingMode.FILL_STROKE)&&L.fillText(s,a,m),(Et===l.TextRenderingMode.STROKE||Et===l.TextRenderingMode.FILL_STROKE)&&L.strokeText(s,a,m)),Pt&&(this.pendingTextPaths||(this.pendingTextPaths=[])).push({transform:(0,E.getCurrentTransform)(L),x:a,y:m,fontSize:At,addToPath:Lt})}get isFontSubpixelAAEnabled(){const{context:s}=this.cachedCanvases.getCanvas("isFontSubpixelAAEnabled",10,10);s.scale(1.5,1),s.fillText("I",0,10);const a=s.getImageData(0,0,10,10).data;let m=!1;for(let F=3;F<a.length;F+=4)if(a[F]>0&&a[F]<255){m=!0;break}return(0,l.shadow)(this,"isFontSubpixelAAEnabled",m)}showText(s){const a=this.current,m=a.font;if(m.isType3Font)return this.showType3Text(s);const F=a.fontSize;if(F===0)return;const L=this.ctx,R=a.fontSizeScale,q=a.charSpacing,mt=a.wordSpacing,At=a.fontDirection,Et=a.textHScale*At,Pt=s.length,Rt=m.vertical,Lt=Rt?1:-1,ht=m.defaultVMetrics,dt=F*a.fontMatrix[0],_=a.textRenderingMode===l.TextRenderingMode.FILL&&!m.disableFontFace&&!a.patternFill;L.save(),L.transform(...a.textMatrix),L.translate(a.x,a.y+a.textRise),At>0?L.scale(Et,-1):L.scale(Et,1);let I;if(a.patternFill){L.save();const Tt=a.fillColor.getPattern(L,this,(0,E.getCurrentTransformInverse)(L),t.PathType.FILL);I=(0,E.getCurrentTransform)(L),L.restore(),L.fillStyle=Tt}let tt=a.lineWidth;const ut=a.textMatrixScale;if(ut===0||tt===0){const Tt=a.textRenderingMode&l.TextRenderingMode.FILL_STROKE_MASK;(Tt===l.TextRenderingMode.STROKE||Tt===l.TextRenderingMode.FILL_STROKE)&&(tt=this.getSinglePixelWidth())}else tt/=ut;if(R!==1&&(L.scale(R,R),tt/=R),L.lineWidth=tt,m.isInvalidPDFjsFont){const Tt=[];let et=0;for(const jt of s)Tt.push(jt.unicode),et+=jt.width;L.fillText(Tt.join(""),0,0),a.x+=et*dt*Et,L.restore(),this.compose();return}let wt=0,Ft;for(Ft=0;Ft<Pt;++Ft){const Tt=s[Ft];if(typeof Tt=="number"){wt+=Lt*Tt*F/1e3;continue}let et=!1;const jt=(Tt.isSpace?mt:0)+q,Bt=Tt.fontChar,he=Tt.accent;let oe,xe,Xt=Tt.width;if(Rt){const _e=Tt.vmetric||ht,Le=-(Tt.vmetric?_e[1]:Xt*.5)*dt,Mt=_e[2]*dt;Xt=_e?-_e[0]:Xt,oe=Le/R,xe=(wt+Mt)/R}else oe=wt/R,xe=0;if(m.remeasure&&Xt>0){const _e=L.measureText(Bt).width*1e3/F*R;if(Xt<_e&&this.isFontSubpixelAAEnabled){const Le=Xt/_e;et=!0,L.save(),L.scale(Le,1),oe/=Le}else Xt!==_e&&(oe+=(Xt-_e)/2e3*F/R)}if(this.contentVisible&&(Tt.isInFont||m.missingFile)){if(_&&!he)L.fillText(Bt,oe,xe);else if(this.paintChar(Bt,oe,xe,I),he){const _e=oe+F*he.offset.x/R,Le=xe-F*he.offset.y/R;this.paintChar(he.fontChar,_e,Le,I)}}const le=Rt?Xt*dt-jt*At:Xt*dt+jt*At;wt+=le,et&&L.restore()}Rt?a.y-=wt:a.x+=wt*Et,L.restore(),this.compose()}showType3Text(s){const a=this.ctx,m=this.current,F=m.font,L=m.fontSize,R=m.fontDirection,q=F.vertical?1:-1,mt=m.charSpacing,At=m.wordSpacing,Et=m.textHScale*R,Pt=m.fontMatrix||l.FONT_IDENTITY_MATRIX,Rt=s.length,Lt=m.textRenderingMode===l.TextRenderingMode.INVISIBLE;let ht,dt,_,I;if(!(Lt||L===0)){for(this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null,a.save(),a.transform(...m.textMatrix),a.translate(m.x,m.y),a.scale(Et,R),ht=0;ht<Rt;++ht){if(dt=s[ht],typeof dt=="number"){I=q*dt*L/1e3,this.ctx.translate(I,0),m.x+=I*Et;continue}const tt=(dt.isSpace?At:0)+mt,ut=F.charProcOperatorList[dt.operatorListId];if(!ut){(0,l.warn)(`Type3 character "${dt.operatorListId}" is not available.`);continue}this.contentVisible&&(this.processingType3=dt,this.save(),a.scale(L,L),a.transform(...Pt),this.executeOperatorList(ut),this.restore()),_=l.Util.applyTransform([dt.width,0],Pt)[0]*L+tt,a.translate(_,0),m.x+=_*Et}a.restore(),this.processingType3=null}}setCharWidth(s,a){}setCharWidthAndBounds(s,a,m,F,L,R){this.ctx.rect(m,F,L-m,R-F),this.ctx.clip(),this.endPath()}getColorN_Pattern(s){let a;if(s[0]==="TilingPattern"){const m=s[1],F=this.baseTransform||(0,E.getCurrentTransform)(this.ctx),L={createCanvasGraphics:R=>new ct(R,this.commonObjs,this.objs,this.canvasFactory,this.filterFactory,{optionalContentConfig:this.optionalContentConfig,markedContentStack:this.markedContentStack})};a=new t.TilingPattern(s,m,this.ctx,L,F)}else a=this._getPattern(s[1],s[2]);return a}setStrokeColorN(){this.current.strokeColor=this.getColorN_Pattern(arguments)}setFillColorN(){this.current.fillColor=this.getColorN_Pattern(arguments),this.current.patternFill=!0}setStrokeRGBColor(s,a,m){const F=l.Util.makeHexColor(s,a,m);this.ctx.strokeStyle=F,this.current.strokeColor=F}setFillRGBColor(s,a,m){const F=l.Util.makeHexColor(s,a,m);this.ctx.fillStyle=F,this.current.fillColor=F,this.current.patternFill=!1}_getPattern(s,a=null){let m;return this.cachedPatterns.has(s)?m=this.cachedPatterns.get(s):(m=(0,t.getShadingPattern)(this.getObject(s)),this.cachedPatterns.set(s,m)),a&&(m.matrix=a),m}shadingFill(s){if(!this.contentVisible)return;const a=this.ctx;this.save();const m=this._getPattern(s);a.fillStyle=m.getPattern(a,this,(0,E.getCurrentTransformInverse)(a),t.PathType.SHADING);const F=(0,E.getCurrentTransformInverse)(a);if(F){const{width:L,height:R}=a.canvas,[q,mt,At,Et]=l.Util.getAxialAlignedBoundingBox([0,0,L,R],F);this.ctx.fillRect(q,mt,At-q,Et-mt)}else this.ctx.fillRect(-1e10,-1e10,2e10,2e10);this.compose(this.current.getClippedPathBoundingBox()),this.restore()}beginInlineImage(){(0,l.unreachable)("Should not call beginInlineImage")}beginImageData(){(0,l.unreachable)("Should not call beginImageData")}paintFormXObjectBegin(s,a){if(this.contentVisible&&(this.save(),this.baseTransformStack.push(this.baseTransform),Array.isArray(s)&&s.length===6&&this.transform(...s),this.baseTransform=(0,E.getCurrentTransform)(this.ctx),a)){const m=a[2]-a[0],F=a[3]-a[1];this.ctx.rect(a[0],a[1],m,F),this.current.updateRectMinMax((0,E.getCurrentTransform)(this.ctx),a),this.clip(),this.endPath()}}paintFormXObjectEnd(){this.contentVisible&&(this.restore(),this.baseTransform=this.baseTransformStack.pop())}beginGroup(s){if(!this.contentVisible)return;this.save(),this.inSMaskMode&&(this.endSMaskMode(),this.current.activeSMask=null);const a=this.ctx;s.isolated||(0,l.info)("TODO: Support non-isolated groups."),s.knockout&&(0,l.warn)("Knockout groups not supported.");const m=(0,E.getCurrentTransform)(a);if(s.matrix&&a.transform(...s.matrix),!s.bbox)throw new Error("Bounding box is required.");let F=l.Util.getAxialAlignedBoundingBox(s.bbox,(0,E.getCurrentTransform)(a));const L=[0,0,a.canvas.width,a.canvas.height];F=l.Util.intersect(F,L)||[0,0,0,0];const R=Math.floor(F[0]),q=Math.floor(F[1]);let mt=Math.max(Math.ceil(F[2])-R,1),At=Math.max(Math.ceil(F[3])-q,1),Et=1,Pt=1;mt>T&&(Et=mt/T,mt=T),At>T&&(Pt=At/T,At=T),this.current.startNewPathAndClipBox([0,0,mt,At]);let Rt="groupAt"+this.groupLevel;s.smask&&(Rt+="_smask_"+this.smaskCounter++%2);const Lt=this.cachedCanvases.getCanvas(Rt,mt,At),ht=Lt.context;ht.scale(1/Et,1/Pt),ht.translate(-R,-q),ht.transform(...m),s.smask?this.smaskStack.push({canvas:Lt.canvas,context:ht,offsetX:R,offsetY:q,scaleX:Et,scaleY:Pt,subtype:s.smask.subtype,backdrop:s.smask.backdrop,transferMap:s.smask.transferMap||null,startTransformInverse:null}):(a.setTransform(1,0,0,1,0,0),a.translate(R,q),a.scale(Et,Pt),a.save()),o(a,ht),this.ctx=ht,this.setGState([["BM","source-over"],["ca",1],["CA",1]]),this.groupStack.push(a),this.groupLevel++}endGroup(s){if(!this.contentVisible)return;this.groupLevel--;const a=this.ctx,m=this.groupStack.pop();if(this.ctx=m,this.ctx.imageSmoothingEnabled=!1,s.smask)this.tempSMask=this.smaskStack.pop(),this.restore();else{this.ctx.restore();const F=(0,E.getCurrentTransform)(this.ctx);this.restore(),this.ctx.save(),this.ctx.setTransform(...F);const L=l.Util.getAxialAlignedBoundingBox([0,0,a.canvas.width,a.canvas.height],F);this.ctx.drawImage(a.canvas,0,0),this.ctx.restore(),this.compose(L)}}beginAnnotation(s,a,m,F,L){if(J(this,vt,Vi).call(this),r(this.ctx),this.ctx.save(),this.save(),this.baseTransform&&this.ctx.setTransform(...this.baseTransform),Array.isArray(a)&&a.length===4){const R=a[2]-a[0],q=a[3]-a[1];if(L&&this.annotationCanvasMap){m=m.slice(),m[4]-=a[0],m[5]-=a[1],a=a.slice(),a[0]=a[1]=0,a[2]=R,a[3]=q;const[mt,At]=l.Util.singularValueDecompose2dScale((0,E.getCurrentTransform)(this.ctx)),{viewportScale:Et}=this,Pt=Math.ceil(R*this.outputScaleX*Et),Rt=Math.ceil(q*this.outputScaleY*Et);this.annotationCanvas=this.canvasFactory.create(Pt,Rt);const{canvas:Lt,context:ht}=this.annotationCanvas;this.annotationCanvasMap.set(s,Lt),this.annotationCanvas.savedCtx=this.ctx,this.ctx=ht,this.ctx.save(),this.ctx.setTransform(mt,0,0,-At,0,q*At),r(this.ctx)}else r(this.ctx),this.ctx.rect(a[0],a[1],R,q),this.ctx.clip(),this.endPath()}this.current=new A(this.ctx.canvas.width,this.ctx.canvas.height),this.transform(...m),this.transform(...F)}endAnnotation(){this.annotationCanvas&&(this.ctx.restore(),J(this,vt,$i).call(this),this.ctx=this.annotationCanvas.savedCtx,delete this.annotationCanvas.savedCtx,delete this.annotationCanvas)}paintImageMaskXObject(s){if(!this.contentVisible)return;const a=s.count;s=this.getObject(s.data,s),s.count=a;const m=this.ctx,F=this.processingType3;if(F&&(F.compiled===void 0&&(F.compiled=g(s)),F.compiled)){F.compiled(m);return}const L=this._createMaskCanvas(s),R=L.canvas;m.save(),m.setTransform(1,0,0,1,0,0),m.drawImage(R,L.offsetX,L.offsetY),m.restore(),this.compose()}paintImageMaskXObjectRepeat(s,a,m=0,F=0,L,R){if(!this.contentVisible)return;s=this.getObject(s.data,s);const q=this.ctx;q.save();const mt=(0,E.getCurrentTransform)(q);q.transform(a,m,F,L,0,0);const At=this._createMaskCanvas(s);q.setTransform(1,0,0,1,At.offsetX-mt[4],At.offsetY-mt[5]);for(let Et=0,Pt=R.length;Et<Pt;Et+=2){const Rt=l.Util.transform(mt,[a,m,F,L,R[Et],R[Et+1]]),[Lt,ht]=l.Util.applyTransform([0,0],Rt);q.drawImage(At.canvas,Lt,ht)}q.restore(),this.compose()}paintImageMaskXObjectGroup(s){if(!this.contentVisible)return;const a=this.ctx,m=this.current.fillColor,F=this.current.patternFill;for(const L of s){const{data:R,width:q,height:mt,transform:At}=L,Et=this.cachedCanvases.getCanvas("maskCanvas",q,mt),Pt=Et.context;Pt.save();const Rt=this.getObject(R,L);w(Pt,Rt),Pt.globalCompositeOperation="source-in",Pt.fillStyle=F?m.getPattern(Pt,this,(0,E.getCurrentTransformInverse)(a),t.PathType.FILL):m,Pt.fillRect(0,0,q,mt),Pt.restore(),a.save(),a.transform(...At),a.scale(1,-1),v(a,Et.canvas,0,0,q,mt,0,-1,1,1),a.restore()}this.compose()}paintImageXObject(s){if(!this.contentVisible)return;const a=this.getObject(s);if(!a){(0,l.warn)("Dependent image isn't ready yet");return}this.paintInlineImageXObject(a)}paintImageXObjectRepeat(s,a,m,F){if(!this.contentVisible)return;const L=this.getObject(s);if(!L){(0,l.warn)("Dependent image isn't ready yet");return}const R=L.width,q=L.height,mt=[];for(let At=0,Et=F.length;At<Et;At+=2)mt.push({transform:[a,0,0,m,F[At],F[At+1]],x:0,y:0,w:R,h:q});this.paintInlineImageXObjectGroup(L,mt)}applyTransferMapsToCanvas(s){return this.current.transferMaps!=="none"&&(s.filter=this.current.transferMaps,s.drawImage(s.canvas,0,0),s.filter="none"),s.canvas}applyTransferMapsToBitmap(s){if(this.current.transferMaps==="none")return s.bitmap;const{bitmap:a,width:m,height:F}=s,L=this.cachedCanvases.getCanvas("inlineImage",m,F),R=L.context;return R.filter=this.current.transferMaps,R.drawImage(a,0,0),R.filter="none",L.canvas}paintInlineImageXObject(s){if(!this.contentVisible)return;const a=s.width,m=s.height,F=this.ctx;if(this.save(),!l.isNodeJS){const{filter:q}=F;q!=="none"&&q!==""&&(F.filter="none")}F.scale(1/a,-1/m);let L;if(s.bitmap)L=this.applyTransferMapsToBitmap(s);else if(typeof HTMLElement=="function"&&s instanceof HTMLElement||!s.data)L=s;else{const mt=this.cachedCanvases.getCanvas("inlineImage",a,m).context;O(mt,s),L=this.applyTransferMapsToCanvas(mt)}const R=this._scaleImage(L,(0,E.getCurrentTransformInverse)(F));F.imageSmoothingEnabled=P((0,E.getCurrentTransform)(F),s.interpolate),v(F,R.img,0,0,R.paintWidth,R.paintHeight,0,-m,a,m),this.compose(),this.restore()}paintInlineImageXObjectGroup(s,a){if(!this.contentVisible)return;const m=this.ctx;let F;if(s.bitmap)F=s.bitmap;else{const L=s.width,R=s.height,mt=this.cachedCanvases.getCanvas("inlineImage",L,R).context;O(mt,s),F=this.applyTransferMapsToCanvas(mt)}for(const L of a)m.save(),m.transform(...L.transform),m.scale(1,-1),v(m,F,L.x,L.y,L.w,L.h,0,-1,1,1),m.restore();this.compose()}paintSolidColorImageMask(){this.contentVisible&&(this.ctx.fillRect(0,0,1,1),this.compose())}markPoint(s){}markPointProps(s,a){}beginMarkedContent(s){this.markedContentStack.push({visible:!0})}beginMarkedContentProps(s,a){s==="OC"?this.markedContentStack.push({visible:this.optionalContentConfig.isVisible(a)}):this.markedContentStack.push({visible:!0}),this.contentVisible=this.isContentVisible()}endMarkedContent(){this.markedContentStack.pop(),this.contentVisible=this.isContentVisible()}beginCompat(){}endCompat(){}consumePath(s){const a=this.current.isEmptyClip();this.pendingClip&&this.current.updateClipFromPath(),this.pendingClip||this.compose(s);const m=this.ctx;this.pendingClip&&(a||(this.pendingClip===at?m.clip("evenodd"):m.clip()),this.pendingClip=null),this.current.startNewPathAndClipBox(this.current.clipBox),m.beginPath()}getSinglePixelWidth(){if(!this._cachedGetSinglePixelWidth){const s=(0,E.getCurrentTransform)(this.ctx);if(s[1]===0&&s[2]===0)this._cachedGetSinglePixelWidth=1/Math.min(Math.abs(s[0]),Math.abs(s[3]));else{const a=Math.abs(s[0]*s[3]-s[2]*s[1]),m=Math.hypot(s[0],s[2]),F=Math.hypot(s[1],s[3]);this._cachedGetSinglePixelWidth=Math.max(m,F)/a}}return this._cachedGetSinglePixelWidth}getScaleForStroking(){if(this._cachedScaleForStroking[0]===-1){const{lineWidth:s}=this.current,{a,b:m,c:F,d:L}=this.ctx.getTransform();let R,q;if(m===0&&F===0){const mt=Math.abs(a),At=Math.abs(L);if(mt===At)if(s===0)R=q=1/mt;else{const Et=mt*s;R=q=Et<1?1/Et:1}else if(s===0)R=1/mt,q=1/At;else{const Et=mt*s,Pt=At*s;R=Et<1?1/Et:1,q=Pt<1?1/Pt:1}}else{const mt=Math.abs(a*L-m*F),At=Math.hypot(a,m),Et=Math.hypot(F,L);if(s===0)R=Et/mt,q=At/mt;else{const Pt=s*mt;R=Et>Pt?Et/Pt:1,q=At>Pt?At/Pt:1}}this._cachedScaleForStroking[0]=R,this._cachedScaleForStroking[1]=q}return this._cachedScaleForStroking}rescaleAndStroke(s){const{ctx:a}=this,{lineWidth:m}=this.current,[F,L]=this.getScaleForStroking();if(a.lineWidth=m||1,F===1&&L===1){a.stroke();return}const R=a.getLineDash();if(s&&a.save(),a.scale(F,L),R.length>0){const q=Math.max(F,L);a.setLineDash(R.map(mt=>mt/q)),a.lineDashOffset/=q}a.stroke(),s&&a.restore()}isContentVisible(){for(let s=this.markedContentStack.length-1;s>=0;s--)if(!this.markedContentStack[s].visible)return!1;return!0}};vt=new WeakSet,Vi=function(){for(;this.stateStack.length||this.inSMaskMode;)this.restore();this.ctx.restore(),this.transparentCanvas&&(this.ctx=this.compositeCtx,this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.drawImage(this.transparentCanvas,0,0),this.ctx.restore(),this.transparentCanvas=null)},$i=function(){if(this.pageColors){const s=this.filterFactory.addHCMFilter(this.pageColors.foreground,this.pageColors.background);if(s!=="none"){const a=this.ctx.filter;this.ctx.filter=s,this.ctx.drawImage(this.ctx.canvas,0,0),this.ctx.filter=a}}};let K=ct;u.CanvasGraphics=K;for(const k in l.OPS)K.prototype[k]!==void 0&&(K.prototype[l.OPS[k]]=K.prototype[k])}),((c,u,_t)=>{Object.defineProperty(u,"__esModule",{value:!0}),u.TilingPattern=u.PathType=void 0,u.getShadingPattern=y;var l=_t(1),E=_t(6);const t={FILL:"Fill",STROKE:"Stroke",SHADING:"Shading"};u.PathType=t;function Z(g,A){if(!A)return;const O=A[2]-A[0],w=A[3]-A[1],o=new Path2D;o.rect(A[0],A[1],O,w),g.clip(o)}class Ct{constructor(){this.constructor===Ct&&(0,l.unreachable)("Cannot initialize BaseShadingPattern.")}getPattern(){(0,l.unreachable)("Abstract method `getPattern` called.")}}class W extends Ct{constructor(A){super(),this._type=A[1],this._bbox=A[2],this._colorStops=A[3],this._p0=A[4],this._p1=A[5],this._r0=A[6],this._r1=A[7],this.matrix=null}_createGradient(A){let O;this._type==="axial"?O=A.createLinearGradient(this._p0[0],this._p0[1],this._p1[0],this._p1[1]):this._type==="radial"&&(O=A.createRadialGradient(this._p0[0],this._p0[1],this._r0,this._p1[0],this._p1[1],this._r1));for(const w of this._colorStops)O.addColorStop(w[0],w[1]);return O}getPattern(A,O,w,o){let r;if(o===t.STROKE||o===t.FILL){const n=O.current.getClippedPathBoundingBox(o,(0,E.getCurrentTransform)(A))||[0,0,0,0],S=Math.ceil(n[2]-n[0])||1,p=Math.ceil(n[3]-n[1])||1,G=O.cachedCanvases.getCanvas("pattern",S,p,!0),h=G.context;h.clearRect(0,0,h.canvas.width,h.canvas.height),h.beginPath(),h.rect(0,0,h.canvas.width,h.canvas.height),h.translate(-n[0],-n[1]),w=l.Util.transform(w,[1,0,0,1,n[0],n[1]]),h.transform(...O.baseTransform),this.matrix&&h.transform(...this.matrix),Z(h,this._bbox),h.fillStyle=this._createGradient(h),h.fill(),r=A.createPattern(G.canvas,"no-repeat");const P=new DOMMatrix(w);r.setTransform(P)}else Z(A,this._bbox),r=this._createGradient(A);return r}}function T(g,A,O,w,o,r,n,S){const p=A.coords,G=A.colors,h=g.data,P=g.width*4;let $;p[O+1]>p[w+1]&&($=O,O=w,w=$,$=r,r=n,n=$),p[w+1]>p[o+1]&&($=w,w=o,o=$,$=n,n=S,S=$),p[O+1]>p[w+1]&&($=O,O=w,w=$,$=r,r=n,n=$);const bt=(p[O]+A.offsetX)*A.scaleX,nt=(p[O+1]+A.offsetY)*A.scaleY,at=(p[w]+A.offsetX)*A.scaleX,K=(p[w+1]+A.offsetY)*A.scaleY,vt=(p[o]+A.offsetX)*A.scaleX,N=(p[o+1]+A.offsetY)*A.scaleY;if(nt>=N)return;const Q=G[r],ct=G[r+1],k=G[r+2],s=G[n],a=G[n+1],m=G[n+2],F=G[S],L=G[S+1],R=G[S+2],q=Math.round(nt),mt=Math.round(N);let At,Et,Pt,Rt,Lt,ht,dt,_;for(let I=q;I<=mt;I++){if(I<K){const Tt=I<nt?0:(nt-I)/(nt-K);At=bt-(bt-at)*Tt,Et=Q-(Q-s)*Tt,Pt=ct-(ct-a)*Tt,Rt=k-(k-m)*Tt}else{let Tt;I>N?Tt=1:K===N?Tt=0:Tt=(K-I)/(K-N),At=at-(at-vt)*Tt,Et=s-(s-F)*Tt,Pt=a-(a-L)*Tt,Rt=m-(m-R)*Tt}let tt;I<nt?tt=0:I>N?tt=1:tt=(nt-I)/(nt-N),Lt=bt-(bt-vt)*tt,ht=Q-(Q-F)*tt,dt=ct-(ct-L)*tt,_=k-(k-R)*tt;const ut=Math.round(Math.min(At,Lt)),wt=Math.round(Math.max(At,Lt));let Ft=P*I+ut*4;for(let Tt=ut;Tt<=wt;Tt++)tt=(At-Tt)/(At-Lt),tt<0?tt=0:tt>1&&(tt=1),h[Ft++]=Et-(Et-ht)*tt|0,h[Ft++]=Pt-(Pt-dt)*tt|0,h[Ft++]=Rt-(Rt-_)*tt|0,h[Ft++]=255}}function d(g,A,O){const w=A.coords,o=A.colors;let r,n;switch(A.type){case"lattice":const S=A.verticesPerRow,p=Math.floor(w.length/S)-1,G=S-1;for(r=0;r<p;r++){let h=r*S;for(let P=0;P<G;P++,h++)T(g,O,w[h],w[h+1],w[h+S],o[h],o[h+1],o[h+S]),T(g,O,w[h+S+1],w[h+1],w[h+S],o[h+S+1],o[h+1],o[h+S])}break;case"triangles":for(r=0,n=w.length;r<n;r+=3)T(g,O,w[r],w[r+1],w[r+2],o[r],o[r+1],o[r+2]);break;default:throw new Error("illegal figure")}}class H extends Ct{constructor(A){super(),this._coords=A[2],this._colors=A[3],this._figures=A[4],this._bounds=A[5],this._bbox=A[7],this._background=A[8],this.matrix=null}_createMeshCanvas(A,O,w){const S=Math.floor(this._bounds[0]),p=Math.floor(this._bounds[1]),G=Math.ceil(this._bounds[2])-S,h=Math.ceil(this._bounds[3])-p,P=Math.min(Math.ceil(Math.abs(G*A[0]*1.1)),3e3),$=Math.min(Math.ceil(Math.abs(h*A[1]*1.1)),3e3),bt=G/P,nt=h/$,at={coords:this._coords,colors:this._colors,offsetX:-S,offsetY:-p,scaleX:1/bt,scaleY:1/nt},K=P+4,vt=$+4,N=w.getCanvas("mesh",K,vt,!1),Q=N.context,ct=Q.createImageData(P,$);if(O){const s=ct.data;for(let a=0,m=s.length;a<m;a+=4)s[a]=O[0],s[a+1]=O[1],s[a+2]=O[2],s[a+3]=255}for(const s of this._figures)d(ct,s,at);return Q.putImageData(ct,2,2),{canvas:N.canvas,offsetX:S-2*bt,offsetY:p-2*nt,scaleX:bt,scaleY:nt}}getPattern(A,O,w,o){Z(A,this._bbox);let r;if(o===t.SHADING)r=l.Util.singularValueDecompose2dScale((0,E.getCurrentTransform)(A));else if(r=l.Util.singularValueDecompose2dScale(O.baseTransform),this.matrix){const S=l.Util.singularValueDecompose2dScale(this.matrix);r=[r[0]*S[0],r[1]*S[1]]}const n=this._createMeshCanvas(r,o===t.SHADING?null:this._background,O.cachedCanvases);return o!==t.SHADING&&(A.setTransform(...O.baseTransform),this.matrix&&A.transform(...this.matrix)),A.translate(n.offsetX,n.offsetY),A.scale(n.scaleX,n.scaleY),A.createPattern(n.canvas,"no-repeat")}}class j extends Ct{getPattern(){return"hotpink"}}function y(g){switch(g[0]){case"RadialAxial":return new W(g);case"Mesh":return new H(g);case"Dummy":return new j}throw new Error(`Unknown IR type: ${g[0]}`)}const b={COLORED:1,UNCOLORED:2},v=class v{constructor(A,O,w,o,r){this.operatorList=A[2],this.matrix=A[3]||[1,0,0,1,0,0],this.bbox=A[4],this.xstep=A[5],this.ystep=A[6],this.paintType=A[7],this.tilingType=A[8],this.color=O,this.ctx=w,this.canvasGraphicsFactory=o,this.baseTransform=r}createPatternCanvas(A){const O=this.operatorList,w=this.bbox,o=this.xstep,r=this.ystep,n=this.paintType,S=this.tilingType,p=this.color,G=this.canvasGraphicsFactory;(0,l.info)("TilingType: "+S);const h=w[0],P=w[1],$=w[2],bt=w[3],nt=l.Util.singularValueDecompose2dScale(this.matrix),at=l.Util.singularValueDecompose2dScale(this.baseTransform),K=[nt[0]*at[0],nt[1]*at[1]],vt=this.getSizeAndScale(o,this.ctx.canvas.width,K[0]),N=this.getSizeAndScale(r,this.ctx.canvas.height,K[1]),Q=A.cachedCanvases.getCanvas("pattern",vt.size,N.size,!0),ct=Q.context,k=G.createCanvasGraphics(ct);k.groupLevel=A.groupLevel,this.setFillAndStrokeStyleToContext(k,n,p);let s=h,a=P,m=$,F=bt;return h<0&&(s=0,m+=Math.abs(h)),P<0&&(a=0,F+=Math.abs(P)),ct.translate(-(vt.scale*s),-(N.scale*a)),k.transform(vt.scale,0,0,N.scale,0,0),ct.save(),this.clipBbox(k,s,a,m,F),k.baseTransform=(0,E.getCurrentTransform)(k.ctx),k.executeOperatorList(O),k.endDrawing(),{canvas:Q.canvas,scaleX:vt.scale,scaleY:N.scale,offsetX:s,offsetY:a}}getSizeAndScale(A,O,w){A=Math.abs(A);const o=Math.max(v.MAX_PATTERN_SIZE,O);let r=Math.ceil(A*w);return r>=o?r=o:w=r/A,{scale:w,size:r}}clipBbox(A,O,w,o,r){const n=o-O,S=r-w;A.ctx.rect(O,w,n,S),A.current.updateRectMinMax((0,E.getCurrentTransform)(A.ctx),[O,w,o,r]),A.clip(),A.endPath()}setFillAndStrokeStyleToContext(A,O,w){const o=A.ctx,r=A.current;switch(O){case b.COLORED:const n=this.ctx;o.fillStyle=n.fillStyle,o.strokeStyle=n.strokeStyle,r.fillColor=n.fillStyle,r.strokeColor=n.strokeStyle;break;case b.UNCOLORED:const S=l.Util.makeHexColor(w[0],w[1],w[2]);o.fillStyle=S,o.strokeStyle=S,r.fillColor=S,r.strokeColor=S;break;default:throw new l.FormatError(`Unsupported paint type: ${O}`)}}getPattern(A,O,w,o){let r=w;o!==t.SHADING&&(r=l.Util.transform(r,O.baseTransform),this.matrix&&(r=l.Util.transform(r,this.matrix)));const n=this.createPatternCanvas(O);let S=new DOMMatrix(r);S=S.translate(n.offsetX,n.offsetY),S=S.scale(1/n.scaleX,1/n.scaleY);const p=A.createPattern(n.canvas,"repeat");return p.setTransform(S),p}};$e(v,"MAX_PATTERN_SIZE",3e3);let M=v;u.TilingPattern=M}),((c,u,_t)=>{Object.defineProperty(u,"__esModule",{value:!0}),u.convertBlackAndWhiteToRGBA=t,u.convertToRGBA=E,u.grayToRGBA=Ct;var l=_t(1);function E(W){switch(W.kind){case l.ImageKind.GRAYSCALE_1BPP:return t(W);case l.ImageKind.RGB_24BPP:return Z(W)}return null}function t({src:W,srcPos:T=0,dest:d,width:H,height:j,nonBlackColor:y=4294967295,inverseDecode:b=!1}){const M=l.FeatureTest.isLittleEndian?4278190080:255,[v,g]=b?[y,M]:[M,y],A=H>>3,O=H&7,w=W.length;d=new Uint32Array(d.buffer);let o=0;for(let r=0;r<j;r++){for(const S=T+A;T<S;T++){const p=T<w?W[T]:255;d[o++]=p&128?g:v,d[o++]=p&64?g:v,d[o++]=p&32?g:v,d[o++]=p&16?g:v,d[o++]=p&8?g:v,d[o++]=p&4?g:v,d[o++]=p&2?g:v,d[o++]=p&1?g:v}if(O===0)continue;const n=T<w?W[T++]:255;for(let S=0;S<O;S++)d[o++]=n&1<<7-S?g:v}return{srcPos:T,destPos:o}}function Z({src:W,srcPos:T=0,dest:d,destPos:H=0,width:j,height:y}){let b=0;const M=W.length>>2,v=new Uint32Array(W.buffer,T,M);if(l.FeatureTest.isLittleEndian){for(;b<M-2;b+=3,H+=4){const g=v[b],A=v[b+1],O=v[b+2];d[H]=g|4278190080,d[H+1]=g>>>24|A<<8|4278190080,d[H+2]=A>>>16|O<<16|4278190080,d[H+3]=O>>>8|4278190080}for(let g=b*4,A=W.length;g<A;g+=3)d[H++]=W[g]|W[g+1]<<8|W[g+2]<<16|4278190080}else{for(;b<M-2;b+=3,H+=4){const g=v[b],A=v[b+1],O=v[b+2];d[H]=g|255,d[H+1]=g<<24|A>>>8|255,d[H+2]=A<<16|O>>>16|255,d[H+3]=O<<8|255}for(let g=b*4,A=W.length;g<A;g+=3)d[H++]=W[g]<<24|W[g+1]<<16|W[g+2]<<8|255}return{srcPos:T,destPos:H}}function Ct(W,T){if(l.FeatureTest.isLittleEndian)for(let d=0,H=W.length;d<H;d++)T[d]=W[d]*65793|4278190080;else for(let d=0,H=W.length;d<H;d++)T[d]=W[d]*16843008|255}}),((c,u)=>{Object.defineProperty(u,"__esModule",{value:!0}),u.GlobalWorkerOptions=void 0;const _t=Object.create(null);u.GlobalWorkerOptions=_t,_t.workerPort=null,_t.workerSrc=""}),((c,u,_t)=>{var W,Br,jr,ci;Object.defineProperty(u,"__esModule",{value:!0}),u.MessageHandler=void 0;var l=_t(1);const E={DATA:1,ERROR:2},t={CANCEL:1,CANCEL_COMPLETE:2,CLOSE:3,ENQUEUE:4,ERROR:5,PULL:6,PULL_COMPLETE:7,START_COMPLETE:8};function Z(j){switch(j instanceof Error||typeof j=="object"&&j!==null||(0,l.unreachable)('wrapReason: Expected "reason" to be a (possibly cloned) Error.'),j.name){case"AbortException":return new l.AbortException(j.message);case"MissingPDFException":return new l.MissingPDFException(j.message);case"PasswordException":return new l.PasswordException(j.message,j.code);case"UnexpectedResponseException":return new l.UnexpectedResponseException(j.message,j.status);case"UnknownErrorException":return new l.UnknownErrorException(j.message,j.details);default:return new l.UnknownErrorException(j.message,j.toString())}}class Ct{constructor(y,b,M){pt(this,W);this.sourceName=y,this.targetName=b,this.comObj=M,this.callbackId=1,this.streamId=1,this.streamSinks=Object.create(null),this.streamControllers=Object.create(null),this.callbackCapabilities=Object.create(null),this.actionHandler=Object.create(null),this._onComObjOnMessage=v=>{const g=v.data;if(g.targetName!==this.sourceName)return;if(g.stream){J(this,W,jr).call(this,g);return}if(g.callback){const O=g.callbackId,w=this.callbackCapabilities[O];if(!w)throw new Error(`Cannot resolve callback ${O}`);if(delete this.callbackCapabilities[O],g.callback===E.DATA)w.resolve(g.data);else if(g.callback===E.ERROR)w.reject(Z(g.reason));else throw new Error("Unexpected callback case");return}const A=this.actionHandler[g.action];if(!A)throw new Error(`Unknown action from worker: ${g.action}`);if(g.callbackId){const O=this.sourceName,w=g.sourceName;new Promise(function(o){o(A(g.data))}).then(function(o){M.postMessage({sourceName:O,targetName:w,callback:E.DATA,callbackId:g.callbackId,data:o})},function(o){M.postMessage({sourceName:O,targetName:w,callback:E.ERROR,callbackId:g.callbackId,reason:Z(o)})});return}if(g.streamId){J(this,W,Br).call(this,g);return}A(g.data)},M.addEventListener("message",this._onComObjOnMessage)}on(y,b){const M=this.actionHandler;if(M[y])throw new Error(`There is already an actionName called "${y}"`);M[y]=b}send(y,b,M){this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:y,data:b},M)}sendWithPromise(y,b,M){const v=this.callbackId++,g=new l.PromiseCapability;this.callbackCapabilities[v]=g;try{this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:y,callbackId:v,data:b},M)}catch(A){g.reject(A)}return g.promise}sendWithStream(y,b,M,v){const g=this.streamId++,A=this.sourceName,O=this.targetName,w=this.comObj;return new ReadableStream({start:o=>{const r=new l.PromiseCapability;return this.streamControllers[g]={controller:o,startCall:r,pullCall:null,cancelCall:null,isClosed:!1},w.postMessage({sourceName:A,targetName:O,action:y,streamId:g,data:b,desiredSize:o.desiredSize},v),r.promise},pull:o=>{const r=new l.PromiseCapability;return this.streamControllers[g].pullCall=r,w.postMessage({sourceName:A,targetName:O,stream:t.PULL,streamId:g,desiredSize:o.desiredSize}),r.promise},cancel:o=>{(0,l.assert)(o instanceof Error,"cancel must have a valid reason");const r=new l.PromiseCapability;return this.streamControllers[g].cancelCall=r,this.streamControllers[g].isClosed=!0,w.postMessage({sourceName:A,targetName:O,stream:t.CANCEL,streamId:g,reason:Z(o)}),r.promise}},M)}destroy(){this.comObj.removeEventListener("message",this._onComObjOnMessage)}}W=new WeakSet,Br=function(y){const b=y.streamId,M=this.sourceName,v=y.sourceName,g=this.comObj,A=this,O=this.actionHandler[y.action],w={enqueue(o,r=1,n){if(this.isCancelled)return;const S=this.desiredSize;this.desiredSize-=r,S>0&&this.desiredSize<=0&&(this.sinkCapability=new l.PromiseCapability,this.ready=this.sinkCapability.promise),g.postMessage({sourceName:M,targetName:v,stream:t.ENQUEUE,streamId:b,chunk:o},n)},close(){this.isCancelled||(this.isCancelled=!0,g.postMessage({sourceName:M,targetName:v,stream:t.CLOSE,streamId:b}),delete A.streamSinks[b])},error(o){(0,l.assert)(o instanceof Error,"error must have a valid reason"),!this.isCancelled&&(this.isCancelled=!0,g.postMessage({sourceName:M,targetName:v,stream:t.ERROR,streamId:b,reason:Z(o)}))},sinkCapability:new l.PromiseCapability,onPull:null,onCancel:null,isCancelled:!1,desiredSize:y.desiredSize,ready:null};w.sinkCapability.resolve(),w.ready=w.sinkCapability.promise,this.streamSinks[b]=w,new Promise(function(o){o(O(y.data,w))}).then(function(){g.postMessage({sourceName:M,targetName:v,stream:t.START_COMPLETE,streamId:b,success:!0})},function(o){g.postMessage({sourceName:M,targetName:v,stream:t.START_COMPLETE,streamId:b,reason:Z(o)})})},jr=function(y){const b=y.streamId,M=this.sourceName,v=y.sourceName,g=this.comObj,A=this.streamControllers[b],O=this.streamSinks[b];switch(y.stream){case t.START_COMPLETE:y.success?A.startCall.resolve():A.startCall.reject(Z(y.reason));break;case t.PULL_COMPLETE:y.success?A.pullCall.resolve():A.pullCall.reject(Z(y.reason));break;case t.PULL:if(!O){g.postMessage({sourceName:M,targetName:v,stream:t.PULL_COMPLETE,streamId:b,success:!0});break}O.desiredSize<=0&&y.desiredSize>0&&O.sinkCapability.resolve(),O.desiredSize=y.desiredSize,new Promise(function(w){w(O.onPull?.())}).then(function(){g.postMessage({sourceName:M,targetName:v,stream:t.PULL_COMPLETE,streamId:b,success:!0})},function(w){g.postMessage({sourceName:M,targetName:v,stream:t.PULL_COMPLETE,streamId:b,reason:Z(w)})});break;case t.ENQUEUE:if((0,l.assert)(A,"enqueue should have stream controller"),A.isClosed)break;A.controller.enqueue(y.chunk);break;case t.CLOSE:if((0,l.assert)(A,"close should have stream controller"),A.isClosed)break;A.isClosed=!0,A.controller.close(),J(this,W,ci).call(this,A,b);break;case t.ERROR:(0,l.assert)(A,"error should have stream controller"),A.controller.error(Z(y.reason)),J(this,W,ci).call(this,A,b);break;case t.CANCEL_COMPLETE:y.success?A.cancelCall.resolve():A.cancelCall.reject(Z(y.reason)),J(this,W,ci).call(this,A,b);break;case t.CANCEL:if(!O)break;new Promise(function(w){w(O.onCancel?.(Z(y.reason)))}).then(function(){g.postMessage({sourceName:M,targetName:v,stream:t.CANCEL_COMPLETE,streamId:b,success:!0})},function(w){g.postMessage({sourceName:M,targetName:v,stream:t.CANCEL_COMPLETE,streamId:b,reason:Z(w)})}),O.sinkCapability.reject(Z(y.reason)),O.isCancelled=!0,delete this.streamSinks[b];break;default:throw new Error("Unexpected stream case")}},ci=async function(y,b){await Promise.allSettled([y.startCall?.promise,y.pullCall?.promise,y.cancelCall?.promise]),delete this.streamControllers[b]},u.MessageHandler=Ct}),((c,u,_t)=>{var t,Z;Object.defineProperty(u,"__esModule",{value:!0}),u.Metadata=void 0;var l=_t(1);class E{constructor({parsedData:W,rawData:T}){pt(this,t);pt(this,Z);gt(this,t,W),gt(this,Z,T)}getRaw(){return e(this,Z)}get(W){return e(this,t).get(W)??null}getAll(){return(0,l.objectFromMap)(e(this,t))}has(W){return e(this,t).has(W)}}t=new WeakMap,Z=new WeakMap,u.Metadata=E}),((c,u,_t)=>{var W,T,d,H,j,y,qi;Object.defineProperty(u,"__esModule",{value:!0}),u.OptionalContentConfig=void 0;var l=_t(1),E=_t(8);const t=Symbol("INTERNAL");class Z{constructor(v,g){pt(this,W,!0);this.name=v,this.intent=g}get visible(){return e(this,W)}_setVisible(v,g){v!==t&&(0,l.unreachable)("Internal method `_setVisible` called."),gt(this,W,g)}}W=new WeakMap;class Ct{constructor(v){pt(this,y);pt(this,T,null);pt(this,d,new Map);pt(this,H,null);pt(this,j,null);if(this.name=null,this.creator=null,v!==null){this.name=v.name,this.creator=v.creator,gt(this,j,v.order);for(const g of v.groups)e(this,d).set(g.id,new Z(g.name,g.intent));if(v.baseState==="OFF")for(const g of e(this,d).values())g._setVisible(t,!1);for(const g of v.on)e(this,d).get(g)._setVisible(t,!0);for(const g of v.off)e(this,d).get(g)._setVisible(t,!1);gt(this,H,this.getHash())}}isVisible(v){if(e(this,d).size===0)return!0;if(!v)return(0,l.warn)("Optional content group not defined."),!0;if(v.type==="OCG")return e(this,d).has(v.id)?e(this,d).get(v.id).visible:((0,l.warn)(`Optional content group not found: ${v.id}`),!0);if(v.type==="OCMD"){if(v.expression)return J(this,y,qi).call(this,v.expression);if(!v.policy||v.policy==="AnyOn"){for(const g of v.ids){if(!e(this,d).has(g))return(0,l.warn)(`Optional content group not found: ${g}`),!0;if(e(this,d).get(g).visible)return!0}return!1}else if(v.policy==="AllOn"){for(const g of v.ids){if(!e(this,d).has(g))return(0,l.warn)(`Optional content group not found: ${g}`),!0;if(!e(this,d).get(g).visible)return!1}return!0}else if(v.policy==="AnyOff"){for(const g of v.ids){if(!e(this,d).has(g))return(0,l.warn)(`Optional content group not found: ${g}`),!0;if(!e(this,d).get(g).visible)return!0}return!1}else if(v.policy==="AllOff"){for(const g of v.ids){if(!e(this,d).has(g))return(0,l.warn)(`Optional content group not found: ${g}`),!0;if(e(this,d).get(g).visible)return!1}return!0}return(0,l.warn)(`Unknown optional content policy ${v.policy}.`),!0}return(0,l.warn)(`Unknown group type ${v.type}.`),!0}setVisibility(v,g=!0){if(!e(this,d).has(v)){(0,l.warn)(`Optional content group not found: ${v}`);return}e(this,d).get(v)._setVisible(t,!!g),gt(this,T,null)}get hasInitialVisibility(){return e(this,H)===null||this.getHash()===e(this,H)}getOrder(){return e(this,d).size?e(this,j)?e(this,j).slice():[...e(this,d).keys()]:null}getGroups(){return e(this,d).size>0?(0,l.objectFromMap)(e(this,d)):null}getGroup(v){return e(this,d).get(v)||null}getHash(){if(e(this,T)!==null)return e(this,T);const v=new E.MurmurHash3_64;for(const[g,A]of e(this,d))v.update(`${g}:${A.visible}`);return gt(this,T,v.hexdigest())}}T=new WeakMap,d=new WeakMap,H=new WeakMap,j=new WeakMap,y=new WeakSet,qi=function(v){const g=v.length;if(g<2)return!0;const A=v[0];for(let O=1;O<g;O++){const w=v[O];let o;if(Array.isArray(w))o=J(this,y,qi).call(this,w);else if(e(this,d).has(w))o=e(this,d).get(w).visible;else return(0,l.warn)(`Optional content group not found: ${w}`),!0;switch(A){case"And":if(!o)return!1;break;case"Or":if(o)return!0;break;case"Not":return!o;default:return!0}}return A==="And"},u.OptionalContentConfig=Ct}),((c,u,_t)=>{Object.defineProperty(u,"__esModule",{value:!0}),u.PDFDataTransportStream=void 0;var l=_t(1),E=_t(6);class t{constructor({length:T,initialData:d,progressiveDone:H=!1,contentDispositionFilename:j=null,disableRange:y=!1,disableStream:b=!1},M){if((0,l.assert)(M,'PDFDataTransportStream - missing required "pdfDataRangeTransport" argument.'),this._queuedChunks=[],this._progressiveDone=H,this._contentDispositionFilename=j,d?.length>0){const v=d instanceof Uint8Array&&d.byteLength===d.buffer.byteLength?d.buffer:new Uint8Array(d).buffer;this._queuedChunks.push(v)}this._pdfDataRangeTransport=M,this._isStreamingSupported=!b,this._isRangeSupported=!y,this._contentLength=T,this._fullRequestReader=null,this._rangeReaders=[],this._pdfDataRangeTransport.addRangeListener((v,g)=>{this._onReceiveData({begin:v,chunk:g})}),this._pdfDataRangeTransport.addProgressListener((v,g)=>{this._onProgress({loaded:v,total:g})}),this._pdfDataRangeTransport.addProgressiveReadListener(v=>{this._onReceiveData({chunk:v})}),this._pdfDataRangeTransport.addProgressiveDoneListener(()=>{this._onProgressiveDone()}),this._pdfDataRangeTransport.transportReady()}_onReceiveData({begin:T,chunk:d}){const H=d instanceof Uint8Array&&d.byteLength===d.buffer.byteLength?d.buffer:new Uint8Array(d).buffer;if(T===void 0)this._fullRequestReader?this._fullRequestReader._enqueue(H):this._queuedChunks.push(H);else{const j=this._rangeReaders.some(function(y){return y._begin!==T?!1:(y._enqueue(H),!0)});(0,l.assert)(j,"_onReceiveData - no `PDFDataTransportStreamRangeReader` instance found.")}}get _progressiveDataLength(){return this._fullRequestReader?._loaded??0}_onProgress(T){T.total===void 0?this._rangeReaders[0]?.onProgress?.({loaded:T.loaded}):this._fullRequestReader?.onProgress?.({loaded:T.loaded,total:T.total})}_onProgressiveDone(){this._fullRequestReader?.progressiveDone(),this._progressiveDone=!0}_removeRangeReader(T){const d=this._rangeReaders.indexOf(T);d>=0&&this._rangeReaders.splice(d,1)}getFullReader(){(0,l.assert)(!this._fullRequestReader,"PDFDataTransportStream.getFullReader can only be called once.");const T=this._queuedChunks;return this._queuedChunks=null,new Z(this,T,this._progressiveDone,this._contentDispositionFilename)}getRangeReader(T,d){if(d<=this._progressiveDataLength)return null;const H=new Ct(this,T,d);return this._pdfDataRangeTransport.requestDataRange(T,d),this._rangeReaders.push(H),H}cancelAllRequests(T){this._fullRequestReader?.cancel(T);for(const d of this._rangeReaders.slice(0))d.cancel(T);this._pdfDataRangeTransport.abort()}}u.PDFDataTransportStream=t;class Z{constructor(T,d,H=!1,j=null){this._stream=T,this._done=H||!1,this._filename=(0,E.isPdfFile)(j)?j:null,this._queuedChunks=d||[],this._loaded=0;for(const y of this._queuedChunks)this._loaded+=y.byteLength;this._requests=[],this._headersReady=Promise.resolve(),T._fullRequestReader=this,this.onProgress=null}_enqueue(T){this._done||(this._requests.length>0?this._requests.shift().resolve({value:T,done:!1}):this._queuedChunks.push(T),this._loaded+=T.byteLength)}get headersReady(){return this._headersReady}get filename(){return this._filename}get isRangeSupported(){return this._stream._isRangeSupported}get isStreamingSupported(){return this._stream._isStreamingSupported}get contentLength(){return this._stream._contentLength}async read(){if(this._queuedChunks.length>0)return{value:this._queuedChunks.shift(),done:!1};if(this._done)return{value:void 0,done:!0};const T=new l.PromiseCapability;return this._requests.push(T),T.promise}cancel(T){this._done=!0;for(const d of this._requests)d.resolve({value:void 0,done:!0});this._requests.length=0}progressiveDone(){this._done||(this._done=!0)}}class Ct{constructor(T,d,H){this._stream=T,this._begin=d,this._end=H,this._queuedChunk=null,this._requests=[],this._done=!1,this.onProgress=null}_enqueue(T){if(!this._done){if(this._requests.length===0)this._queuedChunk=T;else{this._requests.shift().resolve({value:T,done:!1});for(const H of this._requests)H.resolve({value:void 0,done:!0});this._requests.length=0}this._done=!0,this._stream._removeRangeReader(this)}}get isStreamingSupported(){return!1}async read(){if(this._queuedChunk){const d=this._queuedChunk;return this._queuedChunk=null,{value:d,done:!1}}if(this._done)return{value:void 0,done:!0};const T=new l.PromiseCapability;return this._requests.push(T),T.promise}cancel(T){this._done=!0;for(const d of this._requests)d.resolve({value:void 0,done:!0});this._requests.length=0,this._stream._removeRangeReader(this)}}}),((c,u,_t)=>{Object.defineProperty(u,"__esModule",{value:!0}),u.PDFFetchStream=void 0;var l=_t(1),E=_t(20);function t(H,j,y){return{method:"GET",headers:H,signal:y.signal,mode:"cors",credentials:j?"include":"same-origin",redirect:"follow"}}function Z(H){const j=new Headers;for(const y in H){const b=H[y];b!==void 0&&j.append(y,b)}return j}function Ct(H){return H instanceof Uint8Array?H.buffer:H instanceof ArrayBuffer?H:((0,l.warn)(`getArrayBuffer - unexpected data format: ${H}`),new Uint8Array(H).buffer)}class W{constructor(j){this.source=j,this.isHttp=/^https?:/i.test(j.url),this.httpHeaders=this.isHttp&&j.httpHeaders||{},this._fullRequestReader=null,this._rangeRequestReaders=[]}get _progressiveDataLength(){return this._fullRequestReader?._loaded??0}getFullReader(){return(0,l.assert)(!this._fullRequestReader,"PDFFetchStream.getFullReader can only be called once."),this._fullRequestReader=new T(this),this._fullRequestReader}getRangeReader(j,y){if(y<=this._progressiveDataLength)return null;const b=new d(this,j,y);return this._rangeRequestReaders.push(b),b}cancelAllRequests(j){this._fullRequestReader?.cancel(j);for(const y of this._rangeRequestReaders.slice(0))y.cancel(j)}}u.PDFFetchStream=W;class T{constructor(j){this._stream=j,this._reader=null,this._loaded=0,this._filename=null;const y=j.source;this._withCredentials=y.withCredentials||!1,this._contentLength=y.length,this._headersCapability=new l.PromiseCapability,this._disableRange=y.disableRange||!1,this._rangeChunkSize=y.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._abortController=new AbortController,this._isStreamingSupported=!y.disableStream,this._isRangeSupported=!y.disableRange,this._headers=Z(this._stream.httpHeaders);const b=y.url;fetch(b,t(this._headers,this._withCredentials,this._abortController)).then(M=>{if(!(0,E.validateResponseStatus)(M.status))throw(0,E.createResponseStatusError)(M.status,b);this._reader=M.body.getReader(),this._headersCapability.resolve();const v=O=>M.headers.get(O),{allowRangeRequests:g,suggestedLength:A}=(0,E.validateRangeRequestCapabilities)({getResponseHeader:v,isHttp:this._stream.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});this._isRangeSupported=g,this._contentLength=A||this._contentLength,this._filename=(0,E.extractFilenameFromHeader)(v),!this._isStreamingSupported&&this._isRangeSupported&&this.cancel(new l.AbortException("Streaming is disabled."))}).catch(this._headersCapability.reject),this.onProgress=null}get headersReady(){return this._headersCapability.promise}get filename(){return this._filename}get contentLength(){return this._contentLength}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}async read(){await this._headersCapability.promise;const{value:j,done:y}=await this._reader.read();return y?{value:j,done:y}:(this._loaded+=j.byteLength,this.onProgress?.({loaded:this._loaded,total:this._contentLength}),{value:Ct(j),done:!1})}cancel(j){this._reader?.cancel(j),this._abortController.abort()}}class d{constructor(j,y,b){this._stream=j,this._reader=null,this._loaded=0;const M=j.source;this._withCredentials=M.withCredentials||!1,this._readCapability=new l.PromiseCapability,this._isStreamingSupported=!M.disableStream,this._abortController=new AbortController,this._headers=Z(this._stream.httpHeaders),this._headers.append("Range",`bytes=${y}-${b-1}`);const v=M.url;fetch(v,t(this._headers,this._withCredentials,this._abortController)).then(g=>{if(!(0,E.validateResponseStatus)(g.status))throw(0,E.createResponseStatusError)(g.status,v);this._readCapability.resolve(),this._reader=g.body.getReader()}).catch(this._readCapability.reject),this.onProgress=null}get isStreamingSupported(){return this._isStreamingSupported}async read(){await this._readCapability.promise;const{value:j,done:y}=await this._reader.read();return y?{value:j,done:y}:(this._loaded+=j.byteLength,this.onProgress?.({loaded:this._loaded}),{value:Ct(j),done:!1})}cancel(j){this._reader?.cancel(j),this._abortController.abort()}}}),((c,u,_t)=>{Object.defineProperty(u,"__esModule",{value:!0}),u.createResponseStatusError=W,u.extractFilenameFromHeader=Ct,u.validateRangeRequestCapabilities=Z,u.validateResponseStatus=T;var l=_t(1),E=_t(21),t=_t(6);function Z({getResponseHeader:d,isHttp:H,rangeChunkSize:j,disableRange:y}){const b={allowRangeRequests:!1,suggestedLength:void 0},M=parseInt(d("Content-Length"),10);return!Number.isInteger(M)||(b.suggestedLength=M,M<=2*j)||y||!H||d("Accept-Ranges")!=="bytes"||(d("Content-Encoding")||"identity")!=="identity"||(b.allowRangeRequests=!0),b}function Ct(d){const H=d("Content-Disposition");if(H){let j=(0,E.getFilenameFromContentDispositionHeader)(H);if(j.includes("%"))try{j=decodeURIComponent(j)}catch{}if((0,t.isPdfFile)(j))return j}return null}function W(d,H){return d===404||d===0&&H.startsWith("file:")?new l.MissingPDFException('Missing PDF "'+H+'".'):new l.UnexpectedResponseException(`Unexpected server response (${d}) while retrieving PDF "${H}".`,d)}function T(d){return d===200||d===206}}),((c,u,_t)=>{Object.defineProperty(u,"__esModule",{value:!0}),u.getFilenameFromContentDispositionHeader=E;var l=_t(1);function E(t){let Z=!0,Ct=W("filename\\*","i").exec(t);if(Ct){Ct=Ct[1];let M=j(Ct);return M=unescape(M),M=y(M),M=b(M),d(M)}if(Ct=H(t),Ct){const M=b(Ct);return d(M)}if(Ct=W("filename","i").exec(t),Ct){Ct=Ct[1];let M=j(Ct);return M=b(M),d(M)}function W(M,v){return new RegExp("(?:^|;)\\s*"+M+'\\s*=\\s*([^";\\s][^;\\s]*|"(?:[^"\\\\]|\\\\"?)+"?)',v)}function T(M,v){if(M){if(!/^[\x00-\xFF]+$/.test(v))return v;try{const g=new TextDecoder(M,{fatal:!0}),A=(0,l.stringToBytes)(v);v=g.decode(A),Z=!1}catch{}}return v}function d(M){return Z&&/[\x80-\xff]/.test(M)&&(M=T("utf-8",M),Z&&(M=T("iso-8859-1",M))),M}function H(M){const v=[];let g;const A=W("filename\\*((?!0\\d)\\d+)(\\*?)","ig");for(;(g=A.exec(M))!==null;){let[,w,o,r]=g;if(w=parseInt(w,10),w in v){if(w===0)break;continue}v[w]=[o,r]}const O=[];for(let w=0;w<v.length&&w in v;++w){let[o,r]=v[w];r=j(r),o&&(r=unescape(r),w===0&&(r=y(r))),O.push(r)}return O.join("")}function j(M){if(M.startsWith('"')){const v=M.slice(1).split('\\"');for(let g=0;g<v.length;++g){const A=v[g].indexOf('"');A!==-1&&(v[g]=v[g].slice(0,A),v.length=g+1),v[g]=v[g].replaceAll(/\\(.)/g,"$1")}M=v.join('"')}return M}function y(M){const v=M.indexOf("'");if(v===-1)return M;const g=M.slice(0,v),O=M.slice(v+1).replace(/^[^']*'/,"");return T(g,O)}function b(M){return!M.startsWith("=?")||/[\x00-\x19\x80-\xff]/.test(M)?M:M.replaceAll(/=\?([\w-]*)\?([QqBb])\?((?:[^?]|\?(?!=))*)\?=/g,function(v,g,A,O){if(A==="q"||A==="Q")return O=O.replaceAll("_"," "),O=O.replaceAll(/=([0-9a-fA-F]{2})/g,function(w,o){return String.fromCharCode(parseInt(o,16))}),T(g,O);try{O=atob(O)}catch{}return T(g,O)})}return""}}),((c,u,_t)=>{Object.defineProperty(u,"__esModule",{value:!0}),u.PDFNetworkStream=void 0;var l=_t(1),E=_t(20);const t=200,Z=206;function Ct(j){const y=j.response;return typeof y!="string"?y:(0,l.stringToBytes)(y).buffer}class W{constructor(y,b={}){this.url=y,this.isHttp=/^https?:/i.test(y),this.httpHeaders=this.isHttp&&b.httpHeaders||Object.create(null),this.withCredentials=b.withCredentials||!1,this.currXhrId=0,this.pendingRequests=Object.create(null)}requestRange(y,b,M){const v={begin:y,end:b};for(const g in M)v[g]=M[g];return this.request(v)}requestFull(y){return this.request(y)}request(y){const b=new XMLHttpRequest,M=this.currXhrId++,v=this.pendingRequests[M]={xhr:b};b.open("GET",this.url),b.withCredentials=this.withCredentials;for(const g in this.httpHeaders){const A=this.httpHeaders[g];A!==void 0&&b.setRequestHeader(g,A)}return this.isHttp&&"begin"in y&&"end"in y?(b.setRequestHeader("Range",`bytes=${y.begin}-${y.end-1}`),v.expectedStatus=Z):v.expectedStatus=t,b.responseType="arraybuffer",y.onError&&(b.onerror=function(g){y.onError(b.status)}),b.onreadystatechange=this.onStateChange.bind(this,M),b.onprogress=this.onProgress.bind(this,M),v.onHeadersReceived=y.onHeadersReceived,v.onDone=y.onDone,v.onError=y.onError,v.onProgress=y.onProgress,b.send(null),M}onProgress(y,b){const M=this.pendingRequests[y];M&&M.onProgress?.(b)}onStateChange(y,b){const M=this.pendingRequests[y];if(!M)return;const v=M.xhr;if(v.readyState>=2&&M.onHeadersReceived&&(M.onHeadersReceived(),delete M.onHeadersReceived),v.readyState!==4||!(y in this.pendingRequests))return;if(delete this.pendingRequests[y],v.status===0&&this.isHttp){M.onError?.(v.status);return}const g=v.status||t;if(!(g===t&&M.expectedStatus===Z)&&g!==M.expectedStatus){M.onError?.(v.status);return}const O=Ct(v);if(g===Z){const w=v.getResponseHeader("Content-Range"),o=/bytes (\d+)-(\d+)\/(\d+)/.exec(w);M.onDone({begin:parseInt(o[1],10),chunk:O})}else O?M.onDone({begin:0,chunk:O}):M.onError?.(v.status)}getRequestXhr(y){return this.pendingRequests[y].xhr}isPendingRequest(y){return y in this.pendingRequests}abortRequest(y){const b=this.pendingRequests[y].xhr;delete this.pendingRequests[y],b.abort()}}class T{constructor(y){this._source=y,this._manager=new W(y.url,{httpHeaders:y.httpHeaders,withCredentials:y.withCredentials}),this._rangeChunkSize=y.rangeChunkSize,this._fullRequestReader=null,this._rangeRequestReaders=[]}_onRangeRequestReaderClosed(y){const b=this._rangeRequestReaders.indexOf(y);b>=0&&this._rangeRequestReaders.splice(b,1)}getFullReader(){return(0,l.assert)(!this._fullRequestReader,"PDFNetworkStream.getFullReader can only be called once."),this._fullRequestReader=new d(this._manager,this._source),this._fullRequestReader}getRangeReader(y,b){const M=new H(this._manager,y,b);return M.onClosed=this._onRangeRequestReaderClosed.bind(this),this._rangeRequestReaders.push(M),M}cancelAllRequests(y){this._fullRequestReader?.cancel(y);for(const b of this._rangeRequestReaders.slice(0))b.cancel(y)}}u.PDFNetworkStream=T;class d{constructor(y,b){this._manager=y;const M={onHeadersReceived:this._onHeadersReceived.bind(this),onDone:this._onDone.bind(this),onError:this._onError.bind(this),onProgress:this._onProgress.bind(this)};this._url=b.url,this._fullRequestId=y.requestFull(M),this._headersReceivedCapability=new l.PromiseCapability,this._disableRange=b.disableRange||!1,this._contentLength=b.length,this._rangeChunkSize=b.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._isStreamingSupported=!1,this._isRangeSupported=!1,this._cachedChunks=[],this._requests=[],this._done=!1,this._storedError=void 0,this._filename=null,this.onProgress=null}_onHeadersReceived(){const y=this._fullRequestId,b=this._manager.getRequestXhr(y),M=A=>b.getResponseHeader(A),{allowRangeRequests:v,suggestedLength:g}=(0,E.validateRangeRequestCapabilities)({getResponseHeader:M,isHttp:this._manager.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});v&&(this._isRangeSupported=!0),this._contentLength=g||this._contentLength,this._filename=(0,E.extractFilenameFromHeader)(M),this._isRangeSupported&&this._manager.abortRequest(y),this._headersReceivedCapability.resolve()}_onDone(y){if(y&&(this._requests.length>0?this._requests.shift().resolve({value:y.chunk,done:!1}):this._cachedChunks.push(y.chunk)),this._done=!0,!(this._cachedChunks.length>0)){for(const b of this._requests)b.resolve({value:void 0,done:!0});this._requests.length=0}}_onError(y){this._storedError=(0,E.createResponseStatusError)(y,this._url),this._headersReceivedCapability.reject(this._storedError);for(const b of this._requests)b.reject(this._storedError);this._requests.length=0,this._cachedChunks.length=0}_onProgress(y){this.onProgress?.({loaded:y.loaded,total:y.lengthComputable?y.total:this._contentLength})}get filename(){return this._filename}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}get contentLength(){return this._contentLength}get headersReady(){return this._headersReceivedCapability.promise}async read(){if(this._storedError)throw this._storedError;if(this._cachedChunks.length>0)return{value:this._cachedChunks.shift(),done:!1};if(this._done)return{value:void 0,done:!0};const y=new l.PromiseCapability;return this._requests.push(y),y.promise}cancel(y){this._done=!0,this._headersReceivedCapability.reject(y);for(const b of this._requests)b.resolve({value:void 0,done:!0});this._requests.length=0,this._manager.isPendingRequest(this._fullRequestId)&&this._manager.abortRequest(this._fullRequestId),this._fullRequestReader=null}}class H{constructor(y,b,M){this._manager=y;const v={onDone:this._onDone.bind(this),onError:this._onError.bind(this),onProgress:this._onProgress.bind(this)};this._url=y.url,this._requestId=y.requestRange(b,M,v),this._requests=[],this._queuedChunk=null,this._done=!1,this._storedError=void 0,this.onProgress=null,this.onClosed=null}_close(){this.onClosed?.(this)}_onDone(y){const b=y.chunk;this._requests.length>0?this._requests.shift().resolve({value:b,done:!1}):this._queuedChunk=b,this._done=!0;for(const M of this._requests)M.resolve({value:void 0,done:!0});this._requests.length=0,this._close()}_onError(y){this._storedError=(0,E.createResponseStatusError)(y,this._url);for(const b of this._requests)b.reject(this._storedError);this._requests.length=0,this._queuedChunk=null}_onProgress(y){this.isStreamingSupported||this.onProgress?.({loaded:y.loaded})}get isStreamingSupported(){return!1}async read(){if(this._storedError)throw this._storedError;if(this._queuedChunk!==null){const b=this._queuedChunk;return this._queuedChunk=null,{value:b,done:!1}}if(this._done)return{value:void 0,done:!0};const y=new l.PromiseCapability;return this._requests.push(y),y.promise}cancel(y){this._done=!0;for(const b of this._requests)b.resolve({value:void 0,done:!0});this._requests.length=0,this._manager.isPendingRequest(this._requestId)&&this._manager.abortRequest(this._requestId),this._close()}}}),((c,u,_t)=>{Object.defineProperty(u,"__esModule",{value:!0}),u.PDFNodeStream=void 0;var l=_t(1),E=_t(20);const t=/^file:\/\/\/[a-zA-Z]:\//;function Z(M){const v=require$$5,g=v.parse(M);return g.protocol==="file:"||g.host?g:/^[a-z]:[/\\]/i.test(M)?v.parse(`file:///${M}`):(g.host||(g.protocol="file:"),g)}class Ct{constructor(v){this.source=v,this.url=Z(v.url),this.isHttp=this.url.protocol==="http:"||this.url.protocol==="https:",this.isFsUrl=this.url.protocol==="file:",this.httpHeaders=this.isHttp&&v.httpHeaders||{},this._fullRequestReader=null,this._rangeRequestReaders=[]}get _progressiveDataLength(){return this._fullRequestReader?._loaded??0}getFullReader(){return(0,l.assert)(!this._fullRequestReader,"PDFNodeStream.getFullReader can only be called once."),this._fullRequestReader=this.isFsUrl?new y(this):new H(this),this._fullRequestReader}getRangeReader(v,g){if(g<=this._progressiveDataLength)return null;const A=this.isFsUrl?new b(this,v,g):new j(this,v,g);return this._rangeRequestReaders.push(A),A}cancelAllRequests(v){this._fullRequestReader?.cancel(v);for(const g of this._rangeRequestReaders.slice(0))g.cancel(v)}}u.PDFNodeStream=Ct;class W{constructor(v){this._url=v.url,this._done=!1,this._storedError=null,this.onProgress=null;const g=v.source;this._contentLength=g.length,this._loaded=0,this._filename=null,this._disableRange=g.disableRange||!1,this._rangeChunkSize=g.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._isStreamingSupported=!g.disableStream,this._isRangeSupported=!g.disableRange,this._readableStream=null,this._readCapability=new l.PromiseCapability,this._headersCapability=new l.PromiseCapability}get headersReady(){return this._headersCapability.promise}get filename(){return this._filename}get contentLength(){return this._contentLength}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}async read(){if(await this._readCapability.promise,this._done)return{value:void 0,done:!0};if(this._storedError)throw this._storedError;const v=this._readableStream.read();return v===null?(this._readCapability=new l.PromiseCapability,this.read()):(this._loaded+=v.length,this.onProgress?.({loaded:this._loaded,total:this._contentLength}),{value:new Uint8Array(v).buffer,done:!1})}cancel(v){if(!this._readableStream){this._error(v);return}this._readableStream.destroy(v)}_error(v){this._storedError=v,this._readCapability.resolve()}_setReadableStream(v){this._readableStream=v,v.on("readable",()=>{this._readCapability.resolve()}),v.on("end",()=>{v.destroy(),this._done=!0,this._readCapability.resolve()}),v.on("error",g=>{this._error(g)}),!this._isStreamingSupported&&this._isRangeSupported&&this._error(new l.AbortException("streaming is disabled")),this._storedError&&this._readableStream.destroy(this._storedError)}}class T{constructor(v){this._url=v.url,this._done=!1,this._storedError=null,this.onProgress=null,this._loaded=0,this._readableStream=null,this._readCapability=new l.PromiseCapability;const g=v.source;this._isStreamingSupported=!g.disableStream}get isStreamingSupported(){return this._isStreamingSupported}async read(){if(await this._readCapability.promise,this._done)return{value:void 0,done:!0};if(this._storedError)throw this._storedError;const v=this._readableStream.read();return v===null?(this._readCapability=new l.PromiseCapability,this.read()):(this._loaded+=v.length,this.onProgress?.({loaded:this._loaded}),{value:new Uint8Array(v).buffer,done:!1})}cancel(v){if(!this._readableStream){this._error(v);return}this._readableStream.destroy(v)}_error(v){this._storedError=v,this._readCapability.resolve()}_setReadableStream(v){this._readableStream=v,v.on("readable",()=>{this._readCapability.resolve()}),v.on("end",()=>{v.destroy(),this._done=!0,this._readCapability.resolve()}),v.on("error",g=>{this._error(g)}),this._storedError&&this._readableStream.destroy(this._storedError)}}function d(M,v){return{protocol:M.protocol,auth:M.auth,host:M.hostname,port:M.port,path:M.path,method:"GET",headers:v}}class H extends W{constructor(v){super(v);const g=A=>{if(A.statusCode===404){const r=new l.MissingPDFException(`Missing PDF "${this._url}".`);this._storedError=r,this._headersCapability.reject(r);return}this._headersCapability.resolve(),this._setReadableStream(A);const O=r=>this._readableStream.headers[r.toLowerCase()],{allowRangeRequests:w,suggestedLength:o}=(0,E.validateRangeRequestCapabilities)({getResponseHeader:O,isHttp:v.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});this._isRangeSupported=w,this._contentLength=o||this._contentLength,this._filename=(0,E.extractFilenameFromHeader)(O)};if(this._request=null,this._url.protocol==="http:"){const A=require$$5;this._request=A.request(d(this._url,v.httpHeaders),g)}else{const A=require$$5;this._request=A.request(d(this._url,v.httpHeaders),g)}this._request.on("error",A=>{this._storedError=A,this._headersCapability.reject(A)}),this._request.end()}}class j extends T{constructor(v,g,A){super(v),this._httpHeaders={};for(const w in v.httpHeaders){const o=v.httpHeaders[w];o!==void 0&&(this._httpHeaders[w]=o)}this._httpHeaders.Range=`bytes=${g}-${A-1}`;const O=w=>{if(w.statusCode===404){const o=new l.MissingPDFException(`Missing PDF "${this._url}".`);this._storedError=o;return}this._setReadableStream(w)};if(this._request=null,this._url.protocol==="http:"){const w=require$$5;this._request=w.request(d(this._url,this._httpHeaders),O)}else{const w=require$$5;this._request=w.request(d(this._url,this._httpHeaders),O)}this._request.on("error",w=>{this._storedError=w}),this._request.end()}}class y extends W{constructor(v){super(v);let g=decodeURIComponent(this._url.path);t.test(this._url.href)&&(g=g.replace(/^\//,""));const A=require$$5;A.lstat(g,(O,w)=>{if(O){O.code==="ENOENT"&&(O=new l.MissingPDFException(`Missing PDF "${g}".`)),this._storedError=O,this._headersCapability.reject(O);return}this._contentLength=w.size,this._setReadableStream(A.createReadStream(g)),this._headersCapability.resolve()})}}class b extends T{constructor(v,g,A){super(v);let O=decodeURIComponent(this._url.path);t.test(this._url.href)&&(O=O.replace(/^\//,""));const w=require$$5;this._setReadableStream(w.createReadStream(O,{start:g,end:A-1}))}}}),((c,u,_t)=>{Object.defineProperty(u,"__esModule",{value:!0}),u.SVGGraphics=void 0;var l=_t(6),E=_t(1);const t={fontStyle:"normal",fontWeight:"normal",fillColor:"#000000"},Z="http://www.w3.org/XML/1998/namespace",Ct="http://www.w3.org/1999/xlink",W=["butt","round","square"],T=["miter","round","bevel"],d=function(w,o="",r=!1){if(URL.createObjectURL&&typeof Blob<"u"&&!r)return URL.createObjectURL(new Blob([w],{type:o}));const n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";let S=`data:${o};base64,`;for(let p=0,G=w.length;p<G;p+=3){const h=w[p]&255,P=w[p+1]&255,$=w[p+2]&255,bt=h>>2,nt=(h&3)<<4|P>>4,at=p+1<G?(P&15)<<2|$>>6:64,K=p+2<G?$&63:64;S+=n[bt]+n[nt]+n[at]+n[K]}return S},H=(function(){const w=new Uint8Array([137,80,78,71,13,10,26,10]),o=12,r=new Int32Array(256);for(let $=0;$<256;$++){let bt=$;for(let nt=0;nt<8;nt++)bt=bt&1?3988292384^bt>>1&2147483647:bt>>1&2147483647;r[$]=bt}function n($,bt,nt){let at=-1;for(let K=bt;K<nt;K++){const vt=(at^$[K])&255,N=r[vt];at=at>>>8^N}return at^-1}function S($,bt,nt,at){let K=at;const vt=bt.length;nt[K]=vt>>24&255,nt[K+1]=vt>>16&255,nt[K+2]=vt>>8&255,nt[K+3]=vt&255,K+=4,nt[K]=$.charCodeAt(0)&255,nt[K+1]=$.charCodeAt(1)&255,nt[K+2]=$.charCodeAt(2)&255,nt[K+3]=$.charCodeAt(3)&255,K+=4,nt.set(bt,K),K+=bt.length;const N=n(nt,at+4,K);nt[K]=N>>24&255,nt[K+1]=N>>16&255,nt[K+2]=N>>8&255,nt[K+3]=N&255}function p($,bt,nt){let at=1,K=0;for(let vt=bt;vt<nt;++vt)at=(at+($[vt]&255))%65521,K=(K+at)%65521;return K<<16|at}function G($){if(!E.isNodeJS)return h($);try{const bt=parseInt(process.versions.node)>=8?$:Buffer.from($),nt=require$$5.deflateSync(bt,{level:9});return nt instanceof Uint8Array?nt:new Uint8Array(nt)}catch(bt){(0,E.warn)("Not compressing PNG because zlib.deflateSync is unavailable: "+bt)}return h($)}function h($){let bt=$.length;const nt=65535,at=Math.ceil(bt/nt),K=new Uint8Array(2+bt+at*5+4);let vt=0;K[vt++]=120,K[vt++]=156;let N=0;for(;bt>nt;)K[vt++]=0,K[vt++]=255,K[vt++]=255,K[vt++]=0,K[vt++]=0,K.set($.subarray(N,N+nt),vt),vt+=nt,N+=nt,bt-=nt;K[vt++]=1,K[vt++]=bt&255,K[vt++]=bt>>8&255,K[vt++]=~bt&65535&255,K[vt++]=(~bt&65535)>>8&255,K.set($.subarray(N),vt),vt+=$.length-N;const Q=p($,0,$.length);return K[vt++]=Q>>24&255,K[vt++]=Q>>16&255,K[vt++]=Q>>8&255,K[vt++]=Q&255,K}function P($,bt,nt,at){const K=$.width,vt=$.height;let N,Q,ct;const k=$.data;switch(bt){case E.ImageKind.GRAYSCALE_1BPP:Q=0,N=1,ct=K+7>>3;break;case E.ImageKind.RGB_24BPP:Q=2,N=8,ct=K*3;break;case E.ImageKind.RGBA_32BPP:Q=6,N=8,ct=K*4;break;default:throw new Error("invalid format")}const s=new Uint8Array((1+ct)*vt);let a=0,m=0;for(let At=0;At<vt;++At)s[a++]=0,s.set(k.subarray(m,m+ct),a),m+=ct,a+=ct;if(bt===E.ImageKind.GRAYSCALE_1BPP&&at){a=0;for(let At=0;At<vt;At++){a++;for(let Et=0;Et<ct;Et++)s[a++]^=255}}const F=new Uint8Array([K>>24&255,K>>16&255,K>>8&255,K&255,vt>>24&255,vt>>16&255,vt>>8&255,vt&255,N,Q,0,0,0]),L=G(s),R=w.length+o*3+F.length+L.length,q=new Uint8Array(R);let mt=0;return q.set(w,mt),mt+=w.length,S("IHDR",F,q,mt),mt+=o+F.length,S("IDATA",L,q,mt),mt+=o+L.length,S("IEND",new Uint8Array(0),q,mt),d(q,"image/png",nt)}return function(bt,nt,at){const K=bt.kind===void 0?E.ImageKind.GRAYSCALE_1BPP:bt.kind;return P(bt,K,nt,at)}})();class j{constructor(){this.fontSizeScale=1,this.fontWeight=t.fontWeight,this.fontSize=0,this.textMatrix=E.IDENTITY_MATRIX,this.fontMatrix=E.FONT_IDENTITY_MATRIX,this.leading=0,this.textRenderingMode=E.TextRenderingMode.FILL,this.textMatrixScale=1,this.x=0,this.y=0,this.lineX=0,this.lineY=0,this.charSpacing=0,this.wordSpacing=0,this.textHScale=1,this.textRise=0,this.fillColor=t.fillColor,this.strokeColor="#000000",this.fillAlpha=1,this.strokeAlpha=1,this.lineWidth=1,this.lineJoin="",this.lineCap="",this.miterLimit=0,this.dashArray=[],this.dashPhase=0,this.dependencies=[],this.activeClipUrl=null,this.clipGroup=null,this.maskId=""}clone(){return Object.create(this)}setCurrentPoint(o,r){this.x=o,this.y=r}}function y(w){let o=[];const r=[];for(const n of w){if(n.fn==="save"){o.push({fnId:92,fn:"group",items:[]}),r.push(o),o=o.at(-1).items;continue}n.fn==="restore"?o=r.pop():o.push(n)}return o}function b(w){if(Number.isInteger(w))return w.toString();const o=w.toFixed(10);let r=o.length-1;if(o[r]!=="0")return o;do r--;while(o[r]==="0");return o.substring(0,o[r]==="."?r:r+1)}function M(w){if(w[4]===0&&w[5]===0){if(w[1]===0&&w[2]===0)return w[0]===1&&w[3]===1?"":`scale(${b(w[0])} ${b(w[3])})`;if(w[0]===w[3]&&w[1]===-w[2]){const o=Math.acos(w[0])*180/Math.PI;return`rotate(${b(o)})`}}else if(w[0]===1&&w[1]===0&&w[2]===0&&w[3]===1)return`translate(${b(w[4])} ${b(w[5])})`;return`matrix(${b(w[0])} ${b(w[1])} ${b(w[2])} ${b(w[3])} ${b(w[4])} ${b(w[5])})`}let v=0,g=0,A=0;class O{constructor(o,r,n=!1){(0,l.deprecated)("The SVG back-end is no longer maintained and *may* be removed in the future."),this.svgFactory=new l.DOMSVGFactory,this.current=new j,this.transformMatrix=E.IDENTITY_MATRIX,this.transformStack=[],this.extraStack=[],this.commonObjs=o,this.objs=r,this.pendingClip=null,this.pendingEOFill=!1,this.embedFonts=!1,this.embeddedFonts=Object.create(null),this.cssStyle=null,this.forceDataSchema=!!n,this._operatorIdMapping=[];for(const S in E.OPS)this._operatorIdMapping[E.OPS[S]]=S}getObject(o,r=null){return typeof o=="string"?o.startsWith("g_")?this.commonObjs.get(o):this.objs.get(o):r}save(){this.transformStack.push(this.transformMatrix);const o=this.current;this.extraStack.push(o),this.current=o.clone()}restore(){this.transformMatrix=this.transformStack.pop(),this.current=this.extraStack.pop(),this.pendingClip=null,this.tgrp=null}group(o){this.save(),this.executeOpTree(o),this.restore()}loadDependencies(o){const r=o.fnArray,n=o.argsArray;for(let S=0,p=r.length;S<p;S++)if(r[S]===E.OPS.dependency)for(const G of n[S]){const h=G.startsWith("g_")?this.commonObjs:this.objs,P=new Promise($=>{h.get(G,$)});this.current.dependencies.push(P)}return Promise.all(this.current.dependencies)}transform(o,r,n,S,p,G){const h=[o,r,n,S,p,G];this.transformMatrix=E.Util.transform(this.transformMatrix,h),this.tgrp=null}getSVG(o,r){this.viewport=r;const n=this._initialize(r);return this.loadDependencies(o).then(()=>(this.transformMatrix=E.IDENTITY_MATRIX,this.executeOpTree(this.convertOpList(o)),n))}convertOpList(o){const r=this._operatorIdMapping,n=o.argsArray,S=o.fnArray,p=[];for(let G=0,h=S.length;G<h;G++){const P=S[G];p.push({fnId:P,fn:r[P],args:n[G]})}return y(p)}executeOpTree(o){for(const r of o){const n=r.fn,S=r.fnId,p=r.args;switch(S|0){case E.OPS.beginText:this.beginText();break;case E.OPS.dependency:break;case E.OPS.setLeading:this.setLeading(p);break;case E.OPS.setLeadingMoveText:this.setLeadingMoveText(p[0],p[1]);break;case E.OPS.setFont:this.setFont(p);break;case E.OPS.showText:this.showText(p[0]);break;case E.OPS.showSpacedText:this.showText(p[0]);break;case E.OPS.endText:this.endText();break;case E.OPS.moveText:this.moveText(p[0],p[1]);break;case E.OPS.setCharSpacing:this.setCharSpacing(p[0]);break;case E.OPS.setWordSpacing:this.setWordSpacing(p[0]);break;case E.OPS.setHScale:this.setHScale(p[0]);break;case E.OPS.setTextMatrix:this.setTextMatrix(p[0],p[1],p[2],p[3],p[4],p[5]);break;case E.OPS.setTextRise:this.setTextRise(p[0]);break;case E.OPS.setTextRenderingMode:this.setTextRenderingMode(p[0]);break;case E.OPS.setLineWidth:this.setLineWidth(p[0]);break;case E.OPS.setLineJoin:this.setLineJoin(p[0]);break;case E.OPS.setLineCap:this.setLineCap(p[0]);break;case E.OPS.setMiterLimit:this.setMiterLimit(p[0]);break;case E.OPS.setFillRGBColor:this.setFillRGBColor(p[0],p[1],p[2]);break;case E.OPS.setStrokeRGBColor:this.setStrokeRGBColor(p[0],p[1],p[2]);break;case E.OPS.setStrokeColorN:this.setStrokeColorN(p);break;case E.OPS.setFillColorN:this.setFillColorN(p);break;case E.OPS.shadingFill:this.shadingFill(p[0]);break;case E.OPS.setDash:this.setDash(p[0],p[1]);break;case E.OPS.setRenderingIntent:this.setRenderingIntent(p[0]);break;case E.OPS.setFlatness:this.setFlatness(p[0]);break;case E.OPS.setGState:this.setGState(p[0]);break;case E.OPS.fill:this.fill();break;case E.OPS.eoFill:this.eoFill();break;case E.OPS.stroke:this.stroke();break;case E.OPS.fillStroke:this.fillStroke();break;case E.OPS.eoFillStroke:this.eoFillStroke();break;case E.OPS.clip:this.clip("nonzero");break;case E.OPS.eoClip:this.clip("evenodd");break;case E.OPS.paintSolidColorImageMask:this.paintSolidColorImageMask();break;case E.OPS.paintImageXObject:this.paintImageXObject(p[0]);break;case E.OPS.paintInlineImageXObject:this.paintInlineImageXObject(p[0]);break;case E.OPS.paintImageMaskXObject:this.paintImageMaskXObject(p[0]);break;case E.OPS.paintFormXObjectBegin:this.paintFormXObjectBegin(p[0],p[1]);break;case E.OPS.paintFormXObjectEnd:this.paintFormXObjectEnd();break;case E.OPS.closePath:this.closePath();break;case E.OPS.closeStroke:this.closeStroke();break;case E.OPS.closeFillStroke:this.closeFillStroke();break;case E.OPS.closeEOFillStroke:this.closeEOFillStroke();break;case E.OPS.nextLine:this.nextLine();break;case E.OPS.transform:this.transform(p[0],p[1],p[2],p[3],p[4],p[5]);break;case E.OPS.constructPath:this.constructPath(p[0],p[1]);break;case E.OPS.endPath:this.endPath();break;case 92:this.group(r.items);break;default:(0,E.warn)(`Unimplemented operator ${n}`);break}}}setWordSpacing(o){this.current.wordSpacing=o}setCharSpacing(o){this.current.charSpacing=o}nextLine(){this.moveText(0,this.current.leading)}setTextMatrix(o,r,n,S,p,G){const h=this.current;h.textMatrix=h.lineMatrix=[o,r,n,S,p,G],h.textMatrixScale=Math.hypot(o,r),h.x=h.lineX=0,h.y=h.lineY=0,h.xcoords=[],h.ycoords=[],h.tspan=this.svgFactory.createElement("svg:tspan"),h.tspan.setAttributeNS(null,"font-family",h.fontFamily),h.tspan.setAttributeNS(null,"font-size",`${b(h.fontSize)}px`),h.tspan.setAttributeNS(null,"y",b(-h.y)),h.txtElement=this.svgFactory.createElement("svg:text"),h.txtElement.append(h.tspan)}beginText(){const o=this.current;o.x=o.lineX=0,o.y=o.lineY=0,o.textMatrix=E.IDENTITY_MATRIX,o.lineMatrix=E.IDENTITY_MATRIX,o.textMatrixScale=1,o.tspan=this.svgFactory.createElement("svg:tspan"),o.txtElement=this.svgFactory.createElement("svg:text"),o.txtgrp=this.svgFactory.createElement("svg:g"),o.xcoords=[],o.ycoords=[]}moveText(o,r){const n=this.current;n.x=n.lineX+=o,n.y=n.lineY+=r,n.xcoords=[],n.ycoords=[],n.tspan=this.svgFactory.createElement("svg:tspan"),n.tspan.setAttributeNS(null,"font-family",n.fontFamily),n.tspan.setAttributeNS(null,"font-size",`${b(n.fontSize)}px`),n.tspan.setAttributeNS(null,"y",b(-n.y))}showText(o){const r=this.current,n=r.font,S=r.fontSize;if(S===0)return;const p=r.fontSizeScale,G=r.charSpacing,h=r.wordSpacing,P=r.fontDirection,$=r.textHScale*P,bt=n.vertical,nt=bt?1:-1,at=n.defaultVMetrics,K=S*r.fontMatrix[0];let vt=0;for(const ct of o){if(ct===null){vt+=P*h;continue}else if(typeof ct=="number"){vt+=nt*ct*S/1e3;continue}const k=(ct.isSpace?h:0)+G,s=ct.fontChar;let a,m,F=ct.width;if(bt){let R;const q=ct.vmetric||at;R=ct.vmetric?q[1]:F*.5,R=-R*K;const mt=q[2]*K;F=q?-q[0]:F,a=R/p,m=(vt+mt)/p}else a=vt/p,m=0;(ct.isInFont||n.missingFile)&&(r.xcoords.push(r.x+a),bt&&r.ycoords.push(-r.y+m),r.tspan.textContent+=s);const L=bt?F*K-k*P:F*K+k*P;vt+=L}r.tspan.setAttributeNS(null,"x",r.xcoords.map(b).join(" ")),bt?r.tspan.setAttributeNS(null,"y",r.ycoords.map(b).join(" ")):r.tspan.setAttributeNS(null,"y",b(-r.y)),bt?r.y-=vt:r.x+=vt*$,r.tspan.setAttributeNS(null,"font-family",r.fontFamily),r.tspan.setAttributeNS(null,"font-size",`${b(r.fontSize)}px`),r.fontStyle!==t.fontStyle&&r.tspan.setAttributeNS(null,"font-style",r.fontStyle),r.fontWeight!==t.fontWeight&&r.tspan.setAttributeNS(null,"font-weight",r.fontWeight);const N=r.textRenderingMode&E.TextRenderingMode.FILL_STROKE_MASK;if(N===E.TextRenderingMode.FILL||N===E.TextRenderingMode.FILL_STROKE?(r.fillColor!==t.fillColor&&r.tspan.setAttributeNS(null,"fill",r.fillColor),r.fillAlpha<1&&r.tspan.setAttributeNS(null,"fill-opacity",r.fillAlpha)):r.textRenderingMode===E.TextRenderingMode.ADD_TO_PATH?r.tspan.setAttributeNS(null,"fill","transparent"):r.tspan.setAttributeNS(null,"fill","none"),N===E.TextRenderingMode.STROKE||N===E.TextRenderingMode.FILL_STROKE){const ct=1/(r.textMatrixScale||1);this._setStrokeAttributes(r.tspan,ct)}let Q=r.textMatrix;r.textRise!==0&&(Q=Q.slice(),Q[5]+=r.textRise),r.txtElement.setAttributeNS(null,"transform",`${M(Q)} scale(${b($)}, -1)`),r.txtElement.setAttributeNS(Z,"xml:space","preserve"),r.txtElement.append(r.tspan),r.txtgrp.append(r.txtElement),this._ensureTransformGroup().append(r.txtElement)}setLeadingMoveText(o,r){this.setLeading(-r),this.moveText(o,r)}addFontStyle(o){if(!o.data)throw new Error('addFontStyle: No font data available, ensure that the "fontExtraProperties" API parameter is set.');this.cssStyle||(this.cssStyle=this.svgFactory.createElement("svg:style"),this.cssStyle.setAttributeNS(null,"type","text/css"),this.defs.append(this.cssStyle));const r=d(o.data,o.mimetype,this.forceDataSchema);this.cssStyle.textContent+=`@font-face { font-family: "${o.loadedName}"; src: url(${r}); }
`}setFont(o){const r=this.current,n=this.commonObjs.get(o[0]);let S=o[1];r.font=n,this.embedFonts&&!n.missingFile&&!this.embeddedFonts[n.loadedName]&&(this.addFontStyle(n),this.embeddedFonts[n.loadedName]=n),r.fontMatrix=n.fontMatrix||E.FONT_IDENTITY_MATRIX;let p="normal";n.black?p="900":n.bold&&(p="bold");const G=n.italic?"italic":"normal";S<0?(S=-S,r.fontDirection=-1):r.fontDirection=1,r.fontSize=S,r.fontFamily=n.loadedName,r.fontWeight=p,r.fontStyle=G,r.tspan=this.svgFactory.createElement("svg:tspan"),r.tspan.setAttributeNS(null,"y",b(-r.y)),r.xcoords=[],r.ycoords=[]}endText(){const o=this.current;o.textRenderingMode&E.TextRenderingMode.ADD_TO_PATH_FLAG&&o.txtElement?.hasChildNodes()&&(o.element=o.txtElement,this.clip("nonzero"),this.endPath())}setLineWidth(o){o>0&&(this.current.lineWidth=o)}setLineCap(o){this.current.lineCap=W[o]}setLineJoin(o){this.current.lineJoin=T[o]}setMiterLimit(o){this.current.miterLimit=o}setStrokeAlpha(o){this.current.strokeAlpha=o}setStrokeRGBColor(o,r,n){this.current.strokeColor=E.Util.makeHexColor(o,r,n)}setFillAlpha(o){this.current.fillAlpha=o}setFillRGBColor(o,r,n){this.current.fillColor=E.Util.makeHexColor(o,r,n),this.current.tspan=this.svgFactory.createElement("svg:tspan"),this.current.xcoords=[],this.current.ycoords=[]}setStrokeColorN(o){this.current.strokeColor=this._makeColorN_Pattern(o)}setFillColorN(o){this.current.fillColor=this._makeColorN_Pattern(o)}shadingFill(o){const{width:r,height:n}=this.viewport,S=E.Util.inverseTransform(this.transformMatrix),[p,G,h,P]=E.Util.getAxialAlignedBoundingBox([0,0,r,n],S),$=this.svgFactory.createElement("svg:rect");$.setAttributeNS(null,"x",p),$.setAttributeNS(null,"y",G),$.setAttributeNS(null,"width",h-p),$.setAttributeNS(null,"height",P-G),$.setAttributeNS(null,"fill",this._makeShadingPattern(o)),this.current.fillAlpha<1&&$.setAttributeNS(null,"fill-opacity",this.current.fillAlpha),this._ensureTransformGroup().append($)}_makeColorN_Pattern(o){return o[0]==="TilingPattern"?this._makeTilingPattern(o):this._makeShadingPattern(o)}_makeTilingPattern(o){const r=o[1],n=o[2],S=o[3]||E.IDENTITY_MATRIX,[p,G,h,P]=o[4],$=o[5],bt=o[6],nt=o[7],at=`shading${A++}`,[K,vt,N,Q]=E.Util.normalizeRect([...E.Util.applyTransform([p,G],S),...E.Util.applyTransform([h,P],S)]),[ct,k]=E.Util.singularValueDecompose2dScale(S),s=$*ct,a=bt*k,m=this.svgFactory.createElement("svg:pattern");m.setAttributeNS(null,"id",at),m.setAttributeNS(null,"patternUnits","userSpaceOnUse"),m.setAttributeNS(null,"width",s),m.setAttributeNS(null,"height",a),m.setAttributeNS(null,"x",`${K}`),m.setAttributeNS(null,"y",`${vt}`);const F=this.svg,L=this.transformMatrix,R=this.current.fillColor,q=this.current.strokeColor,mt=this.svgFactory.create(N-K,Q-vt);if(this.svg=mt,this.transformMatrix=S,nt===2){const At=E.Util.makeHexColor(...r);this.current.fillColor=At,this.current.strokeColor=At}return this.executeOpTree(this.convertOpList(n)),this.svg=F,this.transformMatrix=L,this.current.fillColor=R,this.current.strokeColor=q,m.append(mt.childNodes[0]),this.defs.append(m),`url(#${at})`}_makeShadingPattern(o){switch(typeof o=="string"&&(o=this.objs.get(o)),o[0]){case"RadialAxial":const r=`shading${A++}`,n=o[3];let S;switch(o[1]){case"axial":const p=o[4],G=o[5];S=this.svgFactory.createElement("svg:linearGradient"),S.setAttributeNS(null,"id",r),S.setAttributeNS(null,"gradientUnits","userSpaceOnUse"),S.setAttributeNS(null,"x1",p[0]),S.setAttributeNS(null,"y1",p[1]),S.setAttributeNS(null,"x2",G[0]),S.setAttributeNS(null,"y2",G[1]);break;case"radial":const h=o[4],P=o[5],$=o[6],bt=o[7];S=this.svgFactory.createElement("svg:radialGradient"),S.setAttributeNS(null,"id",r),S.setAttributeNS(null,"gradientUnits","userSpaceOnUse"),S.setAttributeNS(null,"cx",P[0]),S.setAttributeNS(null,"cy",P[1]),S.setAttributeNS(null,"r",bt),S.setAttributeNS(null,"fx",h[0]),S.setAttributeNS(null,"fy",h[1]),S.setAttributeNS(null,"fr",$);break;default:throw new Error(`Unknown RadialAxial type: ${o[1]}`)}for(const p of n){const G=this.svgFactory.createElement("svg:stop");G.setAttributeNS(null,"offset",p[0]),G.setAttributeNS(null,"stop-color",p[1]),S.append(G)}return this.defs.append(S),`url(#${r})`;case"Mesh":return(0,E.warn)("Unimplemented pattern Mesh"),null;case"Dummy":return"hotpink";default:throw new Error(`Unknown IR type: ${o[0]}`)}}setDash(o,r){this.current.dashArray=o,this.current.dashPhase=r}constructPath(o,r){const n=this.current;let S=n.x,p=n.y,G=[],h=0;for(const P of o)switch(P|0){case E.OPS.rectangle:S=r[h++],p=r[h++];const $=r[h++],bt=r[h++],nt=S+$,at=p+bt;G.push("M",b(S),b(p),"L",b(nt),b(p),"L",b(nt),b(at),"L",b(S),b(at),"Z");break;case E.OPS.moveTo:S=r[h++],p=r[h++],G.push("M",b(S),b(p));break;case E.OPS.lineTo:S=r[h++],p=r[h++],G.push("L",b(S),b(p));break;case E.OPS.curveTo:S=r[h+4],p=r[h+5],G.push("C",b(r[h]),b(r[h+1]),b(r[h+2]),b(r[h+3]),b(S),b(p)),h+=6;break;case E.OPS.curveTo2:G.push("C",b(S),b(p),b(r[h]),b(r[h+1]),b(r[h+2]),b(r[h+3])),S=r[h+2],p=r[h+3],h+=4;break;case E.OPS.curveTo3:S=r[h+2],p=r[h+3],G.push("C",b(r[h]),b(r[h+1]),b(S),b(p),b(S),b(p)),h+=4;break;case E.OPS.closePath:G.push("Z");break}G=G.join(" "),n.path&&o.length>0&&o[0]!==E.OPS.rectangle&&o[0]!==E.OPS.moveTo?G=n.path.getAttributeNS(null,"d")+G:(n.path=this.svgFactory.createElement("svg:path"),this._ensureTransformGroup().append(n.path)),n.path.setAttributeNS(null,"d",G),n.path.setAttributeNS(null,"fill","none"),n.element=n.path,n.setCurrentPoint(S,p)}endPath(){const o=this.current;if(o.path=null,!this.pendingClip)return;if(!o.element){this.pendingClip=null;return}const r=`clippath${v++}`,n=this.svgFactory.createElement("svg:clipPath");n.setAttributeNS(null,"id",r),n.setAttributeNS(null,"transform",M(this.transformMatrix));const S=o.element.cloneNode(!0);if(this.pendingClip==="evenodd"?S.setAttributeNS(null,"clip-rule","evenodd"):S.setAttributeNS(null,"clip-rule","nonzero"),this.pendingClip=null,n.append(S),this.defs.append(n),o.activeClipUrl){o.clipGroup=null;for(const p of this.extraStack)p.clipGroup=null;n.setAttributeNS(null,"clip-path",o.activeClipUrl)}o.activeClipUrl=`url(#${r})`,this.tgrp=null}clip(o){this.pendingClip=o}closePath(){const o=this.current;if(o.path){const r=`${o.path.getAttributeNS(null,"d")}Z`;o.path.setAttributeNS(null,"d",r)}}setLeading(o){this.current.leading=-o}setTextRise(o){this.current.textRise=o}setTextRenderingMode(o){this.current.textRenderingMode=o}setHScale(o){this.current.textHScale=o/100}setRenderingIntent(o){}setFlatness(o){}setGState(o){for(const[r,n]of o)switch(r){case"LW":this.setLineWidth(n);break;case"LC":this.setLineCap(n);break;case"LJ":this.setLineJoin(n);break;case"ML":this.setMiterLimit(n);break;case"D":this.setDash(n[0],n[1]);break;case"RI":this.setRenderingIntent(n);break;case"FL":this.setFlatness(n);break;case"Font":this.setFont(n);break;case"CA":this.setStrokeAlpha(n);break;case"ca":this.setFillAlpha(n);break;default:(0,E.warn)(`Unimplemented graphic state operator ${r}`);break}}fill(){const o=this.current;o.element&&(o.element.setAttributeNS(null,"fill",o.fillColor),o.element.setAttributeNS(null,"fill-opacity",o.fillAlpha),this.endPath())}stroke(){const o=this.current;o.element&&(this._setStrokeAttributes(o.element),o.element.setAttributeNS(null,"fill","none"),this.endPath())}_setStrokeAttributes(o,r=1){const n=this.current;let S=n.dashArray;r!==1&&S.length>0&&(S=S.map(function(p){return r*p})),o.setAttributeNS(null,"stroke",n.strokeColor),o.setAttributeNS(null,"stroke-opacity",n.strokeAlpha),o.setAttributeNS(null,"stroke-miterlimit",b(n.miterLimit)),o.setAttributeNS(null,"stroke-linecap",n.lineCap),o.setAttributeNS(null,"stroke-linejoin",n.lineJoin),o.setAttributeNS(null,"stroke-width",b(r*n.lineWidth)+"px"),o.setAttributeNS(null,"stroke-dasharray",S.map(b).join(" ")),o.setAttributeNS(null,"stroke-dashoffset",b(r*n.dashPhase)+"px")}eoFill(){this.current.element?.setAttributeNS(null,"fill-rule","evenodd"),this.fill()}fillStroke(){this.stroke(),this.fill()}eoFillStroke(){this.current.element?.setAttributeNS(null,"fill-rule","evenodd"),this.fillStroke()}closeStroke(){this.closePath(),this.stroke()}closeFillStroke(){this.closePath(),this.fillStroke()}closeEOFillStroke(){this.closePath(),this.eoFillStroke()}paintSolidColorImageMask(){const o=this.svgFactory.createElement("svg:rect");o.setAttributeNS(null,"x","0"),o.setAttributeNS(null,"y","0"),o.setAttributeNS(null,"width","1px"),o.setAttributeNS(null,"height","1px"),o.setAttributeNS(null,"fill",this.current.fillColor),this._ensureTransformGroup().append(o)}paintImageXObject(o){const r=this.getObject(o);if(!r){(0,E.warn)(`Dependent image with object ID ${o} is not ready yet`);return}this.paintInlineImageXObject(r)}paintInlineImageXObject(o,r){const n=o.width,S=o.height,p=H(o,this.forceDataSchema,!!r),G=this.svgFactory.createElement("svg:rect");G.setAttributeNS(null,"x","0"),G.setAttributeNS(null,"y","0"),G.setAttributeNS(null,"width",b(n)),G.setAttributeNS(null,"height",b(S)),this.current.element=G,this.clip("nonzero");const h=this.svgFactory.createElement("svg:image");h.setAttributeNS(Ct,"xlink:href",p),h.setAttributeNS(null,"x","0"),h.setAttributeNS(null,"y",b(-S)),h.setAttributeNS(null,"width",b(n)+"px"),h.setAttributeNS(null,"height",b(S)+"px"),h.setAttributeNS(null,"transform",`scale(${b(1/n)} ${b(-1/S)})`),r?r.append(h):this._ensureTransformGroup().append(h)}paintImageMaskXObject(o){const r=this.getObject(o.data,o);if(r.bitmap){(0,E.warn)("paintImageMaskXObject: ImageBitmap support is not implemented, ensure that the `isOffscreenCanvasSupported` API parameter is disabled.");return}const n=this.current,S=r.width,p=r.height,G=n.fillColor;n.maskId=`mask${g++}`;const h=this.svgFactory.createElement("svg:mask");h.setAttributeNS(null,"id",n.maskId);const P=this.svgFactory.createElement("svg:rect");P.setAttributeNS(null,"x","0"),P.setAttributeNS(null,"y","0"),P.setAttributeNS(null,"width",b(S)),P.setAttributeNS(null,"height",b(p)),P.setAttributeNS(null,"fill",G),P.setAttributeNS(null,"mask",`url(#${n.maskId})`),this.defs.append(h),this._ensureTransformGroup().append(P),this.paintInlineImageXObject(r,h)}paintFormXObjectBegin(o,r){if(Array.isArray(o)&&o.length===6&&this.transform(o[0],o[1],o[2],o[3],o[4],o[5]),r){const n=r[2]-r[0],S=r[3]-r[1],p=this.svgFactory.createElement("svg:rect");p.setAttributeNS(null,"x",r[0]),p.setAttributeNS(null,"y",r[1]),p.setAttributeNS(null,"width",b(n)),p.setAttributeNS(null,"height",b(S)),this.current.element=p,this.clip("nonzero"),this.endPath()}}paintFormXObjectEnd(){}_initialize(o){const r=this.svgFactory.create(o.width,o.height),n=this.svgFactory.createElement("svg:defs");r.append(n),this.defs=n;const S=this.svgFactory.createElement("svg:g");return S.setAttributeNS(null,"transform",M(o.transform)),r.append(S),this.svg=S,r}_ensureClipGroup(){if(!this.current.clipGroup){const o=this.svgFactory.createElement("svg:g");o.setAttributeNS(null,"clip-path",this.current.activeClipUrl),this.svg.append(o),this.current.clipGroup=o}return this.current.clipGroup}_ensureTransformGroup(){return this.tgrp||(this.tgrp=this.svgFactory.createElement("svg:g"),this.tgrp.setAttributeNS(null,"transform",M(this.transformMatrix)),this.current.activeClipUrl?this._ensureClipGroup().append(this.tgrp):this.svg.append(this.tgrp)),this.tgrp}}u.SVGGraphics=O}),((c,u)=>{Object.defineProperty(u,"__esModule",{value:!0}),u.XfaText=void 0;class _t{static textContent(E){const t=[],Z={items:t,styles:Object.create(null)};function Ct(W){if(!W)return;let T=null;const d=W.name;if(d==="#text")T=W.value;else if(_t.shouldBuildText(d))W?.attributes?.textContent?T=W.attributes.textContent:W.value&&(T=W.value);else return;if(T!==null&&t.push({str:T}),!!W.children)for(const H of W.children)Ct(H)}return Ct(E),Z}static shouldBuildText(E){return!(E==="textarea"||E==="input"||E==="option"||E==="select")}}u.XfaText=_t}),((c,u,_t)=>{Object.defineProperty(u,"__esModule",{value:!0}),u.TextLayerRenderTask=void 0,u.renderTextLayer=M,u.updateTextLayer=v;var l=_t(1),E=_t(6);const t=1e5,Z=30,Ct=.8,W=new Map;function T(g,A){let O;if(A&&l.FeatureTest.isOffscreenCanvasSupported)O=new OffscreenCanvas(g,g).getContext("2d",{alpha:!1});else{const w=document.createElement("canvas");w.width=w.height=g,O=w.getContext("2d",{alpha:!1})}return O}function d(g,A){const O=W.get(g);if(O)return O;const w=T(Z,A);w.font=`${Z}px ${g}`;const o=w.measureText("");let r=o.fontBoundingBoxAscent,n=Math.abs(o.fontBoundingBoxDescent);if(r){const p=r/(r+n);return W.set(g,p),w.canvas.width=w.canvas.height=0,p}w.strokeStyle="red",w.clearRect(0,0,Z,Z),w.strokeText("g",0,0);let S=w.getImageData(0,0,Z,Z).data;n=0;for(let p=S.length-1-3;p>=0;p-=4)if(S[p]>0){n=Math.ceil(p/4/Z);break}w.clearRect(0,0,Z,Z),w.strokeText("A",0,Z),S=w.getImageData(0,0,Z,Z).data,r=0;for(let p=0,G=S.length;p<G;p+=4)if(S[p]>0){r=Z-Math.floor(p/4/Z);break}if(w.canvas.width=w.canvas.height=0,r){const p=r/(r+n);return W.set(g,p),p}return W.set(g,Ct),Ct}function H(g,A,O){const w=document.createElement("span"),o={angle:0,canvasWidth:0,hasText:A.str!=="",hasEOL:A.hasEOL,fontSize:0};g._textDivs.push(w);const r=l.Util.transform(g._transform,A.transform);let n=Math.atan2(r[1],r[0]);const S=O[A.fontName];S.vertical&&(n+=Math.PI/2);const p=Math.hypot(r[2],r[3]),G=p*d(S.fontFamily,g._isOffscreenCanvasSupported);let h,P;n===0?(h=r[4],P=r[5]-G):(h=r[4]+G*Math.sin(n),P=r[5]-G*Math.cos(n));const $="calc(var(--scale-factor)*",bt=w.style;g._container===g._rootContainer?(bt.left=`${(100*h/g._pageWidth).toFixed(2)}%`,bt.top=`${(100*P/g._pageHeight).toFixed(2)}%`):(bt.left=`${$}${h.toFixed(2)}px)`,bt.top=`${$}${P.toFixed(2)}px)`),bt.fontSize=`${$}${p.toFixed(2)}px)`,bt.fontFamily=S.fontFamily,o.fontSize=p,w.setAttribute("role","presentation"),w.textContent=A.str,w.dir=A.dir,g._fontInspectorEnabled&&(w.dataset.fontName=A.fontName),n!==0&&(o.angle=n*(180/Math.PI));let nt=!1;if(A.str.length>1)nt=!0;else if(A.str!==" "&&A.transform[0]!==A.transform[3]){const at=Math.abs(A.transform[0]),K=Math.abs(A.transform[3]);at!==K&&Math.max(at,K)/Math.min(at,K)>1.5&&(nt=!0)}nt&&(o.canvasWidth=S.vertical?A.height:A.width),g._textDivProperties.set(w,o),g._isReadableStream&&g._layoutText(w)}function j(g){const{div:A,scale:O,properties:w,ctx:o,prevFontSize:r,prevFontFamily:n}=g,{style:S}=A;let p="";if(w.canvasWidth!==0&&w.hasText){const{fontFamily:G}=S,{canvasWidth:h,fontSize:P}=w;(r!==P||n!==G)&&(o.font=`${P*O}px ${G}`,g.prevFontSize=P,g.prevFontFamily=G);const{width:$}=o.measureText(A.textContent);$>0&&(p=`scaleX(${h*O/$})`)}w.angle!==0&&(p=`rotate(${w.angle}deg) ${p}`),p.length>0&&(S.transform=p)}function y(g){if(g._canceled)return;const A=g._textDivs,O=g._capability;if(A.length>t){O.resolve();return}if(!g._isReadableStream)for(const o of A)g._layoutText(o);O.resolve()}class b{constructor({textContentSource:A,container:O,viewport:w,textDivs:o,textDivProperties:r,textContentItemsStr:n,isOffscreenCanvasSupported:S}){this._textContentSource=A,this._isReadableStream=A instanceof ReadableStream,this._container=this._rootContainer=O,this._textDivs=o||[],this._textContentItemsStr=n||[],this._isOffscreenCanvasSupported=S,this._fontInspectorEnabled=!!globalThis.FontInspector?.enabled,this._reader=null,this._textDivProperties=r||new WeakMap,this._canceled=!1,this._capability=new l.PromiseCapability,this._layoutTextParams={prevFontSize:null,prevFontFamily:null,div:null,scale:w.scale*(globalThis.devicePixelRatio||1),properties:null,ctx:T(0,S)};const{pageWidth:p,pageHeight:G,pageX:h,pageY:P}=w.rawDims;this._transform=[1,0,0,-1,-h,P+G],this._pageWidth=p,this._pageHeight=G,(0,E.setLayerDimensions)(O,w),this._capability.promise.finally(()=>{this._layoutTextParams=null}).catch(()=>{})}get promise(){return this._capability.promise}cancel(){this._canceled=!0,this._reader&&(this._reader.cancel(new l.AbortException("TextLayer task cancelled.")).catch(()=>{}),this._reader=null),this._capability.reject(new l.AbortException("TextLayer task cancelled."))}_processItems(A,O){for(const w of A){if(w.str===void 0){if(w.type==="beginMarkedContentProps"||w.type==="beginMarkedContent"){const o=this._container;this._container=document.createElement("span"),this._container.classList.add("markedContent"),w.id!==null&&this._container.setAttribute("id",`${w.id}`),o.append(this._container)}else w.type==="endMarkedContent"&&(this._container=this._container.parentNode);continue}this._textContentItemsStr.push(w.str),H(this,w,O)}}_layoutText(A){const O=this._layoutTextParams.properties=this._textDivProperties.get(A);if(this._layoutTextParams.div=A,j(this._layoutTextParams),O.hasText&&this._container.append(A),O.hasEOL){const w=document.createElement("br");w.setAttribute("role","presentation"),this._container.append(w)}}_render(){const A=new l.PromiseCapability;let O=Object.create(null);if(this._isReadableStream){const w=()=>{this._reader.read().then(({value:o,done:r})=>{if(r){A.resolve();return}Object.assign(O,o.styles),this._processItems(o.items,O),w()},A.reject)};this._reader=this._textContentSource.getReader(),w()}else if(this._textContentSource){const{items:w,styles:o}=this._textContentSource;this._processItems(w,o),A.resolve()}else throw new Error('No "textContentSource" parameter specified.');A.promise.then(()=>{O=null,y(this)},this._capability.reject)}}u.TextLayerRenderTask=b;function M(g){!g.textContentSource&&(g.textContent||g.textContentStream)&&((0,E.deprecated)("The TextLayerRender `textContent`/`textContentStream` parameters will be removed in the future, please use `textContentSource` instead."),g.textContentSource=g.textContent||g.textContentStream);const{container:A,viewport:O}=g,w=getComputedStyle(A),o=w.getPropertyValue("visibility"),r=parseFloat(w.getPropertyValue("--scale-factor"));o==="visible"&&(!r||Math.abs(r-O.scale)>1e-5)&&console.error("The `--scale-factor` CSS-variable must be set, to the same value as `viewport.scale`, either on the `container`-element itself or higher up in the DOM.");const n=new b(g);return n._render(),n}function v({container:g,viewport:A,textDivs:O,textDivProperties:w,isOffscreenCanvasSupported:o,mustRotate:r=!0,mustRescale:n=!0}){if(r&&(0,E.setLayerDimensions)(g,{rotation:A.rotation}),n){const S=T(0,o),G={prevFontSize:null,prevFontFamily:null,div:null,scale:A.scale*(globalThis.devicePixelRatio||1),properties:null,ctx:S};for(const h of O)G.properties=w.get(h),G.div=h,j(G)}}}),((c,u,_t)=>{var d,H,j,y,b,M,v,g,A,O,w,Gi,li,Xi,Yi;Object.defineProperty(u,"__esModule",{value:!0}),u.AnnotationEditorLayer=void 0;var l=_t(1),E=_t(4),t=_t(28),Z=_t(33),Ct=_t(6),W=_t(34);const p=class p{constructor({uiManager:h,pageIndex:P,div:$,accessibilityManager:bt,annotationLayer:nt,viewport:at,l10n:K}){pt(this,w);pt(this,d);pt(this,H,!1);pt(this,j,null);pt(this,y,this.pointerup.bind(this));pt(this,b,this.pointerdown.bind(this));pt(this,M,new Map);pt(this,v,!1);pt(this,g,!1);pt(this,A,!1);pt(this,O);const vt=[t.FreeTextEditor,Z.InkEditor,W.StampEditor];if(!p._initialized){p._initialized=!0;for(const N of vt)N.initialize(K)}h.registerEditorTypes(vt),gt(this,O,h),this.pageIndex=P,this.div=$,gt(this,d,bt),gt(this,j,nt),this.viewport=at,e(this,O).addLayer(this)}get isEmpty(){return e(this,M).size===0}updateToolbar(h){e(this,O).updateToolbar(h)}updateMode(h=e(this,O).getMode()){J(this,w,Yi).call(this),h===l.AnnotationEditorType.INK?(this.addInkEditorIfNeeded(!1),this.disableClick()):this.enableClick(),h!==l.AnnotationEditorType.NONE&&(this.div.classList.toggle("freeTextEditing",h===l.AnnotationEditorType.FREETEXT),this.div.classList.toggle("inkEditing",h===l.AnnotationEditorType.INK),this.div.classList.toggle("stampEditing",h===l.AnnotationEditorType.STAMP),this.div.hidden=!1)}addInkEditorIfNeeded(h){if(!h&&e(this,O).getMode()!==l.AnnotationEditorType.INK)return;if(!h){for(const $ of e(this,M).values())if($.isEmpty()){$.setInBackground();return}}J(this,w,li).call(this,{offsetX:0,offsetY:0},!1).setInBackground()}setEditingState(h){e(this,O).setEditingState(h)}addCommands(h){e(this,O).addCommands(h)}enable(){this.div.style.pointerEvents="auto";const h=new Set;for(const $ of e(this,M).values())$.enableEditing(),$.annotationElementId&&h.add($.annotationElementId);if(!e(this,j))return;const P=e(this,j).getEditableAnnotations();for(const $ of P){if($.hide(),e(this,O).isDeletedAnnotationElement($.data.id)||h.has($.data.id))continue;const bt=this.deserialize($);bt&&(this.addOrRebuild(bt),bt.enableEditing())}}disable(){gt(this,A,!0),this.div.style.pointerEvents="none";const h=new Set;for(const P of e(this,M).values()){if(P.disableEditing(),!P.annotationElementId||P.serialize()!==null){h.add(P.annotationElementId);continue}this.getEditableAnnotation(P.annotationElementId)?.show(),P.remove()}if(e(this,j)){const P=e(this,j).getEditableAnnotations();for(const $ of P){const{id:bt}=$.data;h.has(bt)||e(this,O).isDeletedAnnotationElement(bt)||$.show()}}J(this,w,Yi).call(this),this.isEmpty&&(this.div.hidden=!0),gt(this,A,!1)}getEditableAnnotation(h){return e(this,j)?.getEditableAnnotation(h)||null}setActiveEditor(h){e(this,O).getActive()!==h&&e(this,O).setActiveEditor(h)}enableClick(){this.div.addEventListener("pointerdown",e(this,b)),this.div.addEventListener("pointerup",e(this,y))}disableClick(){this.div.removeEventListener("pointerdown",e(this,b)),this.div.removeEventListener("pointerup",e(this,y))}attach(h){e(this,M).set(h.id,h);const{annotationElementId:P}=h;P&&e(this,O).isDeletedAnnotationElement(P)&&e(this,O).removeDeletedAnnotationElement(h)}detach(h){e(this,M).delete(h.id),e(this,d)?.removePointerInTextLayer(h.contentDiv),!e(this,A)&&h.annotationElementId&&e(this,O).addDeletedAnnotationElement(h)}remove(h){this.detach(h),e(this,O).removeEditor(h),h.div.contains(document.activeElement)&&setTimeout(()=>{e(this,O).focusMainContainer()},0),h.div.remove(),h.isAttachedToDOM=!1,e(this,g)||this.addInkEditorIfNeeded(!1)}changeParent(h){h.parent!==this&&(h.annotationElementId&&(e(this,O).addDeletedAnnotationElement(h.annotationElementId),E.AnnotationEditor.deleteAnnotationElement(h),h.annotationElementId=null),this.attach(h),h.parent?.detach(h),h.setParent(this),h.div&&h.isAttachedToDOM&&(h.div.remove(),this.div.append(h.div)))}add(h){if(this.changeParent(h),e(this,O).addEditor(h),this.attach(h),!h.isAttachedToDOM){const P=h.render();this.div.append(P),h.isAttachedToDOM=!0}h.fixAndSetPosition(),h.onceAdded(),e(this,O).addToAnnotationStorage(h)}moveEditorInDOM(h){if(!h.isAttachedToDOM)return;const{activeElement:P}=document;h.div.contains(P)&&(h._focusEventsAllowed=!1,setTimeout(()=>{h.div.contains(document.activeElement)?h._focusEventsAllowed=!0:(h.div.addEventListener("focusin",()=>{h._focusEventsAllowed=!0},{once:!0}),P.focus())},0)),h._structTreeParentId=e(this,d)?.moveElementInDOM(this.div,h.div,h.contentDiv,!0)}addOrRebuild(h){h.needsToBeRebuilt()?h.rebuild():this.add(h)}addUndoableEditor(h){const P=()=>h._uiManager.rebuild(h),$=()=>{h.remove()};this.addCommands({cmd:P,undo:$,mustExec:!1})}getNextId(){return e(this,O).getId()}pasteEditor(h,P){e(this,O).updateToolbar(h),e(this,O).updateMode(h);const{offsetX:$,offsetY:bt}=J(this,w,Xi).call(this),nt=this.getNextId(),at=J(this,w,Gi).call(this,{parent:this,id:nt,x:$,y:bt,uiManager:e(this,O),isCentered:!0,...P});at&&this.add(at)}deserialize(h){switch(h.annotationType??h.annotationEditorType){case l.AnnotationEditorType.FREETEXT:return t.FreeTextEditor.deserialize(h,this,e(this,O));case l.AnnotationEditorType.INK:return Z.InkEditor.deserialize(h,this,e(this,O));case l.AnnotationEditorType.STAMP:return W.StampEditor.deserialize(h,this,e(this,O))}return null}addNewEditor(){J(this,w,li).call(this,J(this,w,Xi).call(this),!0)}setSelected(h){e(this,O).setSelected(h)}toggleSelected(h){e(this,O).toggleSelected(h)}isSelected(h){return e(this,O).isSelected(h)}unselect(h){e(this,O).unselect(h)}pointerup(h){const{isMac:P}=l.FeatureTest.platform;if(!(h.button!==0||h.ctrlKey&&P)&&h.target===this.div&&e(this,v)){if(gt(this,v,!1),!e(this,H)){gt(this,H,!0);return}if(e(this,O).getMode()===l.AnnotationEditorType.STAMP){e(this,O).unselectAll();return}J(this,w,li).call(this,h,!1)}}pointerdown(h){if(e(this,v)){gt(this,v,!1);return}const{isMac:P}=l.FeatureTest.platform;if(h.button!==0||h.ctrlKey&&P||h.target!==this.div)return;gt(this,v,!0);const $=e(this,O).getActive();gt(this,H,!$||$.isEmpty())}findNewParent(h,P,$){const bt=e(this,O).findParent(P,$);return bt===null||bt===this?!1:(bt.changeParent(h),!0)}destroy(){e(this,O).getActive()?.parent===this&&(e(this,O).commitOrRemove(),e(this,O).setActiveEditor(null));for(const h of e(this,M).values())e(this,d)?.removePointerInTextLayer(h.contentDiv),h.setParent(null),h.isAttachedToDOM=!1,h.div.remove();this.div=null,e(this,M).clear(),e(this,O).removeLayer(this)}render({viewport:h}){this.viewport=h,(0,Ct.setLayerDimensions)(this.div,h);for(const P of e(this,O).getEditors(this.pageIndex))this.add(P);this.updateMode()}update({viewport:h}){e(this,O).commitOrRemove(),this.viewport=h,(0,Ct.setLayerDimensions)(this.div,{rotation:h.rotation}),this.updateMode()}get pageDimensions(){const{pageWidth:h,pageHeight:P}=this.viewport.rawDims;return[h,P]}};d=new WeakMap,H=new WeakMap,j=new WeakMap,y=new WeakMap,b=new WeakMap,M=new WeakMap,v=new WeakMap,g=new WeakMap,A=new WeakMap,O=new WeakMap,w=new WeakSet,Gi=function(h){switch(e(this,O).getMode()){case l.AnnotationEditorType.FREETEXT:return new t.FreeTextEditor(h);case l.AnnotationEditorType.INK:return new Z.InkEditor(h);case l.AnnotationEditorType.STAMP:return new W.StampEditor(h)}return null},li=function(h,P){const $=this.getNextId(),bt=J(this,w,Gi).call(this,{parent:this,id:$,x:h.offsetX,y:h.offsetY,uiManager:e(this,O),isCentered:P});return bt&&this.add(bt),bt},Xi=function(){const{x:h,y:P,width:$,height:bt}=this.div.getBoundingClientRect(),nt=Math.max(0,h),at=Math.max(0,P),K=Math.min(window.innerWidth,h+$),vt=Math.min(window.innerHeight,P+bt),N=(nt+K)/2-h,Q=(at+vt)/2-P,[ct,k]=this.viewport.rotation%180===0?[N,Q]:[Q,N];return{offsetX:ct,offsetY:k}},Yi=function(){gt(this,g,!0);for(const h of e(this,M).values())h.isEmpty()&&h.remove();gt(this,g,!1)},$e(p,"_initialized",!1);let T=p;u.AnnotationEditorLayer=T}),((c,u,_t)=>{var W,T,d,H,j,y,b,M,v,g,Hr,Ur,Wr,$n,Ki,zr,Ji;Object.defineProperty(u,"__esModule",{value:!0}),u.FreeTextEditor=void 0;var l=_t(1),E=_t(5),t=_t(4),Z=_t(29);const p=class p extends t.AnnotationEditor{constructor(P){super({...P,name:"freeTextEditor"});pt(this,g);pt(this,W,this.editorDivBlur.bind(this));pt(this,T,this.editorDivFocus.bind(this));pt(this,d,this.editorDivInput.bind(this));pt(this,H,this.editorDivKeydown.bind(this));pt(this,j);pt(this,y,"");pt(this,b,`${this.id}-editor`);pt(this,M);pt(this,v,null);gt(this,j,P.color||p._defaultColor||t.AnnotationEditor._defaultLineColor),gt(this,M,P.fontSize||p._defaultFontSize)}static get _keyboardManager(){const P=p.prototype,$=at=>at.isEmpty(),bt=E.AnnotationEditorUIManager.TRANSLATE_SMALL,nt=E.AnnotationEditorUIManager.TRANSLATE_BIG;return(0,l.shadow)(this,"_keyboardManager",new E.KeyboardManager([[["ctrl+s","mac+meta+s","ctrl+p","mac+meta+p"],P.commitOrRemove,{bubbles:!0}],[["ctrl+Enter","mac+meta+Enter","Escape","mac+Escape"],P.commitOrRemove],[["ArrowLeft","mac+ArrowLeft"],P._translateEmpty,{args:[-bt,0],checker:$}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],P._translateEmpty,{args:[-nt,0],checker:$}],[["ArrowRight","mac+ArrowRight"],P._translateEmpty,{args:[bt,0],checker:$}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],P._translateEmpty,{args:[nt,0],checker:$}],[["ArrowUp","mac+ArrowUp"],P._translateEmpty,{args:[0,-bt],checker:$}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],P._translateEmpty,{args:[0,-nt],checker:$}],[["ArrowDown","mac+ArrowDown"],P._translateEmpty,{args:[0,bt],checker:$}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],P._translateEmpty,{args:[0,nt],checker:$}]]))}static initialize(P){t.AnnotationEditor.initialize(P,{strings:["free_text2_default_content","editor_free_text2_aria_label"]});const $=getComputedStyle(document.documentElement);this._internalPadding=parseFloat($.getPropertyValue("--freetext-padding"))}static updateDefaultParams(P,$){switch(P){case l.AnnotationEditorParamsType.FREETEXT_SIZE:p._defaultFontSize=$;break;case l.AnnotationEditorParamsType.FREETEXT_COLOR:p._defaultColor=$;break}}updateParams(P,$){switch(P){case l.AnnotationEditorParamsType.FREETEXT_SIZE:J(this,g,Hr).call(this,$);break;case l.AnnotationEditorParamsType.FREETEXT_COLOR:J(this,g,Ur).call(this,$);break}}static get defaultPropertiesToUpdate(){return[[l.AnnotationEditorParamsType.FREETEXT_SIZE,p._defaultFontSize],[l.AnnotationEditorParamsType.FREETEXT_COLOR,p._defaultColor||t.AnnotationEditor._defaultLineColor]]}get propertiesToUpdate(){return[[l.AnnotationEditorParamsType.FREETEXT_SIZE,e(this,M)],[l.AnnotationEditorParamsType.FREETEXT_COLOR,e(this,j)]]}_translateEmpty(P,$){this._uiManager.translateSelectedEditors(P,$,!0)}getInitialTranslation(){const P=this.parentScale;return[-p._internalPadding*P,-(p._internalPadding+e(this,M))*P]}rebuild(){this.parent&&(super.rebuild(),this.div!==null&&(this.isAttachedToDOM||this.parent.add(this)))}enableEditMode(){this.isInEditMode()||(this.parent.setEditingState(!1),this.parent.updateToolbar(l.AnnotationEditorType.FREETEXT),super.enableEditMode(),this.overlayDiv.classList.remove("enabled"),this.editorDiv.contentEditable=!0,this._isDraggable=!1,this.div.removeAttribute("aria-activedescendant"),this.editorDiv.addEventListener("keydown",e(this,H)),this.editorDiv.addEventListener("focus",e(this,T)),this.editorDiv.addEventListener("blur",e(this,W)),this.editorDiv.addEventListener("input",e(this,d)))}disableEditMode(){this.isInEditMode()&&(this.parent.setEditingState(!0),super.disableEditMode(),this.overlayDiv.classList.add("enabled"),this.editorDiv.contentEditable=!1,this.div.setAttribute("aria-activedescendant",e(this,b)),this._isDraggable=!0,this.editorDiv.removeEventListener("keydown",e(this,H)),this.editorDiv.removeEventListener("focus",e(this,T)),this.editorDiv.removeEventListener("blur",e(this,W)),this.editorDiv.removeEventListener("input",e(this,d)),this.div.focus({preventScroll:!0}),this.isEditing=!1,this.parent.div.classList.add("freeTextEditing"))}focusin(P){this._focusEventsAllowed&&(super.focusin(P),P.target!==this.editorDiv&&this.editorDiv.focus())}onceAdded(){if(this.width){J(this,g,Ji).call(this);return}this.enableEditMode(),this.editorDiv.focus(),this._initialOptions?.isCentered&&this.center(),this._initialOptions=null}isEmpty(){return!this.editorDiv||this.editorDiv.innerText.trim()===""}remove(){this.isEditing=!1,this.parent&&(this.parent.setEditingState(!0),this.parent.div.classList.add("freeTextEditing")),super.remove()}commit(){if(!this.isInEditMode())return;super.commit(),this.disableEditMode();const P=e(this,y),$=gt(this,y,J(this,g,Wr).call(this).trimEnd());if(P===$)return;const bt=nt=>{if(gt(this,y,nt),!nt){this.remove();return}J(this,g,Ki).call(this),this._uiManager.rebuild(this),J(this,g,$n).call(this)};this.addCommands({cmd:()=>{bt($)},undo:()=>{bt(P)},mustExec:!1}),J(this,g,$n).call(this)}shouldGetKeyboardEvents(){return this.isInEditMode()}enterInEditMode(){this.enableEditMode(),this.editorDiv.focus()}dblclick(P){this.enterInEditMode()}keydown(P){P.target===this.div&&P.key==="Enter"&&(this.enterInEditMode(),P.preventDefault())}editorDivKeydown(P){p._keyboardManager.exec(this,P)}editorDivFocus(P){this.isEditing=!0}editorDivBlur(P){this.isEditing=!1}editorDivInput(P){this.parent.div.classList.toggle("freeTextEditing",this.isEmpty())}disableEditing(){this.editorDiv.setAttribute("role","comment"),this.editorDiv.removeAttribute("aria-multiline")}enableEditing(){this.editorDiv.setAttribute("role","textbox"),this.editorDiv.setAttribute("aria-multiline",!0)}render(){if(this.div)return this.div;let P,$;this.width&&(P=this.x,$=this.y),super.render(),this.editorDiv=document.createElement("div"),this.editorDiv.className="internal",this.editorDiv.setAttribute("id",e(this,b)),this.enableEditing(),t.AnnotationEditor._l10nPromise.get("editor_free_text2_aria_label").then(nt=>this.editorDiv?.setAttribute("aria-label",nt)),t.AnnotationEditor._l10nPromise.get("free_text2_default_content").then(nt=>this.editorDiv?.setAttribute("default-content",nt)),this.editorDiv.contentEditable=!0;const{style:bt}=this.editorDiv;if(bt.fontSize=`calc(${e(this,M)}px * var(--scale-factor))`,bt.color=e(this,j),this.div.append(this.editorDiv),this.overlayDiv=document.createElement("div"),this.overlayDiv.classList.add("overlay","enabled"),this.div.append(this.overlayDiv),(0,E.bindEvents)(this,this.div,["dblclick","keydown"]),this.width){const[nt,at]=this.parentDimensions;if(this.annotationElementId){const{position:K}=e(this,v);let[vt,N]=this.getInitialTranslation();[vt,N]=this.pageTranslationToScreen(vt,N);const[Q,ct]=this.pageDimensions,[k,s]=this.pageTranslation;let a,m;switch(this.rotation){case 0:a=P+(K[0]-k)/Q,m=$+this.height-(K[1]-s)/ct;break;case 90:a=P+(K[0]-k)/Q,m=$-(K[1]-s)/ct,[vt,N]=[N,-vt];break;case 180:a=P-this.width+(K[0]-k)/Q,m=$-(K[1]-s)/ct,[vt,N]=[-vt,-N];break;case 270:a=P+(K[0]-k-this.height*ct)/Q,m=$+(K[1]-s-this.width*Q)/ct,[vt,N]=[-N,vt];break}this.setAt(a*nt,m*at,vt,N)}else this.setAt(P*nt,$*at,this.width*nt,this.height*at);J(this,g,Ki).call(this),this._isDraggable=!0,this.editorDiv.contentEditable=!1}else this._isDraggable=!1,this.editorDiv.contentEditable=!0;return this.div}get contentDiv(){return this.editorDiv}static deserialize(P,$,bt){let nt=null;if(P instanceof Z.FreeTextAnnotationElement){const{data:{defaultAppearanceData:{fontSize:K,fontColor:vt},rect:N,rotation:Q,id:ct},textContent:k,textPosition:s,parent:{page:{pageNumber:a}}}=P;if(!k||k.length===0)return null;nt=P={annotationType:l.AnnotationEditorType.FREETEXT,color:Array.from(vt),fontSize:K,value:k.join(`
`),position:s,pageIndex:a-1,rect:N,rotation:Q,id:ct,deleted:!1}}const at=super.deserialize(P,$,bt);return gt(at,M,P.fontSize),gt(at,j,l.Util.makeHexColor(...P.color)),gt(at,y,P.value),at.annotationElementId=P.id||null,gt(at,v,nt),at}serialize(P=!1){if(this.isEmpty())return null;if(this.deleted)return{pageIndex:this.pageIndex,id:this.annotationElementId,deleted:!0};const $=p._internalPadding*this.parentScale,bt=this.getRect($,$),nt=t.AnnotationEditor._colorManager.convert(this.isAttachedToDOM?getComputedStyle(this.editorDiv).color:e(this,j)),at={annotationType:l.AnnotationEditorType.FREETEXT,color:nt,fontSize:e(this,M),value:e(this,y),pageIndex:this.pageIndex,rect:bt,rotation:this.rotation,structTreeParentId:this._structTreeParentId};return P?at:this.annotationElementId&&!J(this,g,zr).call(this,at)?null:(at.id=this.annotationElementId,at)}};W=new WeakMap,T=new WeakMap,d=new WeakMap,H=new WeakMap,j=new WeakMap,y=new WeakMap,b=new WeakMap,M=new WeakMap,v=new WeakMap,g=new WeakSet,Hr=function(P){const $=nt=>{this.editorDiv.style.fontSize=`calc(${nt}px * var(--scale-factor))`,this.translate(0,-(nt-e(this,M))*this.parentScale),gt(this,M,nt),J(this,g,$n).call(this)},bt=e(this,M);this.addCommands({cmd:()=>{$(P)},undo:()=>{$(bt)},mustExec:!0,type:l.AnnotationEditorParamsType.FREETEXT_SIZE,overwriteIfSameType:!0,keepUndo:!0})},Ur=function(P){const $=e(this,j);this.addCommands({cmd:()=>{gt(this,j,this.editorDiv.style.color=P)},undo:()=>{gt(this,j,this.editorDiv.style.color=$)},mustExec:!0,type:l.AnnotationEditorParamsType.FREETEXT_COLOR,overwriteIfSameType:!0,keepUndo:!0})},Wr=function(){const P=this.editorDiv.getElementsByTagName("div");if(P.length===0)return this.editorDiv.innerText;const $=[];for(const bt of P)$.push(bt.innerText.replace(/\r\n?|\n/,""));return $.join(`
`)},$n=function(){const[P,$]=this.parentDimensions;let bt;if(this.isAttachedToDOM)bt=this.div.getBoundingClientRect();else{const{currentLayer:nt,div:at}=this,K=at.style.display;at.style.display="hidden",nt.div.append(this.div),bt=at.getBoundingClientRect(),at.remove(),at.style.display=K}this.rotation%180===this.parentRotation%180?(this.width=bt.width/P,this.height=bt.height/$):(this.width=bt.height/P,this.height=bt.width/$),this.fixAndSetPosition()},Ki=function(){if(this.editorDiv.replaceChildren(),!!e(this,y))for(const P of e(this,y).split(`
`)){const $=document.createElement("div");$.append(P?document.createTextNode(P):document.createElement("br")),this.editorDiv.append($)}},zr=function(P){const{value:$,fontSize:bt,color:nt,rect:at,pageIndex:K}=e(this,v);return P.value!==$||P.fontSize!==bt||P.rect.some((vt,N)=>Math.abs(vt-at[N])>=1)||P.color.some((vt,N)=>vt!==nt[N])||P.pageIndex!==K},Ji=function(P=!1){if(!this.annotationElementId)return;if(J(this,g,$n).call(this),!P&&(this.width===0||this.height===0)){setTimeout(()=>J(this,g,Ji).call(this,!0),0);return}const $=p._internalPadding*this.parentScale;e(this,v).rect=this.getRect($,$)},$e(p,"_freeTextDefaultContent",""),$e(p,"_internalPadding",0),$e(p,"_defaultColor",null),$e(p,"_defaultFontSize",10),$e(p,"_type","freetext");let Ct=p;u.FreeTextEditor=Ct}),((c,u,_t)=>{var m,L,xn,Vr,mt,At,Et,Pt,Rt,Lt,ht,dt,_,I,tt,ut,wt,Ft,Tt,et,jt,Bt,$r,hi,Zi,Qi,le,_e,Le,Mt,ot,st,Yt,tr,ne,B,xt,Wt,qr,er;Object.defineProperty(u,"__esModule",{value:!0}),u.StampAnnotationElement=u.InkAnnotationElement=u.FreeTextAnnotationElement=u.AnnotationLayer=void 0;var l=_t(1),E=_t(6),t=_t(3),Z=_t(30),Ct=_t(31),W=_t(32);const T=1e3,d=9,H=new WeakSet;function j(Gt){return{width:Gt[2]-Gt[0],height:Gt[3]-Gt[1]}}class y{static create(x){switch(x.data.annotationType){case l.AnnotationType.LINK:return new M(x);case l.AnnotationType.TEXT:return new v(x);case l.AnnotationType.WIDGET:switch(x.data.fieldType){case"Tx":return new A(x);case"Btn":return x.data.radioButton?new o(x):x.data.checkBox?new w(x):new r(x);case"Ch":return new n(x);case"Sig":return new O(x)}return new g(x);case l.AnnotationType.POPUP:return new S(x);case l.AnnotationType.FREETEXT:return new G(x);case l.AnnotationType.LINE:return new h(x);case l.AnnotationType.SQUARE:return new P(x);case l.AnnotationType.CIRCLE:return new $(x);case l.AnnotationType.POLYLINE:return new bt(x);case l.AnnotationType.CARET:return new at(x);case l.AnnotationType.INK:return new K(x);case l.AnnotationType.POLYGON:return new nt(x);case l.AnnotationType.HIGHLIGHT:return new vt(x);case l.AnnotationType.UNDERLINE:return new N(x);case l.AnnotationType.SQUIGGLY:return new Q(x);case l.AnnotationType.STRIKEOUT:return new ct(x);case l.AnnotationType.STAMP:return new k(x);case l.AnnotationType.FILEATTACHMENT:return new s(x);default:return new b(x)}}}const F=class F{constructor(x,{isRenderable:C=!1,ignoreBorder:X=!1,createQuadrilaterals:yt=!1}={}){pt(this,m,!1);this.isRenderable=C,this.data=x.data,this.layer=x.layer,this.linkService=x.linkService,this.downloadManager=x.downloadManager,this.imageResourcesPath=x.imageResourcesPath,this.renderForms=x.renderForms,this.svgFactory=x.svgFactory,this.annotationStorage=x.annotationStorage,this.enableScripting=x.enableScripting,this.hasJSActions=x.hasJSActions,this._fieldObjects=x.fieldObjects,this.parent=x.parent,C&&(this.container=this._createContainer(X)),yt&&this._createQuadrilaterals()}static _hasPopupData({titleObj:x,contentsObj:C,richText:X}){return!!(x?.str||C?.str||X?.str)}get hasPopupData(){return F._hasPopupData(this.data)}_createContainer(x){const{data:C,parent:{page:X,viewport:yt}}=this,St=document.createElement("section");St.setAttribute("data-annotation-id",C.id),this instanceof g||(St.tabIndex=T),St.style.zIndex=this.parent.zIndex++,this.data.popupRef&&St.setAttribute("aria-haspopup","dialog"),C.noRotate&&St.classList.add("norotate");const{pageWidth:kt,pageHeight:Nt,pageX:Vt,pageY:ae}=yt.rawDims;if(!C.rect||this instanceof S){const{rotation:Se}=C;return!C.hasOwnCanvas&&Se!==0&&this.setRotation(Se,St),St}const{width:te,height:qt}=j(C.rect),Kt=l.Util.normalizeRect([C.rect[0],X.view[3]-C.rect[1]+X.view[1],C.rect[2],X.view[3]-C.rect[3]+X.view[1]]);if(!x&&C.borderStyle.width>0){St.style.borderWidth=`${C.borderStyle.width}px`;const Se=C.borderStyle.horizontalCornerRadius,Ue=C.borderStyle.verticalCornerRadius;if(Se>0||Ue>0){const Ke=`calc(${Se}px * var(--scale-factor)) / calc(${Ue}px * var(--scale-factor))`;St.style.borderRadius=Ke}else if(this instanceof o){const Ke=`calc(${te}px * var(--scale-factor)) / calc(${qt}px * var(--scale-factor))`;St.style.borderRadius=Ke}switch(C.borderStyle.style){case l.AnnotationBorderStyleType.SOLID:St.style.borderStyle="solid";break;case l.AnnotationBorderStyleType.DASHED:St.style.borderStyle="dashed";break;case l.AnnotationBorderStyleType.BEVELED:(0,l.warn)("Unimplemented border style: beveled");break;case l.AnnotationBorderStyleType.INSET:(0,l.warn)("Unimplemented border style: inset");break;case l.AnnotationBorderStyleType.UNDERLINE:St.style.borderBottomStyle="solid";break}const Oe=C.borderColor||null;Oe?(gt(this,m,!0),St.style.borderColor=l.Util.makeHexColor(Oe[0]|0,Oe[1]|0,Oe[2]|0)):St.style.borderWidth=0}St.style.left=`${100*(Kt[0]-Vt)/kt}%`,St.style.top=`${100*(Kt[1]-ae)/Nt}%`;const{rotation:ce}=C;return C.hasOwnCanvas||ce===0?(St.style.width=`${100*te/kt}%`,St.style.height=`${100*qt/Nt}%`):this.setRotation(ce,St),St}setRotation(x,C=this.container){if(!this.data.rect)return;const{pageWidth:X,pageHeight:yt}=this.parent.viewport.rawDims,{width:St,height:kt}=j(this.data.rect);let Nt,Vt;x%180===0?(Nt=100*St/X,Vt=100*kt/yt):(Nt=100*kt/X,Vt=100*St/yt),C.style.width=`${Nt}%`,C.style.height=`${Vt}%`,C.setAttribute("data-main-rotation",(360-x)%360)}get _commonActions(){const x=(C,X,yt)=>{const St=yt.detail[C],kt=St[0],Nt=St.slice(1);yt.target.style[X]=Z.ColorConverters[`${kt}_HTML`](Nt),this.annotationStorage.setValue(this.data.id,{[X]:Z.ColorConverters[`${kt}_rgb`](Nt)})};return(0,l.shadow)(this,"_commonActions",{display:C=>{const{display:X}=C.detail,yt=X%2===1;this.container.style.visibility=yt?"hidden":"visible",this.annotationStorage.setValue(this.data.id,{noView:yt,noPrint:X===1||X===2})},print:C=>{this.annotationStorage.setValue(this.data.id,{noPrint:!C.detail.print})},hidden:C=>{const{hidden:X}=C.detail;this.container.style.visibility=X?"hidden":"visible",this.annotationStorage.setValue(this.data.id,{noPrint:X,noView:X})},focus:C=>{setTimeout(()=>C.target.focus({preventScroll:!1}),0)},userName:C=>{C.target.title=C.detail.userName},readonly:C=>{C.target.disabled=C.detail.readonly},required:C=>{this._setRequired(C.target,C.detail.required)},bgColor:C=>{x("bgColor","backgroundColor",C)},fillColor:C=>{x("fillColor","backgroundColor",C)},fgColor:C=>{x("fgColor","color",C)},textColor:C=>{x("textColor","color",C)},borderColor:C=>{x("borderColor","borderColor",C)},strokeColor:C=>{x("strokeColor","borderColor",C)},rotation:C=>{const X=C.detail.rotation;this.setRotation(X),this.annotationStorage.setValue(this.data.id,{rotation:X})}})}_dispatchEventFromSandbox(x,C){const X=this._commonActions;for(const yt of Object.keys(C.detail))(x[yt]||X[yt])?.(C)}_setDefaultPropertiesFromJS(x){if(!this.enableScripting)return;const C=this.annotationStorage.getRawValue(this.data.id);if(!C)return;const X=this._commonActions;for(const[yt,St]of Object.entries(C)){const kt=X[yt];if(kt){const Nt={detail:{[yt]:St},target:x};kt(Nt),delete C[yt]}}}_createQuadrilaterals(){if(!this.container)return;const{quadPoints:x}=this.data;if(!x)return;const[C,X,yt,St]=this.data.rect;if(x.length===1){const[,{x:Ue,y:Oe},{x:Ke,y:pn}]=x[0];if(yt===Ue&&St===Oe&&C===Ke&&X===pn)return}const{style:kt}=this.container;let Nt;if(e(this,m)){const{borderColor:Ue,borderWidth:Oe}=kt;kt.borderWidth=0,Nt=["url('data:image/svg+xml;utf8,",'<svg xmlns="http://www.w3.org/2000/svg"',' preserveAspectRatio="none" viewBox="0 0 1 1">',`<g fill="transparent" stroke="${Ue}" stroke-width="${Oe}">`],this.container.classList.add("hasBorder")}const Vt=yt-C,ae=St-X,{svgFactory:te}=this,qt=te.createElement("svg");qt.classList.add("quadrilateralsContainer"),qt.setAttribute("width",0),qt.setAttribute("height",0);const Kt=te.createElement("defs");qt.append(Kt);const ce=te.createElement("clipPath"),Se=`clippath_${this.data.id}`;ce.setAttribute("id",Se),ce.setAttribute("clipPathUnits","objectBoundingBox"),Kt.append(ce);for(const[,{x:Ue,y:Oe},{x:Ke,y:pn}]of x){const Je=te.createElement("rect"),Cn=(Ke-C)/Vt,kn=(St-Oe)/ae,Xn=(Ue-Ke)/Vt,Yn=(Oe-pn)/ae;Je.setAttribute("x",Cn),Je.setAttribute("y",kn),Je.setAttribute("width",Xn),Je.setAttribute("height",Yn),ce.append(Je),Nt?.push(`<rect vector-effect="non-scaling-stroke" x="${Cn}" y="${kn}" width="${Xn}" height="${Yn}"/>`)}e(this,m)&&(Nt.push("</g></svg>')"),kt.backgroundImage=Nt.join("")),this.container.append(qt),this.container.style.clipPath=`url(#${Se})`}_createPopup(){const{container:x,data:C}=this;x.setAttribute("aria-haspopup","dialog");const X=new S({data:{color:C.color,titleObj:C.titleObj,modificationDate:C.modificationDate,contentsObj:C.contentsObj,richText:C.richText,parentRect:C.rect,borderStyle:0,id:`popup_${C.id}`,rotation:C.rotation},parent:this.parent,elements:[this]});this.parent.div.append(X.render())}render(){(0,l.unreachable)("Abstract method `AnnotationElement.render` called")}_getElementsByName(x,C=null){const X=[];if(this._fieldObjects){const yt=this._fieldObjects[x];if(yt)for(const{page:St,id:kt,exportValues:Nt}of yt){if(St===-1||kt===C)continue;const Vt=typeof Nt=="string"?Nt:null,ae=document.querySelector(`[data-element-id="${kt}"]`);if(ae&&!H.has(ae)){(0,l.warn)(`_getElementsByName - element not allowed: ${kt}`);continue}X.push({id:kt,exportValue:Vt,domElement:ae})}return X}for(const yt of document.getElementsByName(x)){const{exportValue:St}=yt,kt=yt.getAttribute("data-element-id");kt!==C&&H.has(yt)&&X.push({id:kt,exportValue:St,domElement:yt})}return X}show(){this.container&&(this.container.hidden=!1),this.popup?.maybeShow()}hide(){this.container&&(this.container.hidden=!0),this.popup?.forceHide()}getElementsToTriggerPopup(){return this.container}addHighlightArea(){const x=this.getElementsToTriggerPopup();if(Array.isArray(x))for(const C of x)C.classList.add("highlightArea");else x.classList.add("highlightArea")}_editOnDoubleClick(){const{annotationEditorType:x,data:{id:C}}=this;this.container.addEventListener("dblclick",()=>{this.linkService.eventBus?.dispatch("switchannotationeditormode",{source:this,mode:x,editId:C})})}};m=new WeakMap;let b=F;class M extends b{constructor(C,X=null){super(C,{isRenderable:!0,ignoreBorder:!!X?.ignoreBorder,createQuadrilaterals:!0});pt(this,L);this.isTooltipOnly=C.data.isTooltipOnly}render(){const{data:C,linkService:X}=this,yt=document.createElement("a");yt.setAttribute("data-element-id",C.id);let St=!1;return C.url?(X.addLinkAttributes(yt,C.url,C.newWindow),St=!0):C.action?(this._bindNamedAction(yt,C.action),St=!0):C.attachment?(this._bindAttachment(yt,C.attachment),St=!0):C.setOCGState?(J(this,L,Vr).call(this,yt,C.setOCGState),St=!0):C.dest?(this._bindLink(yt,C.dest),St=!0):(C.actions&&(C.actions.Action||C.actions["Mouse Up"]||C.actions["Mouse Down"])&&this.enableScripting&&this.hasJSActions&&(this._bindJSAction(yt,C),St=!0),C.resetForm?(this._bindResetFormAction(yt,C.resetForm),St=!0):this.isTooltipOnly&&!St&&(this._bindLink(yt,""),St=!0)),this.container.classList.add("linkAnnotation"),St&&this.container.append(yt),this.container}_bindLink(C,X){C.href=this.linkService.getDestinationHash(X),C.onclick=()=>(X&&this.linkService.goToDestination(X),!1),(X||X==="")&&J(this,L,xn).call(this)}_bindNamedAction(C,X){C.href=this.linkService.getAnchorUrl(""),C.onclick=()=>(this.linkService.executeNamedAction(X),!1),J(this,L,xn).call(this)}_bindAttachment(C,X){C.href=this.linkService.getAnchorUrl(""),C.onclick=()=>(this.downloadManager?.openOrDownloadData(this.container,X.content,X.filename),!1),J(this,L,xn).call(this)}_bindJSAction(C,X){C.href=this.linkService.getAnchorUrl("");const yt=new Map([["Action","onclick"],["Mouse Up","onmouseup"],["Mouse Down","onmousedown"]]);for(const St of Object.keys(X.actions)){const kt=yt.get(St);kt&&(C[kt]=()=>(this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:X.id,name:St}}),!1))}C.onclick||(C.onclick=()=>!1),J(this,L,xn).call(this)}_bindResetFormAction(C,X){const yt=C.onclick;if(yt||(C.href=this.linkService.getAnchorUrl("")),J(this,L,xn).call(this),!this._fieldObjects){(0,l.warn)('_bindResetFormAction - "resetForm" action not supported, ensure that the `fieldObjects` parameter is provided.'),yt||(C.onclick=()=>!1);return}C.onclick=()=>{yt?.();const{fields:St,refs:kt,include:Nt}=X,Vt=[];if(St.length!==0||kt.length!==0){const qt=new Set(kt);for(const Kt of St){const ce=this._fieldObjects[Kt]||[];for(const{id:Se}of ce)qt.add(Se)}for(const Kt of Object.values(this._fieldObjects))for(const ce of Kt)qt.has(ce.id)===Nt&&Vt.push(ce)}else for(const qt of Object.values(this._fieldObjects))Vt.push(...qt);const ae=this.annotationStorage,te=[];for(const qt of Vt){const{id:Kt}=qt;switch(te.push(Kt),qt.type){case"text":{const Se=qt.defaultValue||"";ae.setValue(Kt,{value:Se});break}case"checkbox":case"radiobutton":{const Se=qt.defaultValue===qt.exportValues;ae.setValue(Kt,{value:Se});break}case"combobox":case"listbox":{const Se=qt.defaultValue||"";ae.setValue(Kt,{value:Se});break}default:continue}const ce=document.querySelector(`[data-element-id="${Kt}"]`);if(ce){if(!H.has(ce)){(0,l.warn)(`_bindResetFormAction - element not allowed: ${Kt}`);continue}}else continue;ce.dispatchEvent(new Event("resetform"))}return this.enableScripting&&this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:"app",ids:te,name:"ResetForm"}}),!1}}}L=new WeakSet,xn=function(){this.container.setAttribute("data-internal-link","")},Vr=function(C,X){C.href=this.linkService.getAnchorUrl(""),C.onclick=()=>(this.linkService.executeSetOCGState(X),!1),J(this,L,xn).call(this)};class v extends b{constructor(x){super(x,{isRenderable:!0})}render(){this.container.classList.add("textAnnotation");const x=document.createElement("img");return x.src=this.imageResourcesPath+"annotation-"+this.data.name.toLowerCase()+".svg",x.alt="[{{type}} Annotation]",x.dataset.l10nId="text_annotation_type",x.dataset.l10nArgs=JSON.stringify({type:this.data.name}),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.append(x),this.container}}class g extends b{render(){return this.data.alternativeText&&(this.container.title=this.data.alternativeText),this.container}showElementAndHideCanvas(x){this.data.hasOwnCanvas&&(x.previousSibling?.nodeName==="CANVAS"&&(x.previousSibling.hidden=!0),x.hidden=!1)}_getKeyModifier(x){const{isWin:C,isMac:X}=l.FeatureTest.platform;return C&&x.ctrlKey||X&&x.metaKey}_setEventListener(x,C,X,yt,St){X.includes("mouse")?x.addEventListener(X,kt=>{this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:this.data.id,name:yt,value:St(kt),shift:kt.shiftKey,modifier:this._getKeyModifier(kt)}})}):x.addEventListener(X,kt=>{if(X==="blur"){if(!C.focused||!kt.relatedTarget)return;C.focused=!1}else if(X==="focus"){if(C.focused)return;C.focused=!0}St&&this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:this.data.id,name:yt,value:St(kt)}})})}_setEventListeners(x,C,X,yt){for(const[St,kt]of X)(kt==="Action"||this.data.actions?.[kt])&&((kt==="Focus"||kt==="Blur")&&(C||(C={focused:!1})),this._setEventListener(x,C,St,kt,yt),kt==="Focus"&&!this.data.actions?.Blur?this._setEventListener(x,C,"blur","Blur",null):kt==="Blur"&&!this.data.actions?.Focus&&this._setEventListener(x,C,"focus","Focus",null))}_setBackgroundColor(x){const C=this.data.backgroundColor||null;x.style.backgroundColor=C===null?"transparent":l.Util.makeHexColor(C[0],C[1],C[2])}_setTextStyle(x){const C=["left","center","right"],{fontColor:X}=this.data.defaultAppearanceData,yt=this.data.defaultAppearanceData.fontSize||d,St=x.style;let kt;const Nt=2,Vt=ae=>Math.round(10*ae)/10;if(this.data.multiLine){const ae=Math.abs(this.data.rect[3]-this.data.rect[1]-Nt),te=Math.round(ae/(l.LINE_FACTOR*yt))||1,qt=ae/te;kt=Math.min(yt,Vt(qt/l.LINE_FACTOR))}else{const ae=Math.abs(this.data.rect[3]-this.data.rect[1]-Nt);kt=Math.min(yt,Vt(ae/l.LINE_FACTOR))}St.fontSize=`calc(${kt}px * var(--scale-factor))`,St.color=l.Util.makeHexColor(X[0],X[1],X[2]),this.data.textAlignment!==null&&(St.textAlign=C[this.data.textAlignment])}_setRequired(x,C){C?x.setAttribute("required",!0):x.removeAttribute("required"),x.setAttribute("aria-required",C)}}class A extends g{constructor(x){const C=x.renderForms||!x.data.hasAppearance&&!!x.data.fieldValue;super(x,{isRenderable:C})}setPropertyOnSiblings(x,C,X,yt){const St=this.annotationStorage;for(const kt of this._getElementsByName(x.name,x.id))kt.domElement&&(kt.domElement[C]=X),St.setValue(kt.id,{[yt]:X})}render(){const x=this.annotationStorage,C=this.data.id;this.container.classList.add("textWidgetAnnotation");let X=null;if(this.renderForms){const yt=x.getValue(C,{value:this.data.fieldValue});let St=yt.value||"";const kt=x.getValue(C,{charLimit:this.data.maxLen}).charLimit;kt&&St.length>kt&&(St=St.slice(0,kt));let Nt=yt.formattedValue||this.data.textContent?.join(`
`)||null;Nt&&this.data.comb&&(Nt=Nt.replaceAll(/\s+/g,""));const Vt={userValue:St,formattedValue:Nt,lastCommittedValue:null,commitKey:1,focused:!1};this.data.multiLine?(X=document.createElement("textarea"),X.textContent=Nt??St,this.data.doNotScroll&&(X.style.overflowY="hidden")):(X=document.createElement("input"),X.type="text",X.setAttribute("value",Nt??St),this.data.doNotScroll&&(X.style.overflowX="hidden")),this.data.hasOwnCanvas&&(X.hidden=!0),H.add(X),X.setAttribute("data-element-id",C),X.disabled=this.data.readOnly,X.name=this.data.fieldName,X.tabIndex=T,this._setRequired(X,this.data.required),kt&&(X.maxLength=kt),X.addEventListener("input",te=>{x.setValue(C,{value:te.target.value}),this.setPropertyOnSiblings(X,"value",te.target.value,"value"),Vt.formattedValue=null}),X.addEventListener("resetform",te=>{const qt=this.data.defaultFieldValue??"";X.value=Vt.userValue=qt,Vt.formattedValue=null});let ae=te=>{const{formattedValue:qt}=Vt;qt!=null&&(te.target.value=qt),te.target.scrollLeft=0};if(this.enableScripting&&this.hasJSActions){X.addEventListener("focus",qt=>{if(Vt.focused)return;const{target:Kt}=qt;Vt.userValue&&(Kt.value=Vt.userValue),Vt.lastCommittedValue=Kt.value,Vt.commitKey=1,Vt.focused=!0}),X.addEventListener("updatefromsandbox",qt=>{this.showElementAndHideCanvas(qt.target);const Kt={value(ce){Vt.userValue=ce.detail.value??"",x.setValue(C,{value:Vt.userValue.toString()}),ce.target.value=Vt.userValue},formattedValue(ce){const{formattedValue:Se}=ce.detail;Vt.formattedValue=Se,Se!=null&&ce.target!==document.activeElement&&(ce.target.value=Se),x.setValue(C,{formattedValue:Se})},selRange(ce){ce.target.setSelectionRange(...ce.detail.selRange)},charLimit:ce=>{const{charLimit:Se}=ce.detail,{target:Ue}=ce;if(Se===0){Ue.removeAttribute("maxLength");return}Ue.setAttribute("maxLength",Se);let Oe=Vt.userValue;!Oe||Oe.length<=Se||(Oe=Oe.slice(0,Se),Ue.value=Vt.userValue=Oe,x.setValue(C,{value:Oe}),this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:C,name:"Keystroke",value:Oe,willCommit:!0,commitKey:1,selStart:Ue.selectionStart,selEnd:Ue.selectionEnd}}))}};this._dispatchEventFromSandbox(Kt,qt)}),X.addEventListener("keydown",qt=>{Vt.commitKey=1;let Kt=-1;if(qt.key==="Escape"?Kt=0:qt.key==="Enter"&&!this.data.multiLine?Kt=2:qt.key==="Tab"&&(Vt.commitKey=3),Kt===-1)return;const{value:ce}=qt.target;Vt.lastCommittedValue!==ce&&(Vt.lastCommittedValue=ce,Vt.userValue=ce,this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:C,name:"Keystroke",value:ce,willCommit:!0,commitKey:Kt,selStart:qt.target.selectionStart,selEnd:qt.target.selectionEnd}}))});const te=ae;ae=null,X.addEventListener("blur",qt=>{if(!Vt.focused||!qt.relatedTarget)return;Vt.focused=!1;const{value:Kt}=qt.target;Vt.userValue=Kt,Vt.lastCommittedValue!==Kt&&this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:C,name:"Keystroke",value:Kt,willCommit:!0,commitKey:Vt.commitKey,selStart:qt.target.selectionStart,selEnd:qt.target.selectionEnd}}),te(qt)}),this.data.actions?.Keystroke&&X.addEventListener("beforeinput",qt=>{Vt.lastCommittedValue=null;const{data:Kt,target:ce}=qt,{value:Se,selectionStart:Ue,selectionEnd:Oe}=ce;let Ke=Ue,pn=Oe;switch(qt.inputType){case"deleteWordBackward":{const Je=Se.substring(0,Ue).match(/\w*[^\w]*$/);Je&&(Ke-=Je[0].length);break}case"deleteWordForward":{const Je=Se.substring(Ue).match(/^[^\w]*\w*/);Je&&(pn+=Je[0].length);break}case"deleteContentBackward":Ue===Oe&&(Ke-=1);break;case"deleteContentForward":Ue===Oe&&(pn+=1);break}qt.preventDefault(),this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:C,name:"Keystroke",value:Se,change:Kt||"",willCommit:!1,selStart:Ke,selEnd:pn}})}),this._setEventListeners(X,Vt,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],qt=>qt.target.value)}if(ae&&X.addEventListener("blur",ae),this.data.comb){const qt=(this.data.rect[2]-this.data.rect[0])/kt;X.classList.add("comb"),X.style.letterSpacing=`calc(${qt}px * var(--scale-factor) - 1ch)`}}else X=document.createElement("div"),X.textContent=this.data.fieldValue,X.style.verticalAlign="middle",X.style.display="table-cell";return this._setTextStyle(X),this._setBackgroundColor(X),this._setDefaultPropertiesFromJS(X),this.container.append(X),this.container}}class O extends g{constructor(x){super(x,{isRenderable:!!x.data.hasOwnCanvas})}}class w extends g{constructor(x){super(x,{isRenderable:x.renderForms})}render(){const x=this.annotationStorage,C=this.data,X=C.id;let yt=x.getValue(X,{value:C.exportValue===C.fieldValue}).value;typeof yt=="string"&&(yt=yt!=="Off",x.setValue(X,{value:yt})),this.container.classList.add("buttonWidgetAnnotation","checkBox");const St=document.createElement("input");return H.add(St),St.setAttribute("data-element-id",X),St.disabled=C.readOnly,this._setRequired(St,this.data.required),St.type="checkbox",St.name=C.fieldName,yt&&St.setAttribute("checked",!0),St.setAttribute("exportValue",C.exportValue),St.tabIndex=T,St.addEventListener("change",kt=>{const{name:Nt,checked:Vt}=kt.target;for(const ae of this._getElementsByName(Nt,X)){const te=Vt&&ae.exportValue===C.exportValue;ae.domElement&&(ae.domElement.checked=te),x.setValue(ae.id,{value:te})}x.setValue(X,{value:Vt})}),St.addEventListener("resetform",kt=>{const Nt=C.defaultFieldValue||"Off";kt.target.checked=Nt===C.exportValue}),this.enableScripting&&this.hasJSActions&&(St.addEventListener("updatefromsandbox",kt=>{const Nt={value(Vt){Vt.target.checked=Vt.detail.value!=="Off",x.setValue(X,{value:Vt.target.checked})}};this._dispatchEventFromSandbox(Nt,kt)}),this._setEventListeners(St,null,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],kt=>kt.target.checked)),this._setBackgroundColor(St),this._setDefaultPropertiesFromJS(St),this.container.append(St),this.container}}class o extends g{constructor(x){super(x,{isRenderable:x.renderForms})}render(){this.container.classList.add("buttonWidgetAnnotation","radioButton");const x=this.annotationStorage,C=this.data,X=C.id;let yt=x.getValue(X,{value:C.fieldValue===C.buttonValue}).value;typeof yt=="string"&&(yt=yt!==C.buttonValue,x.setValue(X,{value:yt}));const St=document.createElement("input");if(H.add(St),St.setAttribute("data-element-id",X),St.disabled=C.readOnly,this._setRequired(St,this.data.required),St.type="radio",St.name=C.fieldName,yt&&St.setAttribute("checked",!0),St.tabIndex=T,St.addEventListener("change",kt=>{const{name:Nt,checked:Vt}=kt.target;for(const ae of this._getElementsByName(Nt,X))x.setValue(ae.id,{value:!1});x.setValue(X,{value:Vt})}),St.addEventListener("resetform",kt=>{const Nt=C.defaultFieldValue;kt.target.checked=Nt!=null&&Nt===C.buttonValue}),this.enableScripting&&this.hasJSActions){const kt=C.buttonValue;St.addEventListener("updatefromsandbox",Nt=>{const Vt={value:ae=>{const te=kt===ae.detail.value;for(const qt of this._getElementsByName(ae.target.name)){const Kt=te&&qt.id===X;qt.domElement&&(qt.domElement.checked=Kt),x.setValue(qt.id,{value:Kt})}}};this._dispatchEventFromSandbox(Vt,Nt)}),this._setEventListeners(St,null,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],Nt=>Nt.target.checked)}return this._setBackgroundColor(St),this._setDefaultPropertiesFromJS(St),this.container.append(St),this.container}}class r extends M{constructor(x){super(x,{ignoreBorder:x.data.hasAppearance})}render(){const x=super.render();x.classList.add("buttonWidgetAnnotation","pushButton"),this.data.alternativeText&&(x.title=this.data.alternativeText);const C=x.lastChild;return this.enableScripting&&this.hasJSActions&&C&&(this._setDefaultPropertiesFromJS(C),C.addEventListener("updatefromsandbox",X=>{this._dispatchEventFromSandbox({},X)})),x}}class n extends g{constructor(x){super(x,{isRenderable:x.renderForms})}render(){this.container.classList.add("choiceWidgetAnnotation");const x=this.annotationStorage,C=this.data.id,X=x.getValue(C,{value:this.data.fieldValue}),yt=document.createElement("select");H.add(yt),yt.setAttribute("data-element-id",C),yt.disabled=this.data.readOnly,this._setRequired(yt,this.data.required),yt.name=this.data.fieldName,yt.tabIndex=T;let St=this.data.combo&&this.data.options.length>0;this.data.combo||(yt.size=this.data.options.length,this.data.multiSelect&&(yt.multiple=!0)),yt.addEventListener("resetform",te=>{const qt=this.data.defaultFieldValue;for(const Kt of yt.options)Kt.selected=Kt.value===qt});for(const te of this.data.options){const qt=document.createElement("option");qt.textContent=te.displayValue,qt.value=te.exportValue,X.value.includes(te.exportValue)&&(qt.setAttribute("selected",!0),St=!1),yt.append(qt)}let kt=null;if(St){const te=document.createElement("option");te.value=" ",te.setAttribute("hidden",!0),te.setAttribute("selected",!0),yt.prepend(te),kt=()=>{te.remove(),yt.removeEventListener("input",kt),kt=null},yt.addEventListener("input",kt)}const Nt=te=>{const qt=te?"value":"textContent",{options:Kt,multiple:ce}=yt;return ce?Array.prototype.filter.call(Kt,Se=>Se.selected).map(Se=>Se[qt]):Kt.selectedIndex===-1?null:Kt[Kt.selectedIndex][qt]};let Vt=Nt(!1);const ae=te=>{const qt=te.target.options;return Array.prototype.map.call(qt,Kt=>({displayValue:Kt.textContent,exportValue:Kt.value}))};return this.enableScripting&&this.hasJSActions?(yt.addEventListener("updatefromsandbox",te=>{const qt={value(Kt){kt?.();const ce=Kt.detail.value,Se=new Set(Array.isArray(ce)?ce:[ce]);for(const Ue of yt.options)Ue.selected=Se.has(Ue.value);x.setValue(C,{value:Nt(!0)}),Vt=Nt(!1)},multipleSelection(Kt){yt.multiple=!0},remove(Kt){const ce=yt.options,Se=Kt.detail.remove;ce[Se].selected=!1,yt.remove(Se),ce.length>0&&Array.prototype.findIndex.call(ce,Oe=>Oe.selected)===-1&&(ce[0].selected=!0),x.setValue(C,{value:Nt(!0),items:ae(Kt)}),Vt=Nt(!1)},clear(Kt){for(;yt.length!==0;)yt.remove(0);x.setValue(C,{value:null,items:[]}),Vt=Nt(!1)},insert(Kt){const{index:ce,displayValue:Se,exportValue:Ue}=Kt.detail.insert,Oe=yt.children[ce],Ke=document.createElement("option");Ke.textContent=Se,Ke.value=Ue,Oe?Oe.before(Ke):yt.append(Ke),x.setValue(C,{value:Nt(!0),items:ae(Kt)}),Vt=Nt(!1)},items(Kt){const{items:ce}=Kt.detail;for(;yt.length!==0;)yt.remove(0);for(const Se of ce){const{displayValue:Ue,exportValue:Oe}=Se,Ke=document.createElement("option");Ke.textContent=Ue,Ke.value=Oe,yt.append(Ke)}yt.options.length>0&&(yt.options[0].selected=!0),x.setValue(C,{value:Nt(!0),items:ae(Kt)}),Vt=Nt(!1)},indices(Kt){const ce=new Set(Kt.detail.indices);for(const Se of Kt.target.options)Se.selected=ce.has(Se.index);x.setValue(C,{value:Nt(!0)}),Vt=Nt(!1)},editable(Kt){Kt.target.disabled=!Kt.detail.editable}};this._dispatchEventFromSandbox(qt,te)}),yt.addEventListener("input",te=>{const qt=Nt(!0);x.setValue(C,{value:qt}),te.preventDefault(),this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:C,name:"Keystroke",value:Vt,changeEx:qt,willCommit:!1,commitKey:1,keyDown:!1}})}),this._setEventListeners(yt,null,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"],["input","Action"],["input","Validate"]],te=>te.target.value)):yt.addEventListener("input",function(te){x.setValue(C,{value:Nt(!0)})}),this.data.combo&&this._setTextStyle(yt),this._setBackgroundColor(yt),this._setDefaultPropertiesFromJS(yt),this.container.append(yt),this.container}}class S extends b{constructor(x){const{data:C,elements:X}=x;super(x,{isRenderable:b._hasPopupData(C)}),this.elements=X}render(){this.container.classList.add("popupAnnotation");const x=new p({container:this.container,color:this.data.color,titleObj:this.data.titleObj,modificationDate:this.data.modificationDate,contentsObj:this.data.contentsObj,richText:this.data.richText,rect:this.data.rect,parentRect:this.data.parentRect||null,parent:this.parent,elements:this.elements,open:this.data.open}),C=[];for(const X of this.elements)X.popup=x,C.push(X.data.id),X.addHighlightArea();return this.container.setAttribute("aria-controls",C.map(X=>`${l.AnnotationPrefix}${X}`).join(",")),this.container}}class p{constructor({container:x,color:C,elements:X,titleObj:yt,modificationDate:St,contentsObj:kt,richText:Nt,parent:Vt,rect:ae,parentRect:te,open:qt}){pt(this,Bt);pt(this,mt,null);pt(this,At,J(this,Bt,$r).bind(this));pt(this,Et,J(this,Bt,Qi).bind(this));pt(this,Pt,J(this,Bt,Zi).bind(this));pt(this,Rt,J(this,Bt,hi).bind(this));pt(this,Lt,null);pt(this,ht,null);pt(this,dt,null);pt(this,_,null);pt(this,I,null);pt(this,tt,null);pt(this,ut,!1);pt(this,wt,null);pt(this,Ft,null);pt(this,Tt,null);pt(this,et,null);pt(this,jt,!1);gt(this,ht,x),gt(this,et,yt),gt(this,dt,kt),gt(this,Tt,Nt),gt(this,I,Vt),gt(this,Lt,C),gt(this,Ft,ae),gt(this,tt,te),gt(this,_,X);const Kt=E.PDFDateString.toDateObject(St);Kt&&gt(this,mt,Vt.l10n.get("annotation_date_string",{date:Kt.toLocaleDateString(),time:Kt.toLocaleTimeString()})),this.trigger=X.flatMap(ce=>ce.getElementsToTriggerPopup());for(const ce of this.trigger)ce.addEventListener("click",e(this,Rt)),ce.addEventListener("mouseenter",e(this,Pt)),ce.addEventListener("mouseleave",e(this,Et)),ce.classList.add("popupTriggerArea");for(const ce of X)ce.container?.addEventListener("keydown",e(this,At));e(this,ht).hidden=!0,qt&&J(this,Bt,hi).call(this)}render(){if(e(this,wt))return;const{page:{view:x},viewport:{rawDims:{pageWidth:C,pageHeight:X,pageX:yt,pageY:St}}}=e(this,I),kt=gt(this,wt,document.createElement("div"));if(kt.className="popup",e(this,Lt)){const Je=kt.style.outlineColor=l.Util.makeHexColor(...e(this,Lt));CSS.supports("background-color","color-mix(in srgb, red 30%, white)")?kt.style.backgroundColor=`color-mix(in srgb, ${Je} 30%, white)`:kt.style.backgroundColor=l.Util.makeHexColor(...e(this,Lt).map(kn=>Math.floor(.7*(255-kn)+kn)))}const Nt=document.createElement("span");Nt.className="header";const Vt=document.createElement("h1");if(Nt.append(Vt),{dir:Vt.dir,str:Vt.textContent}=e(this,et),kt.append(Nt),e(this,mt)){const Je=document.createElement("span");Je.classList.add("popupDate"),e(this,mt).then(Cn=>{Je.textContent=Cn}),Nt.append(Je)}const ae=e(this,dt),te=e(this,Tt);if(te?.str&&(!ae?.str||ae.str===te.str))W.XfaLayer.render({xfaHtml:te.html,intent:"richText",div:kt}),kt.lastChild.classList.add("richText","popupContent");else{const Je=this._formatContents(ae);kt.append(Je)}let qt=!!e(this,tt),Kt=qt?e(this,tt):e(this,Ft);for(const Je of e(this,_))if(!Kt||l.Util.intersect(Je.data.rect,Kt)!==null){Kt=Je.data.rect,qt=!0;break}const ce=l.Util.normalizeRect([Kt[0],x[3]-Kt[1]+x[1],Kt[2],x[3]-Kt[3]+x[1]]),Ue=qt?Kt[2]-Kt[0]+5:0,Oe=ce[0]+Ue,Ke=ce[1],{style:pn}=e(this,ht);pn.left=`${100*(Oe-yt)/C}%`,pn.top=`${100*(Ke-St)/X}%`,e(this,ht).append(kt)}_formatContents({str:x,dir:C}){const X=document.createElement("p");X.classList.add("popupContent"),X.dir=C;const yt=x.split(/(?:\r\n?|\n)/);for(let St=0,kt=yt.length;St<kt;++St){const Nt=yt[St];X.append(document.createTextNode(Nt)),St<kt-1&&X.append(document.createElement("br"))}return X}forceHide(){gt(this,jt,this.isVisible),e(this,jt)&&(e(this,ht).hidden=!0)}maybeShow(){e(this,jt)&&(gt(this,jt,!1),e(this,ht).hidden=!1)}get isVisible(){return e(this,ht).hidden===!1}}mt=new WeakMap,At=new WeakMap,Et=new WeakMap,Pt=new WeakMap,Rt=new WeakMap,Lt=new WeakMap,ht=new WeakMap,dt=new WeakMap,_=new WeakMap,I=new WeakMap,tt=new WeakMap,ut=new WeakMap,wt=new WeakMap,Ft=new WeakMap,Tt=new WeakMap,et=new WeakMap,jt=new WeakMap,Bt=new WeakSet,$r=function(x){x.altKey||x.shiftKey||x.ctrlKey||x.metaKey||(x.key==="Enter"||x.key==="Escape"&&e(this,ut))&&J(this,Bt,hi).call(this)},hi=function(){gt(this,ut,!e(this,ut)),e(this,ut)?(J(this,Bt,Zi).call(this),e(this,ht).addEventListener("click",e(this,Rt)),e(this,ht).addEventListener("keydown",e(this,At))):(J(this,Bt,Qi).call(this),e(this,ht).removeEventListener("click",e(this,Rt)),e(this,ht).removeEventListener("keydown",e(this,At)))},Zi=function(){e(this,wt)||this.render(),this.isVisible?e(this,ut)&&e(this,ht).classList.add("focused"):(e(this,ht).hidden=!1,e(this,ht).style.zIndex=parseInt(e(this,ht).style.zIndex)+1e3)},Qi=function(){e(this,ht).classList.remove("focused"),!(e(this,ut)||!this.isVisible)&&(e(this,ht).hidden=!0,e(this,ht).style.zIndex=parseInt(e(this,ht).style.zIndex)-1e3)};class G extends b{constructor(x){super(x,{isRenderable:!0,ignoreBorder:!0}),this.textContent=x.data.textContent,this.textPosition=x.data.textPosition,this.annotationEditorType=l.AnnotationEditorType.FREETEXT}render(){if(this.container.classList.add("freeTextAnnotation"),this.textContent){const x=document.createElement("div");x.classList.add("annotationTextContent"),x.setAttribute("role","comment");for(const C of this.textContent){const X=document.createElement("span");X.textContent=C,x.append(X)}this.container.append(x)}return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this._editOnDoubleClick(),this.container}}u.FreeTextAnnotationElement=G;class h extends b{constructor(C){super(C,{isRenderable:!0,ignoreBorder:!0});pt(this,le,null)}render(){this.container.classList.add("lineAnnotation");const C=this.data,{width:X,height:yt}=j(C.rect),St=this.svgFactory.create(X,yt,!0),kt=gt(this,le,this.svgFactory.createElement("svg:line"));return kt.setAttribute("x1",C.rect[2]-C.lineCoordinates[0]),kt.setAttribute("y1",C.rect[3]-C.lineCoordinates[1]),kt.setAttribute("x2",C.rect[2]-C.lineCoordinates[2]),kt.setAttribute("y2",C.rect[3]-C.lineCoordinates[3]),kt.setAttribute("stroke-width",C.borderStyle.width||1),kt.setAttribute("stroke","transparent"),kt.setAttribute("fill","transparent"),St.append(kt),this.container.append(St),!C.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return e(this,le)}addHighlightArea(){this.container.classList.add("highlightArea")}}le=new WeakMap;class P extends b{constructor(C){super(C,{isRenderable:!0,ignoreBorder:!0});pt(this,_e,null)}render(){this.container.classList.add("squareAnnotation");const C=this.data,{width:X,height:yt}=j(C.rect),St=this.svgFactory.create(X,yt,!0),kt=C.borderStyle.width,Nt=gt(this,_e,this.svgFactory.createElement("svg:rect"));return Nt.setAttribute("x",kt/2),Nt.setAttribute("y",kt/2),Nt.setAttribute("width",X-kt),Nt.setAttribute("height",yt-kt),Nt.setAttribute("stroke-width",kt||1),Nt.setAttribute("stroke","transparent"),Nt.setAttribute("fill","transparent"),St.append(Nt),this.container.append(St),!C.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return e(this,_e)}addHighlightArea(){this.container.classList.add("highlightArea")}}_e=new WeakMap;class $ extends b{constructor(C){super(C,{isRenderable:!0,ignoreBorder:!0});pt(this,Le,null)}render(){this.container.classList.add("circleAnnotation");const C=this.data,{width:X,height:yt}=j(C.rect),St=this.svgFactory.create(X,yt,!0),kt=C.borderStyle.width,Nt=gt(this,Le,this.svgFactory.createElement("svg:ellipse"));return Nt.setAttribute("cx",X/2),Nt.setAttribute("cy",yt/2),Nt.setAttribute("rx",X/2-kt/2),Nt.setAttribute("ry",yt/2-kt/2),Nt.setAttribute("stroke-width",kt||1),Nt.setAttribute("stroke","transparent"),Nt.setAttribute("fill","transparent"),St.append(Nt),this.container.append(St),!C.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return e(this,Le)}addHighlightArea(){this.container.classList.add("highlightArea")}}Le=new WeakMap;class bt extends b{constructor(C){super(C,{isRenderable:!0,ignoreBorder:!0});pt(this,Mt,null);this.containerClassName="polylineAnnotation",this.svgElementName="svg:polyline"}render(){this.container.classList.add(this.containerClassName);const C=this.data,{width:X,height:yt}=j(C.rect),St=this.svgFactory.create(X,yt,!0);let kt=[];for(const Vt of C.vertices){const ae=Vt.x-C.rect[0],te=C.rect[3]-Vt.y;kt.push(ae+","+te)}kt=kt.join(" ");const Nt=gt(this,Mt,this.svgFactory.createElement(this.svgElementName));return Nt.setAttribute("points",kt),Nt.setAttribute("stroke-width",C.borderStyle.width||1),Nt.setAttribute("stroke","transparent"),Nt.setAttribute("fill","transparent"),St.append(Nt),this.container.append(St),!C.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return e(this,Mt)}addHighlightArea(){this.container.classList.add("highlightArea")}}Mt=new WeakMap;class nt extends bt{constructor(x){super(x),this.containerClassName="polygonAnnotation",this.svgElementName="svg:polygon"}}class at extends b{constructor(x){super(x,{isRenderable:!0,ignoreBorder:!0})}render(){return this.container.classList.add("caretAnnotation"),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container}}class K extends b{constructor(C){super(C,{isRenderable:!0,ignoreBorder:!0});pt(this,ot,[]);this.containerClassName="inkAnnotation",this.svgElementName="svg:polyline",this.annotationEditorType=l.AnnotationEditorType.INK}render(){this.container.classList.add(this.containerClassName);const C=this.data,{width:X,height:yt}=j(C.rect),St=this.svgFactory.create(X,yt,!0);for(const kt of C.inkLists){let Nt=[];for(const ae of kt){const te=ae.x-C.rect[0],qt=C.rect[3]-ae.y;Nt.push(`${te},${qt}`)}Nt=Nt.join(" ");const Vt=this.svgFactory.createElement(this.svgElementName);e(this,ot).push(Vt),Vt.setAttribute("points",Nt),Vt.setAttribute("stroke-width",C.borderStyle.width||1),Vt.setAttribute("stroke","transparent"),Vt.setAttribute("fill","transparent"),!C.popupRef&&this.hasPopupData&&this._createPopup(),St.append(Vt)}return this.container.append(St),this.container}getElementsToTriggerPopup(){return e(this,ot)}addHighlightArea(){this.container.classList.add("highlightArea")}}ot=new WeakMap,u.InkAnnotationElement=K;class vt extends b{constructor(x){super(x,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.classList.add("highlightAnnotation"),this.container}}class N extends b{constructor(x){super(x,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.classList.add("underlineAnnotation"),this.container}}class Q extends b{constructor(x){super(x,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.classList.add("squigglyAnnotation"),this.container}}class ct extends b{constructor(x){super(x,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.classList.add("strikeoutAnnotation"),this.container}}class k extends b{constructor(x){super(x,{isRenderable:!0,ignoreBorder:!0})}render(){return this.container.classList.add("stampAnnotation"),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container}}u.StampAnnotationElement=k;class s extends b{constructor(C){super(C,{isRenderable:!0});pt(this,Yt);pt(this,st,null);const{filename:X,content:yt}=this.data.file;this.filename=(0,E.getFilenameFromUrl)(X,!0),this.content=yt,this.linkService.eventBus?.dispatch("fileattachmentannotation",{source:this,filename:X,content:yt})}render(){this.container.classList.add("fileAttachmentAnnotation");const{container:C,data:X}=this;let yt;X.hasAppearance||X.fillAlpha===0?yt=document.createElement("div"):(yt=document.createElement("img"),yt.src=`${this.imageResourcesPath}annotation-${/paperclip/i.test(X.name)?"paperclip":"pushpin"}.svg`,X.fillAlpha&&X.fillAlpha<1&&(yt.style=`filter: opacity(${Math.round(X.fillAlpha*100)}%);`)),yt.addEventListener("dblclick",J(this,Yt,tr).bind(this)),gt(this,st,yt);const{isMac:St}=l.FeatureTest.platform;return C.addEventListener("keydown",kt=>{kt.key==="Enter"&&(St?kt.metaKey:kt.ctrlKey)&&J(this,Yt,tr).call(this)}),!X.popupRef&&this.hasPopupData?this._createPopup():yt.classList.add("popupTriggerArea"),C.append(yt),C}getElementsToTriggerPopup(){return e(this,st)}addHighlightArea(){this.container.classList.add("highlightArea")}}st=new WeakMap,Yt=new WeakSet,tr=function(){this.downloadManager?.openOrDownloadData(this.container,this.content,this.filename)};class a{constructor({div:x,accessibilityManager:C,annotationCanvasMap:X,l10n:yt,page:St,viewport:kt}){pt(this,Wt);pt(this,ne,null);pt(this,B,null);pt(this,xt,new Map);this.div=x,gt(this,ne,C),gt(this,B,X),this.l10n=yt,this.page=St,this.viewport=kt,this.zIndex=0,this.l10n||(this.l10n=Ct.NullL10n)}async render(x){const{annotations:C}=x,X=this.div;(0,E.setLayerDimensions)(X,this.viewport);const yt=new Map,St={data:null,layer:X,linkService:x.linkService,downloadManager:x.downloadManager,imageResourcesPath:x.imageResourcesPath||"",renderForms:x.renderForms!==!1,svgFactory:new E.DOMSVGFactory,annotationStorage:x.annotationStorage||new t.AnnotationStorage,enableScripting:x.enableScripting===!0,hasJSActions:x.hasJSActions,fieldObjects:x.fieldObjects,parent:this,elements:null};for(const kt of C){if(kt.noHTML)continue;const Nt=kt.annotationType===l.AnnotationType.POPUP;if(Nt){const te=yt.get(kt.id);if(!te)continue;St.elements=te}else{const{width:te,height:qt}=j(kt.rect);if(te<=0||qt<=0)continue}St.data=kt;const Vt=y.create(St);if(!Vt.isRenderable)continue;if(!Nt&&kt.popupRef){const te=yt.get(kt.popupRef);te?te.push(Vt):yt.set(kt.popupRef,[Vt])}Vt.annotationEditorType>0&&e(this,xt).set(Vt.data.id,Vt);const ae=Vt.render();kt.hidden&&(ae.style.visibility="hidden"),J(this,Wt,qr).call(this,ae,kt.id)}J(this,Wt,er).call(this),await this.l10n.translate(X)}update({viewport:x}){const C=this.div;this.viewport=x,(0,E.setLayerDimensions)(C,{rotation:x.rotation}),J(this,Wt,er).call(this),C.hidden=!1}getEditableAnnotations(){return Array.from(e(this,xt).values())}getEditableAnnotation(x){return e(this,xt).get(x)}}ne=new WeakMap,B=new WeakMap,xt=new WeakMap,Wt=new WeakSet,qr=function(x,C){const X=x.firstChild||x;X.id=`${l.AnnotationPrefix}${C}`,this.div.append(x),e(this,ne)?.moveElementInDOM(this.div,x,X,!1)},er=function(){if(!e(this,B))return;const x=this.div;for(const[C,X]of e(this,B)){const yt=x.querySelector(`[data-annotation-id="${C}"]`);if(!yt)continue;const{firstChild:St}=yt;St?St.nodeName==="CANVAS"?St.replaceWith(X):St.before(X):yt.append(X)}e(this,B).clear()},u.AnnotationLayer=a}),((c,u)=>{Object.defineProperty(u,"__esModule",{value:!0}),u.ColorConverters=void 0;function _t(t){return Math.floor(Math.max(0,Math.min(1,t))*255).toString(16).padStart(2,"0")}function l(t){return Math.max(0,Math.min(255,255*t))}class E{static CMYK_G([Z,Ct,W,T]){return["G",1-Math.min(1,.3*Z+.59*W+.11*Ct+T)]}static G_CMYK([Z]){return["CMYK",0,0,0,1-Z]}static G_RGB([Z]){return["RGB",Z,Z,Z]}static G_rgb([Z]){return Z=l(Z),[Z,Z,Z]}static G_HTML([Z]){const Ct=_t(Z);return`#${Ct}${Ct}${Ct}`}static RGB_G([Z,Ct,W]){return["G",.3*Z+.59*Ct+.11*W]}static RGB_rgb(Z){return Z.map(l)}static RGB_HTML(Z){return`#${Z.map(_t).join("")}`}static T_HTML(){return"#00000000"}static T_rgb(){return[null]}static CMYK_RGB([Z,Ct,W,T]){return["RGB",1-Math.min(1,Z+T),1-Math.min(1,W+T),1-Math.min(1,Ct+T)]}static CMYK_rgb([Z,Ct,W,T]){return[l(1-Math.min(1,Z+T)),l(1-Math.min(1,W+T)),l(1-Math.min(1,Ct+T))]}static CMYK_HTML(Z){const Ct=this.CMYK_RGB(Z).slice(1);return this.RGB_HTML(Ct)}static RGB_CMYK([Z,Ct,W]){const T=1-Z,d=1-Ct,H=1-W,j=Math.min(T,d,H);return["CMYK",T,d,H,j]}}u.ColorConverters=E}),((c,u)=>{Object.defineProperty(u,"__esModule",{value:!0}),u.NullL10n=void 0,u.getL10nFallback=l;const _t={of_pages:"of {{pagesCount}}",page_of_pages:"({{pageNumber}} of {{pagesCount}})",document_properties_kb:"{{size_kb}} KB ({{size_b}} bytes)",document_properties_mb:"{{size_mb}} MB ({{size_b}} bytes)",document_properties_date_string:"{{date}}, {{time}}",document_properties_page_size_unit_inches:"in",document_properties_page_size_unit_millimeters:"mm",document_properties_page_size_orientation_portrait:"portrait",document_properties_page_size_orientation_landscape:"landscape",document_properties_page_size_name_a3:"A3",document_properties_page_size_name_a4:"A4",document_properties_page_size_name_letter:"Letter",document_properties_page_size_name_legal:"Legal",document_properties_page_size_dimension_string:"{{width}} × {{height}} {{unit}} ({{orientation}})",document_properties_page_size_dimension_name_string:"{{width}} × {{height}} {{unit}} ({{name}}, {{orientation}})",document_properties_linearized_yes:"Yes",document_properties_linearized_no:"No",additional_layers:"Additional Layers",page_landmark:"Page {{page}}",thumb_page_title:"Page {{page}}",thumb_page_canvas:"Thumbnail of Page {{page}}",find_reached_top:"Reached top of document, continued from bottom",find_reached_bottom:"Reached end of document, continued from top","find_match_count[one]":"{{current}} of {{total}} match","find_match_count[other]":"{{current}} of {{total}} matches","find_match_count_limit[one]":"More than {{limit}} match","find_match_count_limit[other]":"More than {{limit}} matches",find_not_found:"Phrase not found",page_scale_width:"Page Width",page_scale_fit:"Page Fit",page_scale_auto:"Automatic Zoom",page_scale_actual:"Actual Size",page_scale_percent:"{{scale}}%",loading_error:"An error occurred while loading the PDF.",invalid_file_error:"Invalid or corrupted PDF file.",missing_file_error:"Missing PDF file.",unexpected_response_error:"Unexpected server response.",rendering_error:"An error occurred while rendering the page.",annotation_date_string:"{{date}}, {{time}}",printing_not_supported:"Warning: Printing is not fully supported by this browser.",printing_not_ready:"Warning: The PDF is not fully loaded for printing.",web_fonts_disabled:"Web fonts are disabled: unable to use embedded PDF fonts.",free_text2_default_content:"Start typing…",editor_free_text2_aria_label:"Text Editor",editor_ink2_aria_label:"Draw Editor",editor_ink_canvas_aria_label:"User-created image",editor_alt_text_button_label:"Alt text",editor_alt_text_edit_button_label:"Edit alt text",editor_alt_text_decorative_tooltip:"Marked as decorative"};_t.print_progress_percent="{{progress}}%";function l(Z,Ct){switch(Z){case"find_match_count":Z=`find_match_count[${Ct.total===1?"one":"other"}]`;break;case"find_match_count_limit":Z=`find_match_count_limit[${Ct.limit===1?"one":"other"}]`;break}return _t[Z]||""}function E(Z,Ct){return Ct?Z.replaceAll(/\{\{\s*(\w+)\s*\}\}/g,(W,T)=>T in Ct?Ct[T]:"{{"+T+"}}"):Z}const t={async getLanguage(){return"en-us"},async getDirection(){return"ltr"},async get(Z,Ct=null,W=l(Z,Ct)){return E(W,Ct)},async translate(Z){}};u.NullL10n=t}),((c,u,_t)=>{Object.defineProperty(u,"__esModule",{value:!0}),u.XfaLayer=void 0;var l=_t(25);class E{static setupStorage(Z,Ct,W,T,d){const H=T.getValue(Ct,{value:null});switch(W.name){case"textarea":if(H.value!==null&&(Z.textContent=H.value),d==="print")break;Z.addEventListener("input",j=>{T.setValue(Ct,{value:j.target.value})});break;case"input":if(W.attributes.type==="radio"||W.attributes.type==="checkbox"){if(H.value===W.attributes.xfaOn?Z.setAttribute("checked",!0):H.value===W.attributes.xfaOff&&Z.removeAttribute("checked"),d==="print")break;Z.addEventListener("change",j=>{T.setValue(Ct,{value:j.target.checked?j.target.getAttribute("xfaOn"):j.target.getAttribute("xfaOff")})})}else{if(H.value!==null&&Z.setAttribute("value",H.value),d==="print")break;Z.addEventListener("input",j=>{T.setValue(Ct,{value:j.target.value})})}break;case"select":if(H.value!==null){Z.setAttribute("value",H.value);for(const j of W.children)j.attributes.value===H.value?j.attributes.selected=!0:j.attributes.hasOwnProperty("selected")&&delete j.attributes.selected}Z.addEventListener("input",j=>{const y=j.target.options,b=y.selectedIndex===-1?"":y[y.selectedIndex].value;T.setValue(Ct,{value:b})});break}}static setAttributes({html:Z,element:Ct,storage:W=null,intent:T,linkService:d}){const{attributes:H}=Ct,j=Z instanceof HTMLAnchorElement;H.type==="radio"&&(H.name=`${H.name}-${T}`);for(const[y,b]of Object.entries(H))if(b!=null)switch(y){case"class":b.length&&Z.setAttribute(y,b.join(" "));break;case"dataId":break;case"id":Z.setAttribute("data-element-id",b);break;case"style":Object.assign(Z.style,b);break;case"textContent":Z.textContent=b;break;default:(!j||y!=="href"&&y!=="newWindow")&&Z.setAttribute(y,b)}j&&d.addLinkAttributes(Z,H.href,H.newWindow),W&&H.dataId&&this.setupStorage(Z,H.dataId,Ct,W)}static render(Z){const Ct=Z.annotationStorage,W=Z.linkService,T=Z.xfaHtml,d=Z.intent||"display",H=document.createElement(T.name);T.attributes&&this.setAttributes({html:H,element:T,intent:d,linkService:W});const j=[[T,-1,H]],y=Z.div;if(y.append(H),Z.viewport){const M=`matrix(${Z.viewport.transform.join(",")})`;y.style.transform=M}d!=="richText"&&y.setAttribute("class","xfaLayer xfaFont");const b=[];for(;j.length>0;){const[M,v,g]=j.at(-1);if(v+1===M.children.length){j.pop();continue}const A=M.children[++j.at(-1)[1]];if(A===null)continue;const{name:O}=A;if(O==="#text"){const o=document.createTextNode(A.value);b.push(o),g.append(o);continue}const w=A?.attributes?.xmlns?document.createElementNS(A.attributes.xmlns,O):document.createElement(O);if(g.append(w),A.attributes&&this.setAttributes({html:w,element:A,storage:Ct,intent:d,linkService:W}),A.children&&A.children.length>0)j.push([A,-1,w]);else if(A.value){const o=document.createTextNode(A.value);l.XfaText.shouldBuildText(O)&&b.push(o),w.append(o)}}for(const M of y.querySelectorAll(".xfaNonInteractive input, .xfaNonInteractive textarea"))M.setAttribute("readOnly",!0);return{textDivs:b}}static update(Z){const Ct=`matrix(${Z.viewport.transform.join(",")})`;Z.div.style.transform=Ct,Z.div.hidden=!1}}u.XfaLayer=E}),((c,u,_t)=>{var T,d,H,j,y,b,M,v,g,A,O,w,o,r,n,Gr,Xr,Yr,Kr,nr,Jr,ir,Zr,Qr,ts,es,ns,bn,rr,di,ui,On,sr,fi,L,is,ar,rs,ss,or,pi,Nn;Object.defineProperty(u,"__esModule",{value:!0}),u.InkEditor=void 0;var l=_t(1),E=_t(4),t=_t(29),Z=_t(6),Ct=_t(5);const Lt=class Lt extends E.AnnotationEditor{constructor(_){super({..._,name:"inkEditor"});pt(this,n);pt(this,T,0);pt(this,d,0);pt(this,H,this.canvasPointermove.bind(this));pt(this,j,this.canvasPointerleave.bind(this));pt(this,y,this.canvasPointerup.bind(this));pt(this,b,this.canvasPointerdown.bind(this));pt(this,M,new Path2D);pt(this,v,!1);pt(this,g,!1);pt(this,A,!1);pt(this,O,null);pt(this,w,0);pt(this,o,0);pt(this,r,null);this.color=_.color||null,this.thickness=_.thickness||null,this.opacity=_.opacity||null,this.paths=[],this.bezierPath2D=[],this.allRawPaths=[],this.currentPath=[],this.scaleFactor=1,this.translationX=this.translationY=0,this.x=0,this.y=0,this._willKeepAspectRatio=!0}static initialize(_){E.AnnotationEditor.initialize(_,{strings:["editor_ink_canvas_aria_label","editor_ink2_aria_label"]})}static updateDefaultParams(_,I){switch(_){case l.AnnotationEditorParamsType.INK_THICKNESS:Lt._defaultThickness=I;break;case l.AnnotationEditorParamsType.INK_COLOR:Lt._defaultColor=I;break;case l.AnnotationEditorParamsType.INK_OPACITY:Lt._defaultOpacity=I/100;break}}updateParams(_,I){switch(_){case l.AnnotationEditorParamsType.INK_THICKNESS:J(this,n,Gr).call(this,I);break;case l.AnnotationEditorParamsType.INK_COLOR:J(this,n,Xr).call(this,I);break;case l.AnnotationEditorParamsType.INK_OPACITY:J(this,n,Yr).call(this,I);break}}static get defaultPropertiesToUpdate(){return[[l.AnnotationEditorParamsType.INK_THICKNESS,Lt._defaultThickness],[l.AnnotationEditorParamsType.INK_COLOR,Lt._defaultColor||E.AnnotationEditor._defaultLineColor],[l.AnnotationEditorParamsType.INK_OPACITY,Math.round(Lt._defaultOpacity*100)]]}get propertiesToUpdate(){return[[l.AnnotationEditorParamsType.INK_THICKNESS,this.thickness||Lt._defaultThickness],[l.AnnotationEditorParamsType.INK_COLOR,this.color||Lt._defaultColor||E.AnnotationEditor._defaultLineColor],[l.AnnotationEditorParamsType.INK_OPACITY,Math.round(100*(this.opacity??Lt._defaultOpacity))]]}rebuild(){this.parent&&(super.rebuild(),this.div!==null&&(this.canvas||(J(this,n,di).call(this),J(this,n,ui).call(this)),this.isAttachedToDOM||(this.parent.add(this),J(this,n,On).call(this)),J(this,n,Nn).call(this)))}remove(){this.canvas!==null&&(this.isEmpty()||this.commit(),this.canvas.width=this.canvas.height=0,this.canvas.remove(),this.canvas=null,e(this,O).disconnect(),gt(this,O,null),super.remove())}setParent(_){!this.parent&&_?this._uiManager.removeShouldRescale(this):this.parent&&_===null&&this._uiManager.addShouldRescale(this),super.setParent(_)}onScaleChanging(){const[_,I]=this.parentDimensions,tt=this.width*_,ut=this.height*I;this.setDimensions(tt,ut)}enableEditMode(){e(this,v)||this.canvas===null||(super.enableEditMode(),this._isDraggable=!1,this.canvas.addEventListener("pointerdown",e(this,b)))}disableEditMode(){!this.isInEditMode()||this.canvas===null||(super.disableEditMode(),this._isDraggable=!this.isEmpty(),this.div.classList.remove("editing"),this.canvas.removeEventListener("pointerdown",e(this,b)))}onceAdded(){this._isDraggable=!this.isEmpty()}isEmpty(){return this.paths.length===0||this.paths.length===1&&this.paths[0].length===0}commit(){e(this,v)||(super.commit(),this.isEditing=!1,this.disableEditMode(),this.setInForeground(),gt(this,v,!0),this.div.classList.add("disabled"),J(this,n,Nn).call(this,!0),this.makeResizable(),this.parent.addInkEditorIfNeeded(!0),this.moveInDOM(),this.div.focus({preventScroll:!0}))}focusin(_){this._focusEventsAllowed&&(super.focusin(_),this.enableEditMode())}canvasPointerdown(_){_.button!==0||!this.isInEditMode()||e(this,v)||(this.setInForeground(),_.preventDefault(),_.type!=="mouse"&&this.div.focus(),J(this,n,Jr).call(this,_.offsetX,_.offsetY))}canvasPointermove(_){_.preventDefault(),J(this,n,ir).call(this,_.offsetX,_.offsetY)}canvasPointerup(_){_.preventDefault(),J(this,n,rr).call(this,_)}canvasPointerleave(_){J(this,n,rr).call(this,_)}get isResizable(){return!this.isEmpty()&&e(this,v)}render(){if(this.div)return this.div;let _,I;this.width&&(_=this.x,I=this.y),super.render(),E.AnnotationEditor._l10nPromise.get("editor_ink2_aria_label").then(Tt=>this.div?.setAttribute("aria-label",Tt));const[tt,ut,wt,Ft]=J(this,n,Kr).call(this);if(this.setAt(tt,ut,0,0),this.setDims(wt,Ft),J(this,n,di).call(this),this.width){const[Tt,et]=this.parentDimensions;this.setAspectRatio(this.width*Tt,this.height*et),this.setAt(_*Tt,I*et,this.width*Tt,this.height*et),gt(this,A,!0),J(this,n,On).call(this),this.setDims(this.width*Tt,this.height*et),J(this,n,bn).call(this),this.div.classList.add("disabled")}else this.div.classList.add("editing"),this.enableEditMode();return J(this,n,ui).call(this),this.div}setDimensions(_,I){const tt=Math.round(_),ut=Math.round(I);if(e(this,w)===tt&&e(this,o)===ut)return;gt(this,w,tt),gt(this,o,ut),this.canvas.style.visibility="hidden";const[wt,Ft]=this.parentDimensions;this.width=_/wt,this.height=I/Ft,this.fixAndSetPosition(),e(this,v)&&J(this,n,sr).call(this,_,I),J(this,n,On).call(this),J(this,n,bn).call(this),this.canvas.style.visibility="visible",this.fixDims()}static deserialize(_,I,tt){var le,_e,Le;if(_ instanceof t.InkAnnotationElement)return null;const ut=super.deserialize(_,I,tt);ut.thickness=_.thickness,ut.color=l.Util.makeHexColor(..._.color),ut.opacity=_.opacity;const[wt,Ft]=ut.pageDimensions,Tt=ut.width*wt,et=ut.height*Ft,jt=ut.parentScale,Bt=_.thickness/2;gt(ut,v,!0),gt(ut,w,Math.round(Tt)),gt(ut,o,Math.round(et));const{paths:he,rect:oe,rotation:xe}=_;for(let{bezier:Mt}of he){Mt=J(le=Lt,L,rs).call(le,Mt,oe,xe);const ot=[];ut.paths.push(ot);let st=jt*(Mt[0]-Bt),Yt=jt*(Mt[1]-Bt);for(let ne=2,B=Mt.length;ne<B;ne+=6){const xt=jt*(Mt[ne]-Bt),Wt=jt*(Mt[ne+1]-Bt),Qt=jt*(Mt[ne+2]-Bt),ee=jt*(Mt[ne+3]-Bt),Gt=jt*(Mt[ne+4]-Bt),x=jt*(Mt[ne+5]-Bt);ot.push([[st,Yt],[xt,Wt],[Qt,ee],[Gt,x]]),st=Gt,Yt=x}const Jt=J(this,L,is).call(this,ot);ut.bezierPath2D.push(Jt)}const Xt=J(_e=ut,n,or).call(_e);return gt(ut,d,Math.max(E.AnnotationEditor.MIN_SIZE,Xt[2]-Xt[0])),gt(ut,T,Math.max(E.AnnotationEditor.MIN_SIZE,Xt[3]-Xt[1])),J(Le=ut,n,sr).call(Le,Tt,et),ut}serialize(){if(this.isEmpty())return null;const _=this.getRect(0,0),I=E.AnnotationEditor._colorManager.convert(this.ctx.strokeStyle);return{annotationType:l.AnnotationEditorType.INK,color:I,thickness:this.thickness,opacity:this.opacity,paths:J(this,n,ss).call(this,this.scaleFactor/this.parentScale,this.translationX,this.translationY,_),pageIndex:this.pageIndex,rect:_,rotation:this.rotation,structTreeParentId:this._structTreeParentId}}};T=new WeakMap,d=new WeakMap,H=new WeakMap,j=new WeakMap,y=new WeakMap,b=new WeakMap,M=new WeakMap,v=new WeakMap,g=new WeakMap,A=new WeakMap,O=new WeakMap,w=new WeakMap,o=new WeakMap,r=new WeakMap,n=new WeakSet,Gr=function(_){const I=this.thickness;this.addCommands({cmd:()=>{this.thickness=_,J(this,n,Nn).call(this)},undo:()=>{this.thickness=I,J(this,n,Nn).call(this)},mustExec:!0,type:l.AnnotationEditorParamsType.INK_THICKNESS,overwriteIfSameType:!0,keepUndo:!0})},Xr=function(_){const I=this.color;this.addCommands({cmd:()=>{this.color=_,J(this,n,bn).call(this)},undo:()=>{this.color=I,J(this,n,bn).call(this)},mustExec:!0,type:l.AnnotationEditorParamsType.INK_COLOR,overwriteIfSameType:!0,keepUndo:!0})},Yr=function(_){_/=100;const I=this.opacity;this.addCommands({cmd:()=>{this.opacity=_,J(this,n,bn).call(this)},undo:()=>{this.opacity=I,J(this,n,bn).call(this)},mustExec:!0,type:l.AnnotationEditorParamsType.INK_OPACITY,overwriteIfSameType:!0,keepUndo:!0})},Kr=function(){const{parentRotation:_,parentDimensions:[I,tt]}=this;switch(_){case 90:return[0,tt,tt,I];case 180:return[I,tt,I,tt];case 270:return[I,0,tt,I];default:return[0,0,I,tt]}},nr=function(){const{ctx:_,color:I,opacity:tt,thickness:ut,parentScale:wt,scaleFactor:Ft}=this;_.lineWidth=ut*wt/Ft,_.lineCap="round",_.lineJoin="round",_.miterLimit=10,_.strokeStyle=`${I}${(0,Ct.opacityToHex)(tt)}`},Jr=function(_,I){this.canvas.addEventListener("contextmenu",Z.noContextMenu),this.canvas.addEventListener("pointerleave",e(this,j)),this.canvas.addEventListener("pointermove",e(this,H)),this.canvas.addEventListener("pointerup",e(this,y)),this.canvas.removeEventListener("pointerdown",e(this,b)),this.isEditing=!0,e(this,A)||(gt(this,A,!0),J(this,n,On).call(this),this.thickness||(this.thickness=Lt._defaultThickness),this.color||(this.color=Lt._defaultColor||E.AnnotationEditor._defaultLineColor),this.opacity??(this.opacity=Lt._defaultOpacity)),this.currentPath.push([_,I]),gt(this,g,!1),J(this,n,nr).call(this),gt(this,r,()=>{J(this,n,ts).call(this),e(this,r)&&window.requestAnimationFrame(e(this,r))}),window.requestAnimationFrame(e(this,r))},ir=function(_,I){const[tt,ut]=this.currentPath.at(-1);if(this.currentPath.length>1&&_===tt&&I===ut)return;const wt=this.currentPath;let Ft=e(this,M);if(wt.push([_,I]),gt(this,g,!0),wt.length<=2){Ft.moveTo(...wt[0]),Ft.lineTo(_,I);return}wt.length===3&&(gt(this,M,Ft=new Path2D),Ft.moveTo(...wt[0])),J(this,n,es).call(this,Ft,...wt.at(-3),...wt.at(-2),_,I)},Zr=function(){if(this.currentPath.length===0)return;const _=this.currentPath.at(-1);e(this,M).lineTo(..._)},Qr=function(_,I){gt(this,r,null),_=Math.min(Math.max(_,0),this.canvas.width),I=Math.min(Math.max(I,0),this.canvas.height),J(this,n,ir).call(this,_,I),J(this,n,Zr).call(this);let tt;if(this.currentPath.length!==1)tt=J(this,n,ns).call(this);else{const et=[_,I];tt=[[et,et.slice(),et.slice(),et]]}const ut=e(this,M),wt=this.currentPath;this.currentPath=[],gt(this,M,new Path2D);const Ft=()=>{this.allRawPaths.push(wt),this.paths.push(tt),this.bezierPath2D.push(ut),this.rebuild()},Tt=()=>{this.allRawPaths.pop(),this.paths.pop(),this.bezierPath2D.pop(),this.paths.length===0?this.remove():(this.canvas||(J(this,n,di).call(this),J(this,n,ui).call(this)),J(this,n,Nn).call(this))};this.addCommands({cmd:Ft,undo:Tt,mustExec:!0})},ts=function(){if(!e(this,g))return;gt(this,g,!1);const _=Math.ceil(this.thickness*this.parentScale),I=this.currentPath.slice(-3),tt=I.map(Ft=>Ft[0]),ut=I.map(Ft=>Ft[1]);Math.min(...tt)-_,Math.max(...tt)+_,Math.min(...ut)-_,Math.max(...ut)+_;const{ctx:wt}=this;wt.save(),wt.clearRect(0,0,this.canvas.width,this.canvas.height);for(const Ft of this.bezierPath2D)wt.stroke(Ft);wt.stroke(e(this,M)),wt.restore()},es=function(_,I,tt,ut,wt,Ft,Tt){const et=(I+ut)/2,jt=(tt+wt)/2,Bt=(ut+Ft)/2,he=(wt+Tt)/2;_.bezierCurveTo(et+2*(ut-et)/3,jt+2*(wt-jt)/3,Bt+2*(ut-Bt)/3,he+2*(wt-he)/3,Bt,he)},ns=function(){const _=this.currentPath;if(_.length<=2)return[[_[0],_[0],_.at(-1),_.at(-1)]];const I=[];let tt,[ut,wt]=_[0];for(tt=1;tt<_.length-2;tt++){const[oe,xe]=_[tt],[Xt,le]=_[tt+1],_e=(oe+Xt)/2,Le=(xe+le)/2,Mt=[ut+2*(oe-ut)/3,wt+2*(xe-wt)/3],ot=[_e+2*(oe-_e)/3,Le+2*(xe-Le)/3];I.push([[ut,wt],Mt,ot,[_e,Le]]),[ut,wt]=[_e,Le]}const[Ft,Tt]=_[tt],[et,jt]=_[tt+1],Bt=[ut+2*(Ft-ut)/3,wt+2*(Tt-wt)/3],he=[et+2*(Ft-et)/3,jt+2*(Tt-jt)/3];return I.push([[ut,wt],Bt,he,[et,jt]]),I},bn=function(){if(this.isEmpty()){J(this,n,fi).call(this);return}J(this,n,nr).call(this);const{canvas:_,ctx:I}=this;I.setTransform(1,0,0,1,0,0),I.clearRect(0,0,_.width,_.height),J(this,n,fi).call(this);for(const tt of this.bezierPath2D)I.stroke(tt)},rr=function(_){this.canvas.removeEventListener("pointerleave",e(this,j)),this.canvas.removeEventListener("pointermove",e(this,H)),this.canvas.removeEventListener("pointerup",e(this,y)),this.canvas.addEventListener("pointerdown",e(this,b)),setTimeout(()=>{this.canvas.removeEventListener("contextmenu",Z.noContextMenu)},10),J(this,n,Qr).call(this,_.offsetX,_.offsetY),this.addToAnnotationStorage(),this.setInBackground()},di=function(){this.canvas=document.createElement("canvas"),this.canvas.width=this.canvas.height=0,this.canvas.className="inkEditorCanvas",E.AnnotationEditor._l10nPromise.get("editor_ink_canvas_aria_label").then(_=>this.canvas?.setAttribute("aria-label",_)),this.div.append(this.canvas),this.ctx=this.canvas.getContext("2d")},ui=function(){gt(this,O,new ResizeObserver(_=>{const I=_[0].contentRect;I.width&&I.height&&this.setDimensions(I.width,I.height)})),e(this,O).observe(this.div)},On=function(){if(!e(this,A))return;const[_,I]=this.parentDimensions;this.canvas.width=Math.ceil(this.width*_),this.canvas.height=Math.ceil(this.height*I),J(this,n,fi).call(this)},sr=function(_,I){const tt=J(this,n,pi).call(this),ut=(_-tt)/e(this,d),wt=(I-tt)/e(this,T);this.scaleFactor=Math.min(ut,wt)},fi=function(){const _=J(this,n,pi).call(this)/2;this.ctx.setTransform(this.scaleFactor,0,0,this.scaleFactor,this.translationX*this.scaleFactor+_,this.translationY*this.scaleFactor+_)},L=new WeakSet,is=function(_){const I=new Path2D;for(let tt=0,ut=_.length;tt<ut;tt++){const[wt,Ft,Tt,et]=_[tt];tt===0&&I.moveTo(...wt),I.bezierCurveTo(Ft[0],Ft[1],Tt[0],Tt[1],et[0],et[1])}return I},ar=function(_,I,tt){const[ut,wt,Ft,Tt]=I;switch(tt){case 0:for(let et=0,jt=_.length;et<jt;et+=2)_[et]+=ut,_[et+1]=Tt-_[et+1];break;case 90:for(let et=0,jt=_.length;et<jt;et+=2){const Bt=_[et];_[et]=_[et+1]+ut,_[et+1]=Bt+wt}break;case 180:for(let et=0,jt=_.length;et<jt;et+=2)_[et]=Ft-_[et],_[et+1]+=wt;break;case 270:for(let et=0,jt=_.length;et<jt;et+=2){const Bt=_[et];_[et]=Ft-_[et+1],_[et+1]=Tt-Bt}break;default:throw new Error("Invalid rotation")}return _},rs=function(_,I,tt){const[ut,wt,Ft,Tt]=I;switch(tt){case 0:for(let et=0,jt=_.length;et<jt;et+=2)_[et]-=ut,_[et+1]=Tt-_[et+1];break;case 90:for(let et=0,jt=_.length;et<jt;et+=2){const Bt=_[et];_[et]=_[et+1]-wt,_[et+1]=Bt-ut}break;case 180:for(let et=0,jt=_.length;et<jt;et+=2)_[et]=Ft-_[et],_[et+1]-=wt;break;case 270:for(let et=0,jt=_.length;et<jt;et+=2){const Bt=_[et];_[et]=Tt-_[et+1],_[et+1]=Ft-Bt}break;default:throw new Error("Invalid rotation")}return _},ss=function(_,I,tt,ut){var jt,Bt;const wt=[],Ft=this.thickness/2,Tt=_*I+Ft,et=_*tt+Ft;for(const he of this.paths){const oe=[],xe=[];for(let Xt=0,le=he.length;Xt<le;Xt++){const[_e,Le,Mt,ot]=he[Xt],st=_*_e[0]+Tt,Yt=_*_e[1]+et,Jt=_*Le[0]+Tt,ne=_*Le[1]+et,B=_*Mt[0]+Tt,xt=_*Mt[1]+et,Wt=_*ot[0]+Tt,Qt=_*ot[1]+et;Xt===0&&(oe.push(st,Yt),xe.push(st,Yt)),oe.push(Jt,ne,B,xt,Wt,Qt),xe.push(Jt,ne),Xt===le-1&&xe.push(Wt,Qt)}wt.push({bezier:J(jt=Lt,L,ar).call(jt,oe,ut,this.rotation),points:J(Bt=Lt,L,ar).call(Bt,xe,ut,this.rotation)})}return wt},or=function(){let _=1/0,I=-1/0,tt=1/0,ut=-1/0;for(const wt of this.paths)for(const[Ft,Tt,et,jt]of wt){const Bt=l.Util.bezierBoundingBox(...Ft,...Tt,...et,...jt);_=Math.min(_,Bt[0]),tt=Math.min(tt,Bt[1]),I=Math.max(I,Bt[2]),ut=Math.max(ut,Bt[3])}return[_,tt,I,ut]},pi=function(){return e(this,v)?Math.ceil(this.thickness*this.parentScale):0},Nn=function(_=!1){if(this.isEmpty())return;if(!e(this,v)){J(this,n,bn).call(this);return}const I=J(this,n,or).call(this),tt=J(this,n,pi).call(this);gt(this,d,Math.max(E.AnnotationEditor.MIN_SIZE,I[2]-I[0])),gt(this,T,Math.max(E.AnnotationEditor.MIN_SIZE,I[3]-I[1]));const ut=Math.ceil(tt+e(this,d)*this.scaleFactor),wt=Math.ceil(tt+e(this,T)*this.scaleFactor),[Ft,Tt]=this.parentDimensions;this.width=ut/Ft,this.height=wt/Tt,this.setAspectRatio(ut,wt);const et=this.translationX,jt=this.translationY;this.translationX=-I[0],this.translationY=-I[1],J(this,n,On).call(this),J(this,n,bn).call(this),gt(this,w,ut),gt(this,o,wt),this.setDims(ut,wt);const Bt=_?tt/this.scaleFactor/2:0;this.translate(et-this.translationX-Bt,jt-this.translationY-Bt)},pt(Lt,L),$e(Lt,"_defaultColor",null),$e(Lt,"_defaultOpacity",1),$e(Lt,"_defaultThickness",1),$e(Lt,"_type","ink");let W=Lt;u.InkEditor=W}),((c,u,_t)=>{var W,T,d,H,j,y,b,M,v,g,A,qn,Gn,gi,cr,as,os,lr,mi,cs;Object.defineProperty(u,"__esModule",{value:!0}),u.StampEditor=void 0;var l=_t(1),E=_t(4),t=_t(6),Z=_t(29);const P=class P extends E.AnnotationEditor{constructor(nt){super({...nt,name:"stampEditor"});pt(this,A);pt(this,W,null);pt(this,T,null);pt(this,d,null);pt(this,H,null);pt(this,j,null);pt(this,y,null);pt(this,b,null);pt(this,M,null);pt(this,v,!1);pt(this,g,!1);gt(this,H,nt.bitmapUrl),gt(this,j,nt.bitmapFile)}static initialize(nt){E.AnnotationEditor.initialize(nt)}static get supportedTypes(){const nt=["apng","avif","bmp","gif","jpeg","png","svg+xml","webp","x-icon"];return(0,l.shadow)(this,"supportedTypes",nt.map(at=>`image/${at}`))}static get supportedTypesStr(){return(0,l.shadow)(this,"supportedTypesStr",this.supportedTypes.join(","))}static isHandlingMimeForPasting(nt){return this.supportedTypes.includes(nt)}static paste(nt,at){at.pasteEditor(l.AnnotationEditorType.STAMP,{bitmapFile:nt.getAsFile()})}remove(){e(this,T)&&(gt(this,W,null),this._uiManager.imageManager.deleteId(e(this,T)),e(this,y)?.remove(),gt(this,y,null),e(this,b)?.disconnect(),gt(this,b,null)),super.remove()}rebuild(){if(!this.parent){e(this,T)&&J(this,A,gi).call(this);return}super.rebuild(),this.div!==null&&(e(this,T)&&J(this,A,gi).call(this),this.isAttachedToDOM||this.parent.add(this))}onceAdded(){this._isDraggable=!0,this.div.focus()}isEmpty(){return!(e(this,d)||e(this,W)||e(this,H)||e(this,j))}get isResizable(){return!0}render(){if(this.div)return this.div;let nt,at;if(this.width&&(nt=this.x,at=this.y),super.render(),this.div.hidden=!0,e(this,W)?J(this,A,cr).call(this):J(this,A,gi).call(this),this.width){const[K,vt]=this.parentDimensions;this.setAt(nt*K,at*vt,this.width*K,this.height*vt)}return this.div}static deserialize(nt,at,K){if(nt instanceof Z.StampAnnotationElement)return null;const vt=super.deserialize(nt,at,K),{rect:N,bitmapUrl:Q,bitmapId:ct,isSvg:k,accessibilityData:s}=nt;ct&&K.imageManager.isValidId(ct)?gt(vt,T,ct):gt(vt,H,Q),gt(vt,v,k);const[a,m]=vt.pageDimensions;return vt.width=(N[2]-N[0])/a,vt.height=(N[3]-N[1])/m,s&&(vt.altTextData=s),vt}serialize(nt=!1,at=null){if(this.isEmpty())return null;const K={annotationType:l.AnnotationEditorType.STAMP,bitmapId:e(this,T),pageIndex:this.pageIndex,rect:this.getRect(0,0),rotation:this.rotation,isSvg:e(this,v),structTreeParentId:this._structTreeParentId};if(nt)return K.bitmapUrl=J(this,A,mi).call(this,!0),K.accessibilityData=this.altTextData,K;const{decorative:vt,altText:N}=this.altTextData;if(!vt&&N&&(K.accessibilityData={type:"Figure",alt:N}),at===null)return K;at.stamps||(at.stamps=new Map);const Q=e(this,v)?(K.rect[2]-K.rect[0])*(K.rect[3]-K.rect[1]):null;if(!at.stamps.has(e(this,T)))at.stamps.set(e(this,T),{area:Q,serialized:K}),K.bitmap=J(this,A,mi).call(this,!1);else if(e(this,v)){const ct=at.stamps.get(e(this,T));Q>ct.area&&(ct.area=Q,ct.serialized.bitmap.close(),ct.serialized.bitmap=J(this,A,mi).call(this,!1))}return K}};W=new WeakMap,T=new WeakMap,d=new WeakMap,H=new WeakMap,j=new WeakMap,y=new WeakMap,b=new WeakMap,M=new WeakMap,v=new WeakMap,g=new WeakMap,A=new WeakSet,qn=function(nt,at=!1){if(!nt){this.remove();return}gt(this,W,nt.bitmap),at||(gt(this,T,nt.id),gt(this,v,nt.isSvg)),J(this,A,cr).call(this)},Gn=function(){gt(this,d,null),this._uiManager.enableWaiting(!1),e(this,y)&&this.div.focus()},gi=function(){if(e(this,T)){this._uiManager.enableWaiting(!0),this._uiManager.imageManager.getFromId(e(this,T)).then(at=>J(this,A,qn).call(this,at,!0)).finally(()=>J(this,A,Gn).call(this));return}if(e(this,H)){const at=e(this,H);gt(this,H,null),this._uiManager.enableWaiting(!0),gt(this,d,this._uiManager.imageManager.getFromUrl(at).then(K=>J(this,A,qn).call(this,K)).finally(()=>J(this,A,Gn).call(this)));return}if(e(this,j)){const at=e(this,j);gt(this,j,null),this._uiManager.enableWaiting(!0),gt(this,d,this._uiManager.imageManager.getFromFile(at).then(K=>J(this,A,qn).call(this,K)).finally(()=>J(this,A,Gn).call(this)));return}const nt=document.createElement("input");nt.type="file",nt.accept=P.supportedTypesStr,gt(this,d,new Promise(at=>{nt.addEventListener("change",async()=>{if(!nt.files||nt.files.length===0)this.remove();else{this._uiManager.enableWaiting(!0);const K=await this._uiManager.imageManager.getFromFile(nt.files[0]);J(this,A,qn).call(this,K)}at()}),nt.addEventListener("cancel",()=>{this.remove(),at()})}).finally(()=>J(this,A,Gn).call(this))),nt.click()},cr=function(){const{div:nt}=this;let{width:at,height:K}=e(this,W);const[vt,N]=this.pageDimensions,Q=.75;if(this.width)at=this.width*vt,K=this.height*N;else if(at>Q*vt||K>Q*N){const a=Math.min(Q*vt/at,Q*N/K);at*=a,K*=a}const[ct,k]=this.parentDimensions;this.setDims(at*ct/vt,K*k/N),this._uiManager.enableWaiting(!1);const s=gt(this,y,document.createElement("canvas"));nt.append(s),nt.hidden=!1,J(this,A,lr).call(this,at,K),J(this,A,cs).call(this),e(this,g)||(this.parent.addUndoableEditor(this),gt(this,g,!0)),this._uiManager._eventBus.dispatch("reporttelemetry",{source:this,details:{type:"editing",subtype:this.editorType,data:{action:"inserted_image"}}}),this.addAltTextButton()},as=function(nt,at){const[K,vt]=this.parentDimensions;this.width=nt/K,this.height=at/vt,this.setDims(nt,at),this._initialOptions?.isCentered?this.center():this.fixAndSetPosition(),this._initialOptions=null,e(this,M)!==null&&clearTimeout(e(this,M)),gt(this,M,setTimeout(()=>{gt(this,M,null),J(this,A,lr).call(this,nt,at)},200))},os=function(nt,at){const{width:K,height:vt}=e(this,W);let N=K,Q=vt,ct=e(this,W);for(;N>2*nt||Q>2*at;){const k=N,s=Q;N>2*nt&&(N=N>=16384?Math.floor(N/2)-1:Math.ceil(N/2)),Q>2*at&&(Q=Q>=16384?Math.floor(Q/2)-1:Math.ceil(Q/2));const a=new OffscreenCanvas(N,Q);a.getContext("2d").drawImage(ct,0,0,k,s,0,0,N,Q),ct=a.transferToImageBitmap()}return ct},lr=function(nt,at){nt=Math.ceil(nt),at=Math.ceil(at);const K=e(this,y);if(!K||K.width===nt&&K.height===at)return;K.width=nt,K.height=at;const vt=e(this,v)?e(this,W):J(this,A,os).call(this,nt,at),N=K.getContext("2d");N.filter=this._uiManager.hcmFilter,N.drawImage(vt,0,0,vt.width,vt.height,0,0,nt,at)},mi=function(nt){if(nt){if(e(this,v)){const vt=this._uiManager.imageManager.getSvgUrl(e(this,T));if(vt)return vt}const at=document.createElement("canvas");return{width:at.width,height:at.height}=e(this,W),at.getContext("2d").drawImage(e(this,W),0,0),at.toDataURL()}if(e(this,v)){const[at,K]=this.pageDimensions,vt=Math.round(this.width*at*t.PixelsPerInch.PDF_TO_CSS_UNITS),N=Math.round(this.height*K*t.PixelsPerInch.PDF_TO_CSS_UNITS),Q=new OffscreenCanvas(vt,N);return Q.getContext("2d").drawImage(e(this,W),0,0,e(this,W).width,e(this,W).height,0,0,vt,N),Q.transferToImageBitmap()}return structuredClone(e(this,W))},cs=function(){gt(this,b,new ResizeObserver(nt=>{const at=nt[0].contentRect;at.width&&at.height&&J(this,A,as).call(this,at.width,at.height)})),e(this,b).observe(this.div)},$e(P,"_type","stamp");let Ct=P;u.StampEditor=Ct})],__webpack_module_cache__={};function __w_pdfjs_require__(c){var u=__webpack_module_cache__[c];if(u!==void 0)return u.exports;var _t=__webpack_module_cache__[c]={exports:{}};return __webpack_modules__[c](_t,_t.exports,__w_pdfjs_require__),_t.exports}var __webpack_exports__={};return(()=>{var c=__webpack_exports__;Object.defineProperty(c,"__esModule",{value:!0}),Object.defineProperty(c,"AbortException",{enumerable:!0,get:function(){return u.AbortException}}),Object.defineProperty(c,"AnnotationEditorLayer",{enumerable:!0,get:function(){return t.AnnotationEditorLayer}}),Object.defineProperty(c,"AnnotationEditorParamsType",{enumerable:!0,get:function(){return u.AnnotationEditorParamsType}}),Object.defineProperty(c,"AnnotationEditorType",{enumerable:!0,get:function(){return u.AnnotationEditorType}}),Object.defineProperty(c,"AnnotationEditorUIManager",{enumerable:!0,get:function(){return Z.AnnotationEditorUIManager}}),Object.defineProperty(c,"AnnotationLayer",{enumerable:!0,get:function(){return Ct.AnnotationLayer}}),Object.defineProperty(c,"AnnotationMode",{enumerable:!0,get:function(){return u.AnnotationMode}}),Object.defineProperty(c,"CMapCompressionType",{enumerable:!0,get:function(){return u.CMapCompressionType}}),Object.defineProperty(c,"DOMSVGFactory",{enumerable:!0,get:function(){return l.DOMSVGFactory}}),Object.defineProperty(c,"FeatureTest",{enumerable:!0,get:function(){return u.FeatureTest}}),Object.defineProperty(c,"GlobalWorkerOptions",{enumerable:!0,get:function(){return W.GlobalWorkerOptions}}),Object.defineProperty(c,"ImageKind",{enumerable:!0,get:function(){return u.ImageKind}}),Object.defineProperty(c,"InvalidPDFException",{enumerable:!0,get:function(){return u.InvalidPDFException}}),Object.defineProperty(c,"MissingPDFException",{enumerable:!0,get:function(){return u.MissingPDFException}}),Object.defineProperty(c,"OPS",{enumerable:!0,get:function(){return u.OPS}}),Object.defineProperty(c,"PDFDataRangeTransport",{enumerable:!0,get:function(){return _t.PDFDataRangeTransport}}),Object.defineProperty(c,"PDFDateString",{enumerable:!0,get:function(){return l.PDFDateString}}),Object.defineProperty(c,"PDFWorker",{enumerable:!0,get:function(){return _t.PDFWorker}}),Object.defineProperty(c,"PasswordResponses",{enumerable:!0,get:function(){return u.PasswordResponses}}),Object.defineProperty(c,"PermissionFlag",{enumerable:!0,get:function(){return u.PermissionFlag}}),Object.defineProperty(c,"PixelsPerInch",{enumerable:!0,get:function(){return l.PixelsPerInch}}),Object.defineProperty(c,"PromiseCapability",{enumerable:!0,get:function(){return u.PromiseCapability}}),Object.defineProperty(c,"RenderingCancelledException",{enumerable:!0,get:function(){return l.RenderingCancelledException}}),Object.defineProperty(c,"SVGGraphics",{enumerable:!0,get:function(){return _t.SVGGraphics}}),Object.defineProperty(c,"UnexpectedResponseException",{enumerable:!0,get:function(){return u.UnexpectedResponseException}}),Object.defineProperty(c,"Util",{enumerable:!0,get:function(){return u.Util}}),Object.defineProperty(c,"VerbosityLevel",{enumerable:!0,get:function(){return u.VerbosityLevel}}),Object.defineProperty(c,"XfaLayer",{enumerable:!0,get:function(){return T.XfaLayer}}),Object.defineProperty(c,"build",{enumerable:!0,get:function(){return _t.build}}),Object.defineProperty(c,"createValidAbsoluteUrl",{enumerable:!0,get:function(){return u.createValidAbsoluteUrl}}),Object.defineProperty(c,"getDocument",{enumerable:!0,get:function(){return _t.getDocument}}),Object.defineProperty(c,"getFilenameFromUrl",{enumerable:!0,get:function(){return l.getFilenameFromUrl}}),Object.defineProperty(c,"getPdfFilenameFromUrl",{enumerable:!0,get:function(){return l.getPdfFilenameFromUrl}}),Object.defineProperty(c,"getXfaPageViewport",{enumerable:!0,get:function(){return l.getXfaPageViewport}}),Object.defineProperty(c,"isDataScheme",{enumerable:!0,get:function(){return l.isDataScheme}}),Object.defineProperty(c,"isPdfFile",{enumerable:!0,get:function(){return l.isPdfFile}}),Object.defineProperty(c,"loadScript",{enumerable:!0,get:function(){return l.loadScript}}),Object.defineProperty(c,"noContextMenu",{enumerable:!0,get:function(){return l.noContextMenu}}),Object.defineProperty(c,"normalizeUnicode",{enumerable:!0,get:function(){return u.normalizeUnicode}}),Object.defineProperty(c,"renderTextLayer",{enumerable:!0,get:function(){return E.renderTextLayer}}),Object.defineProperty(c,"setLayerDimensions",{enumerable:!0,get:function(){return l.setLayerDimensions}}),Object.defineProperty(c,"shadow",{enumerable:!0,get:function(){return u.shadow}}),Object.defineProperty(c,"updateTextLayer",{enumerable:!0,get:function(){return E.updateTextLayer}}),Object.defineProperty(c,"version",{enumerable:!0,get:function(){return _t.version}});var u=__w_pdfjs_require__(1),_t=__w_pdfjs_require__(2),l=__w_pdfjs_require__(6),E=__w_pdfjs_require__(26),t=__w_pdfjs_require__(27),Z=__w_pdfjs_require__(5),Ct=__w_pdfjs_require__(29),W=__w_pdfjs_require__(14),T=__w_pdfjs_require__(32)})(),__webpack_exports__})())})(pdf)),pdf.exports}var hasRequiredCore_min;function requireCore_min(){return hasRequiredCore_min||(hasRequiredCore_min=1,(function(c){var u=requireReact(),_t=requirePdf();function l(i){var f=Object.create(null);return i&&Object.keys(i).forEach((function(D){if(D!=="default"){var U=Object.getOwnPropertyDescriptor(i,D);Object.defineProperty(f,D,U.get?U:{enumerable:!0,get:function(){return i[D]}})}})),f.default=i,Object.freeze(f)}var E,t=l(u),Z=l(_t);c.AnnotationType=void 0,(E=c.AnnotationType||(c.AnnotationType={}))[E.Text=1]="Text",E[E.Link=2]="Link",E[E.FreeText=3]="FreeText",E[E.Line=4]="Line",E[E.Square=5]="Square",E[E.Circle=6]="Circle",E[E.Polygon=7]="Polygon",E[E.Polyline=8]="Polyline",E[E.Highlight=9]="Highlight",E[E.Underline=10]="Underline",E[E.Squiggly=11]="Squiggly",E[E.StrikeOut=12]="StrikeOut",E[E.Stamp=13]="Stamp",E[E.Caret=14]="Caret",E[E.Ink=15]="Ink",E[E.Popup=16]="Popup",E[E.FileAttachment=17]="FileAttachment";var Ct=function(i,f){return Ct=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(D,U){D.__proto__=U}||function(D,U){for(var V in U)Object.prototype.hasOwnProperty.call(U,V)&&(D[V]=U[V])},Ct(i,f)};function W(i,f){if(typeof f!="function"&&f!==null)throw new TypeError("Class extends value "+String(f)+" is not a constructor or null");function D(){this.constructor=i}Ct(i,f),i.prototype=f===null?Object.create(f):(D.prototype=f.prototype,new D)}var T,d=function(){return d=Object.assign||function(i){for(var f,D=1,U=arguments.length;D<U;D++)for(var V in f=arguments[D])Object.prototype.hasOwnProperty.call(f,V)&&(i[V]=f[V]);return i},d.apply(this,arguments)};c.TextDirection=void 0,(T=c.TextDirection||(c.TextDirection={})).RightToLeft="RTL",T.LeftToRight="LTR";var H,j=t.createContext({currentTheme:"light",direction:c.TextDirection.LeftToRight,setCurrentTheme:function(){}}),y=function(i){var f=[];return Object.keys(i).forEach((function(D){D&&i[D]&&f.push(D)})),f.join(" ")},b=typeof window<"u"?t.useLayoutEffect:t.useEffect,M=function(i){var f=t.useRef(null),D=i.once,U=i.threshold,V=i.onVisibilityChanged;return b((function(){var Y=f.current;if(Y){var ft=new IntersectionObserver((function(it){it.forEach((function(z){var lt=z.isIntersecting,rt=z.intersectionRatio;V({isVisible:lt,ratio:rt}),lt&&D&&(ft.unobserve(Y),ft.disconnect())}))}),{threshold:U||0});return ft.observe(Y),function(){ft.unobserve(Y),ft.disconnect()}}}),[]),f},v=function(i){var f=i.children,D=i.ignoreDirection,U=D!==void 0&&D,V=i.size,Y=V===void 0?24:V,ft=t.useContext(j).direction,it=!U&&ft===c.TextDirection.RightToLeft,z="".concat(Y||24,"px");return t.createElement("svg",{"aria-hidden":"true",className:y({"rpv-core__icon":!0,"rpv-core__icon--rtl":it}),focusable:"false",height:z,viewBox:"0 0 24 24",width:z},f)},g=function(){return t.createElement(v,{size:16},t.createElement("path",{d:"M23.5,0.499l-16.5,23l-6.5-6.5"}))},A=function(i){var f=i.children,D=i.testId,U=i.onClick,V=t.useContext(j).direction===c.TextDirection.RightToLeft,Y=D?{"data-testid":D}:{};return t.createElement("button",d({className:y({"rpv-core__primary-button":!0,"rpv-core__primary-button--rtl":V}),type:"button",onClick:U},Y),f)},O=function(i){var f=i.size,D=f===void 0?"4rem":f,U=i.testId,V=t.useState(!1),Y=V[0],ft=V[1],it=U?{"data-testid":U}:{},z=M({onVisibilityChanged:function(lt){ft(lt.isVisible)}});return t.createElement("div",d({},it,{className:y({"rpv-core__spinner":!0,"rpv-core__spinner--animating":Y}),ref:z,style:{height:D,width:D}}))},w=function(i){var f=i.ariaLabel,D=f===void 0?"":f,U=i.autoFocus,V=U!==void 0&&U,Y=i.placeholder,ft=Y===void 0?"":Y,it=i.testId,z=i.type,lt=z===void 0?"text":z,rt=i.value,Ot=rt===void 0?"":rt,Dt=i.onChange,It=i.onKeyDown,$t=It===void 0?function(){}:It,zt=t.useContext(j).direction,Ut=t.useRef(),Pe=zt===c.TextDirection.RightToLeft,fe={ref:Ut,"data-testid":"","aria-label":D,className:y({"rpv-core__textbox":!0,"rpv-core__textbox--rtl":Pe}),placeholder:ft,value:Ot,onChange:function(pe){return Dt(pe.target.value)},onKeyDown:$t};return it&&(fe["data-testid"]=it),b((function(){if(V){var pe=Ut.current;if(pe){var be=window.scrollX,ie=window.scrollY;pe.focus(),window.scrollTo(be,ie)}}}),[]),lt==="text"?t.createElement("input",d({type:"text"},fe)):t.createElement("input",d({type:"password"},fe))};(function(i){i[i.ExitFullScreen=0]="ExitFullScreen",i[i.FullScreenChange=1]="FullScreenChange",i[i.FullScreenElement=2]="FullScreenElement",i[i.FullScreenEnabled=3]="FullScreenEnabled",i[i.RequestFullScreen=4]="RequestFullScreen"})(H||(H={}));var o,r={ExitFullScreen:"exitFullscreen",FullScreenChange:"fullscreenchange",FullScreenElement:"fullscreenElement",FullScreenEnabled:"fullscreenEnabled",RequestFullScreen:"requestFullscreen"},n={ExitFullScreen:"webkitExitFullscreen",FullScreenChange:"webkitfullscreenchange",FullScreenElement:"webkitFullscreenElement",FullScreenEnabled:"webkitFullscreenEnabled",RequestFullScreen:"webkitRequestFullscreen"},S={ExitFullScreen:"msExitFullscreen",FullScreenChange:"msFullscreenChange",FullScreenElement:"msFullscreenElement",FullScreenEnabled:"msFullscreenEnabled",RequestFullScreen:"msRequestFullscreen"},p=typeof window<"u",G=p&&(H.FullScreenEnabled in document&&r||n.FullScreenEnabled in document&&n||S.FullScreenEnabled in document&&S)||r,h=function(){return p&&G.FullScreenEnabled in document&&document[G.FullScreenEnabled]===!0},P=function(i){return p?i[G.ExitFullScreen]():Promise.resolve({})},$=function(){return p?document[G.FullScreenElement]:null},bt=function(i,f){var D=t.useRef(),U=function(){D.current&&clearTimeout(D.current)};return t.useEffect((function(){return function(){return U()}}),[]),t.useCallback((function(){for(var V=[],Y=0;Y<arguments.length;Y++)V[Y]=arguments[Y];U(),D.current=setTimeout((function(){i.apply(void 0,V)}),f)}),[i,f])},nt=function(){var i=t.useRef(!1);return t.useEffect((function(){return i.current=!0,function(){i.current=!1}}),[]),i},at=function(i){var f=t.useRef(i);return t.useEffect((function(){f.current=i}),[i]),f.current};(function(i){i.NotRenderedYet="NotRenderedYet",i.Rendering="Rendering",i.Rendered="Rendered"})(o||(o={}));var K,vt=-9999,N=function(i){var f=i.doc,D=f.numPages,U=f.loadingTask.docId,V=t.useMemo((function(){return Array(D).fill(null).map((function(it,z){return{pageIndex:z,renderStatus:o.NotRenderedYet,visibility:vt}}))}),[U]),Y=t.useRef({currentRenderingPage:-1,startRange:0,endRange:D-1,visibilities:V}),ft=function(it,z){Y.current.visibilities[it].visibility=z};return{getHighestPriorityPage:function(){var it=Y.current.visibilities.slice(Y.current.startRange,Y.current.endRange+1).filter((function(Dt){return Dt.visibility>vt}));if(!it.length)return-1;for(var z=it[0].pageIndex,lt=it[it.length-1].pageIndex,rt=it.length,Ot=0;Ot<rt;Ot++){if(it[Ot].renderStatus===o.Rendering)return-1;if(it[Ot].renderStatus===o.NotRenderedYet)return it[Ot].pageIndex}return lt+1<D&&Y.current.visibilities[lt+1].renderStatus!==o.Rendered?lt+1:z-1>=0&&Y.current.visibilities[z-1].renderStatus!==o.Rendered?z-1:-1},isInRange:function(it){return it>=Y.current.startRange&&it<=Y.current.endRange},markNotRendered:function(){for(var it=0;it<D;it++)Y.current.visibilities[it].renderStatus=o.NotRenderedYet},markRendered:function(it){Y.current.visibilities[it].renderStatus=o.Rendered},markRendering:function(it){Y.current.currentRenderingPage!==-1&&Y.current.currentRenderingPage!==it&&Y.current.visibilities[Y.current.currentRenderingPage].renderStatus===o.Rendering&&(Y.current.visibilities[Y.current.currentRenderingPage].renderStatus=o.NotRenderedYet),Y.current.visibilities[it].renderStatus=o.Rendering,Y.current.currentRenderingPage=it},setOutOfRange:function(it){ft(it,vt)},setRange:function(it,z){Y.current.startRange=it,Y.current.endRange=z;for(var lt=0;lt<D;lt++)(lt<it||lt>z)&&(Y.current.visibilities[lt].visibility=vt,Y.current.visibilities[lt].renderStatus=o.NotRenderedYet)},setVisibility:ft}},Q={core:{askingPassword:{requirePasswordToOpen:"This document requires a password to open",submit:"Submit"},wrongPassword:{tryAgain:"The password is wrong. Please try again"},pageLabel:"Page {{pageIndex}}"}},ct=t.createContext({l10n:Q,setL10n:function(){}}),k=0,s=function(){return k++},a=function(i,f,D){var U=function(V){var Y=f.current;if(Y){var ft=V.target;if(ft instanceof Element&&ft.shadowRoot){var it=V.composedPath();it.length>0&&!Y.contains(it[0])&&D()}else Y.contains(ft)||D()}};t.useEffect((function(){if(i){var V={capture:!0};return document.addEventListener("click",U,V),function(){document.removeEventListener("click",U,V)}}}),[])},m=function(i){var f=function(D){D.key==="Escape"&&i()};t.useEffect((function(){return document.addEventListener("keyup",f),function(){document.removeEventListener("keyup",f)}}),[])},F=function(i){var f=i.ariaControlsSuffix,D=i.children,U=i.closeOnClickOutside,V=i.closeOnEscape,Y=i.onToggle,ft=t.useRef(),it=t.useContext(j).direction===c.TextDirection.RightToLeft;return t.useEffect((function(){var z=window.getComputedStyle(document.body).overflow;return document.body.style.overflow="hidden",function(){document.body.style.overflow=z}}),[]),m((function(){ft.current&&V&&Y()})),a(U,ft,Y),b((function(){var z=ft.current;if(z){var lt=.75*document.body.clientHeight;z.getBoundingClientRect().height>=lt&&(z.style.overflow="auto",z.style.maxHeight="".concat(lt,"px"))}}),[]),t.createElement("div",{"aria-modal":"true",className:y({"rpv-core__modal-body":!0,"rpv-core__modal-body--rtl":it}),id:"rpv-core__modal-body-".concat(f),ref:ft,role:"dialog",tabIndex:-1},D)},L=function(i){var f=i.children;return t.createElement("div",{className:"rpv-core__modal-overlay"},f)};c.ToggleStatus=void 0,(K=c.ToggleStatus||(c.ToggleStatus={})).Close="Close",K.Open="Open",K.Toggle="Toggle";var R,q=function(i){var f=t.useState(i),D=f[0],U=f[1];return{opened:D,toggle:function(V){switch(V){case c.ToggleStatus.Close:U(!1);break;case c.ToggleStatus.Open:U(!0);break;case c.ToggleStatus.Toggle:default:U((function(Y){return!Y}))}}}},mt=function(i){var f=i.content,D=i.isOpened,U=D!==void 0&&D,V=i.target,Y=q(U),ft=Y.opened,it=Y.toggle;return t.createElement(t.Fragment,null,V&&V(it,ft),ft&&f(it))};c.Position=void 0,(R=c.Position||(c.Position={})).TopLeft="TOP_LEFT",R.TopCenter="TOP_CENTER",R.TopRight="TOP_RIGHT",R.RightTop="RIGHT_TOP",R.RightCenter="RIGHT_CENTER",R.RightBottom="RIGHT_BOTTOM",R.BottomLeft="BOTTOM_LEFT",R.BottomCenter="BOTTOM_CENTER",R.BottomRight="BOTTOM_RIGHT",R.LeftTop="LEFT_TOP",R.LeftCenter="LEFT_CENTER",R.LeftBottom="LEFT_BOTTOM";var At,Et,Pt,Rt,Lt,ht,dt,_,I=function(i,f,D,U,V){b((function(){var Y=f.current,ft=i.current,it=D.current;if(ft&&Y&&it){var z=it.getBoundingClientRect(),lt=(function(Dt,It,$t,zt){var Ut=It.getBoundingClientRect(),Pe=Dt.getBoundingClientRect(),fe=Pe.height,pe=Pe.width,be=0,ie=0;switch($t){case c.Position.TopLeft:be=Ut.top-fe,ie=Ut.left;break;case c.Position.TopCenter:be=Ut.top-fe,ie=Ut.left+Ut.width/2-pe/2;break;case c.Position.TopRight:be=Ut.top-fe,ie=Ut.left+Ut.width-pe;break;case c.Position.RightTop:be=Ut.top,ie=Ut.left+Ut.width;break;case c.Position.RightCenter:be=Ut.top+Ut.height/2-fe/2,ie=Ut.left+Ut.width;break;case c.Position.RightBottom:be=Ut.top+Ut.height-fe,ie=Ut.left+Ut.width;break;case c.Position.BottomLeft:be=Ut.top+Ut.height,ie=Ut.left;break;case c.Position.BottomCenter:be=Ut.top+Ut.height,ie=Ut.left+Ut.width/2-pe/2;break;case c.Position.BottomRight:be=Ut.top+Ut.height,ie=Ut.left+Ut.width-pe;break;case c.Position.LeftTop:be=Ut.top,ie=Ut.left-pe;break;case c.Position.LeftCenter:be=Ut.top+Ut.height/2-fe/2,ie=Ut.left-pe;break;case c.Position.LeftBottom:be=Ut.top+Ut.height-fe,ie=Ut.left-pe}return{left:ie+(zt.left||0),top:be+(zt.top||0)}})(ft,Y,U,V),rt=lt.top,Ot=lt.left;ft.style.top="".concat(rt-z.top,"px"),ft.style.left="".concat(Ot-z.left,"px")}}),[])},tt=function(i){var f,D=i.customClassName,U=i.position;return t.createElement("div",{className:y((f={"rpv-core__arrow":!0,"rpv-core__arrow--tl":U===c.Position.TopLeft,"rpv-core__arrow--tc":U===c.Position.TopCenter,"rpv-core__arrow--tr":U===c.Position.TopRight,"rpv-core__arrow--rt":U===c.Position.RightTop,"rpv-core__arrow--rc":U===c.Position.RightCenter,"rpv-core__arrow--rb":U===c.Position.RightBottom,"rpv-core__arrow--bl":U===c.Position.BottomLeft,"rpv-core__arrow--bc":U===c.Position.BottomCenter,"rpv-core__arrow--br":U===c.Position.BottomRight,"rpv-core__arrow--lt":U===c.Position.LeftTop,"rpv-core__arrow--lc":U===c.Position.LeftCenter,"rpv-core__arrow--lb":U===c.Position.LeftBottom},f["".concat(D)]=D!=="",f))})},ut=function(i){var f=i.ariaControlsSuffix,D=i.children,U=i.closeOnClickOutside,V=i.offset,Y=i.position,ft=i.targetRef,it=i.onClose,z=t.useRef(),lt=t.useRef(),rt=t.useRef(),Ot=t.useContext(j).direction===c.TextDirection.RightToLeft;a(U,z,it),I(z,ft,rt,Y,V),b((function(){var It=lt.current;if(It){var $t=.75*document.body.clientHeight;It.getBoundingClientRect().height>=$t&&(It.style.overflow="auto",It.style.maxHeight="".concat($t,"px"))}}),[]);var Dt="rpv-core__popover-body-inner-".concat(f);return t.createElement(t.Fragment,null,t.createElement("div",{ref:rt,style:{left:0,position:"absolute",top:0}}),t.createElement("div",{"aria-describedby":Dt,className:y({"rpv-core__popover-body":!0,"rpv-core__popover-body--rtl":Ot}),id:"rpv-core__popover-body-".concat(f),ref:z,role:"dialog",tabIndex:-1},t.createElement(tt,{customClassName:"rpv-core__popover-body-arrow",position:Y}),t.createElement("div",{id:Dt,ref:lt},D)))},wt=function(i){var f=i.closeOnEscape,D=i.onClose,U=t.useRef();return m((function(){U.current&&f&&D()})),t.createElement("div",{className:"rpv-core__popover-overlay",ref:U})},Ft=function(i){var f=i.ariaControlsSuffix,D=i.children,U=i.contentRef,V=i.offset,Y=i.position,ft=i.targetRef,it=t.useRef(),z=t.useContext(j).direction===c.TextDirection.RightToLeft;return I(U,ft,it,Y,V),t.createElement(t.Fragment,null,t.createElement("div",{ref:it,style:{left:0,position:"absolute",top:0}}),t.createElement("div",{className:y({"rpv-core__tooltip-body":!0,"rpv-core__tooltip-body--rtl":z}),id:"rpv-core__tooltip-body-".concat(f),ref:U,role:"tooltip"},t.createElement(tt,{customClassName:"rpv-core__tooltip-body-arrow",position:Y}),t.createElement("div",{className:"rpv-core__tooltip-body-content"},D)))};c.FullScreenMode=void 0,(At=c.FullScreenMode||(c.FullScreenMode={})).Normal="Normal",At.Entering="Entering",At.Entered="Entered",At.EnteredCompletely="EnteredCompletely",At.Exitting="Exitting",At.Exited="Exited",c.LayerRenderStatus=void 0,(Et=c.LayerRenderStatus||(c.LayerRenderStatus={}))[Et.PreRender=0]="PreRender",Et[Et.DidRender=1]="DidRender",c.PageMode=void 0,(Pt=c.PageMode||(c.PageMode={})).Attachments="UseAttachments",Pt.Bookmarks="UseOutlines",Pt.ContentGroup="UseOC",Pt.Default="UserNone",Pt.FullScreen="FullScreen",Pt.Thumbnails="UseThumbs",c.PasswordStatus=void 0,(Rt=c.PasswordStatus||(c.PasswordStatus={})).RequiredPassword="RequiredPassword",Rt.WrongPassword="WrongPassword",c.RotateDirection=void 0,(Lt=c.RotateDirection||(c.RotateDirection={})).Backward="Backward",Lt.Forward="Forward",c.ScrollMode=void 0,(ht=c.ScrollMode||(c.ScrollMode={})).Page="Page",ht.Horizontal="Horizontal",ht.Vertical="Vertical",ht.Wrapped="Wrapped",c.SpecialZoomLevel=void 0,(dt=c.SpecialZoomLevel||(c.SpecialZoomLevel={})).ActualSize="ActualSize",dt.PageFit="PageFit",dt.PageWidth="PageWidth",c.ViewMode=void 0,(_=c.ViewMode||(c.ViewMode={})).DualPage="DualPage",_.DualPageWithCover="DualPageWithCover",_.SinglePage="SinglePage";var Tt,et=function(i,f){return i.reduce((function(D,U,V){return V%f?D[D.length-1].push(U):D.push([U]),D}),[])},jt=function(i,f){switch(f[1].name){case"XYZ":return{bottomOffset:function(D,U){return f[3]===null?U:f[3]},leftOffset:function(D,U){return f[2]===null?0:f[2]},pageIndex:i,scaleTo:f[4]};case"Fit":case"FitB":return{bottomOffset:0,leftOffset:0,pageIndex:i,scaleTo:c.SpecialZoomLevel.PageFit};case"FitH":case"FitBH":return{bottomOffset:f[2],leftOffset:0,pageIndex:i,scaleTo:c.SpecialZoomLevel.PageWidth};default:return{bottomOffset:0,leftOffset:0,pageIndex:i,scaleTo:1}}},Bt=new Map,he=new Map,oe=function(i,f){return"".concat(i.loadingTask.docId,"___").concat(f.num,"R").concat(f.gen===0?"":f.gen)},xe=function(i,f,D){Bt.set(oe(i,f),D)},Xt=function(i,f){if(!i)return Promise.reject("The document is not loaded yet");var D="".concat(i.loadingTask.docId,"___").concat(f),U=he.get(D);return U?Promise.resolve(U):new Promise((function(V,Y){i.getPage(f+1).then((function(ft){he.set(D,ft),ft.ref&&xe(i,ft.ref,f),V(ft)}))}))},le=function(i,f){return new Promise((function(D){new Promise((function(U){typeof f=="string"?i.getDestination(f).then((function(V){U(V)})):U(f)})).then((function(U){if(typeof U[0]=="object"&&U[0]!==null){var V=U[0],Y=(function(it,z){var lt=oe(it,z);return Bt.has(lt)?Bt.get(lt):null})(i,V);Y===null?i.getPageIndex(V).then((function(it){xe(i,V,it),le(i,f).then((function(z){return D(z)}))})):D(jt(Y,U))}else{var ft=jt(U[0],U);D(ft)}}))}))};(function(i){i[i.Solid=1]="Solid",i[i.Dashed=2]="Dashed",i[i.Beveled=3]="Beveled",i[i.Inset=4]="Inset",i[i.Underline=5]="Underline"})(Tt||(Tt={}));var _e,Le=new RegExp("^D:(\\d{4})(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?([Z|+|-])?(\\d{2})?'?(\\d{2})?'?"),Mt=function(i,f,D,U){var V=parseInt(i,10);return V>=f&&V<=D?V:U},ot=function(i){return i.contentsObj?i.contentsObj.str:i.contents||""},st=function(i){return i.titleObj?i.titleObj.str:i.title||""},Yt=function(i){var f=i.annotation,D=t.useContext(j).direction,U=st(f),V=ot(f),Y=D===c.TextDirection.RightToLeft,ft=t.useRef(),it="";if(f.modificationDate){var z=(function(lt){var rt=Le.exec(lt);if(!rt)return null;var Ot=parseInt(rt[1],10),Dt=Mt(rt[2],1,12,1)-1,It=Mt(rt[3],1,31,1),$t=Mt(rt[4],0,23,0),zt=Mt(rt[5],0,59,0),Ut=Mt(rt[6],0,59,0),Pe=rt[7]||"Z",fe=Mt(rt[8],0,23,0),pe=Mt(rt[9],0,59,0);switch(Pe){case"-":$t+=fe,zt+=pe;break;case"+":$t-=fe,zt-=pe}return new Date(Date.UTC(Ot,Dt,It,$t,zt,Ut))})(f.modificationDate);it=z?"".concat(z.toLocaleDateString(),", ").concat(z.toLocaleTimeString()):""}return t.useLayoutEffect((function(){if(ft.current){var lt=document.querySelector('[data-annotation-id="'.concat(f.id,'"]'));if(lt){var rt=lt;return rt.style.zIndex+=1,function(){rt.style.zIndex="".concat(parseInt(rt.style.zIndex,10)-1)}}}}),[]),t.createElement("div",{ref:ft,className:y({"rpv-core__annotation-popup-wrapper":!0,"rpv-core__annotation-popup-wrapper--rtl":Y}),style:{top:f.annotationType===c.AnnotationType.Popup?"":"100%"}},U&&t.createElement(t.Fragment,null,t.createElement("div",{className:y({"rpv-core__annotation-popup-title":!0,"rpv-core__annotation-popup-title--ltr":!Y,"rpv-core__annotation-popup-title--rtl":Y})},U),t.createElement("div",{className:"rpv-core__annotation-popup-date"},it)),V&&t.createElement("div",{className:"rpv-core__annotation-popup-content"},V.split(`
`).map((function(lt,rt){return t.createElement(t.Fragment,{key:rt},lt,t.createElement("br",null))}))))};(function(i){i.Click="Click",i.Hover="Hover"})(_e||(_e={}));var Jt,ne=function(i){var f,D=i.annotation,U=i.children,V=i.ignoreBorder,Y=i.hasPopup,ft=i.isRenderable,it=i.page,z=i.viewport,lt=D.rect,rt=(function(){var me=q(!1),Ie=me.opened,Fe=me.toggle,De=t.useState(_e.Hover),Ne=De[0],je=De[1];return{opened:Ie,closeOnHover:function(){Ne===_e.Hover&&Fe(c.ToggleStatus.Close)},openOnHover:function(){Ne===_e.Hover&&Fe(c.ToggleStatus.Open)},toggleOnClick:function(){switch(Ne){case _e.Click:Ie&&je(_e.Hover),Fe(c.ToggleStatus.Toggle);break;case _e.Hover:je(_e.Click),Fe(c.ToggleStatus.Open)}}}})(),Ot=rt.closeOnHover,Dt=rt.opened,It=rt.openOnHover,$t=rt.toggleOnClick,zt=(f=[lt[0],it.view[3]+it.view[1]-lt[1],lt[2],it.view[3]+it.view[1]-lt[3]],[Math.min(f[0],f[2]),Math.min(f[1],f[3]),Math.max(f[0],f[2]),Math.max(f[1],f[3])]),Ut=lt[2]-lt[0],Pe=lt[3]-lt[1],fe={borderColor:"",borderRadius:"",borderStyle:"",borderWidth:""};if(!V&&D.borderStyle.width>0){switch(D.borderStyle.style){case Tt.Dashed:fe.borderStyle="dashed";break;case Tt.Solid:fe.borderStyle="solid";break;case Tt.Underline:fe=Object.assign({borderBottomStyle:"solid"},fe);case Tt.Beveled:case Tt.Inset:}var pe=D.borderStyle.width;fe.borderWidth="".concat(pe,"px"),D.borderStyle.style!==Tt.Underline&&(Ut-=2*pe,Pe-=2*pe);var be=D.borderStyle,ie=be.horizontalCornerRadius,ye=be.verticalCornerRadius;(ie>0||ye>0)&&(fe.borderRadius="".concat(ie,"px / ").concat(ye,"px")),D.color?fe.borderColor="rgb(".concat(0|D.color[0],", ").concat(0|D.color[1],", ").concat(0|D.color[2],")"):fe.borderWidth="0"}return t.createElement(t.Fragment,null,ft&&U({popup:{opened:Dt,closeOnHover:Ot,openOnHover:It,toggleOnClick:$t},slot:{attrs:{style:Object.assign({height:"".concat(Pe,"px"),left:"".concat(zt[0],"px"),top:"".concat(zt[1],"px"),transform:"matrix(".concat(z.transform.join(","),")"),transformOrigin:"-".concat(zt[0],"px -").concat(zt[1],"px"),width:"".concat(Ut,"px")},fe)},children:t.createElement(t.Fragment,null,Y&&Dt&&t.createElement(Yt,{annotation:D}))}}))},B=function(i){var f=i.annotation,D=i.page,U=i.viewport,V=f.hasPopup===!1,Y=st(f),ft=ot(f),it=!!(f.hasPopup||Y||ft);return t.createElement(ne,{annotation:f,hasPopup:V,ignoreBorder:!0,isRenderable:it,page:D,viewport:U},(function(z){return t.createElement("div",d({},z.slot.attrs,{className:"rpv-core__annotation rpv-core__annotation--caret","data-annotation-id":f.id,onClick:z.popup.toggleOnClick,onMouseEnter:z.popup.openOnHover,onMouseLeave:z.popup.closeOnHover}),z.slot.children)}))},xt=function(i){var f=i.annotation,D=i.page,U=i.viewport,V=f.hasPopup===!1,Y=st(f),ft=ot(f),it=!!(f.hasPopup||Y||ft),z=f.rect,lt=z[2]-z[0],rt=z[3]-z[1],Ot=f.borderStyle.width;return t.createElement(ne,{annotation:f,hasPopup:V,ignoreBorder:!0,isRenderable:it,page:D,viewport:U},(function(Dt){return t.createElement("div",d({},Dt.slot.attrs,{className:"rpv-core__annotation rpv-core__annotation--circle","data-annotation-id":f.id,onClick:Dt.popup.toggleOnClick,onMouseEnter:Dt.popup.openOnHover,onMouseLeave:Dt.popup.closeOnHover}),t.createElement("svg",{height:"".concat(rt,"px"),preserveAspectRatio:"none",version:"1.1",viewBox:"0 0 ".concat(lt," ").concat(rt),width:"".concat(lt,"px")},t.createElement("circle",{cy:rt/2,fill:"none",rx:lt/2-Ot/2,ry:rt/2-Ot/2,stroke:"transparent",strokeWidth:Ot||1})),Dt.slot.children)}))},Wt=function(i){var f=i.annotation,D=i.page,U=i.viewport,V=st(f),Y=ot(f),ft=!(f.hasPopup!==!1||!V&&!Y),it=function(){var z,lt,rt,Ot,Dt=f.file;Dt&&(z=Dt.filename,lt=Dt.content,rt=typeof lt=="string"?"":URL.createObjectURL(new Blob([lt],{type:""})),(Ot=document.createElement("a")).style.display="none",Ot.href=rt||z,Ot.setAttribute("download",(function(It){var $t=It.split("/").pop();return $t?$t.split("#")[0].split("?")[0]:It})(z)),document.body.appendChild(Ot),Ot.click(),document.body.removeChild(Ot),rt&&URL.revokeObjectURL(rt))};return t.createElement(ne,{annotation:f,hasPopup:ft,ignoreBorder:!0,isRenderable:!0,page:D,viewport:U},(function(z){return t.createElement("div",d({},z.slot.attrs,{className:"rpv-core__annotation rpv-core__annotation--file-attachment","data-annotation-id":f.id,onClick:z.popup.toggleOnClick,onDoubleClick:it,onMouseEnter:z.popup.openOnHover,onMouseLeave:z.popup.closeOnHover}),z.slot.children)}))},Qt=function(i){var f=i.annotation,D=i.page,U=i.viewport,V=f.hasPopup===!1,Y=st(f),ft=ot(f),it=!!(f.hasPopup||Y||ft);return t.createElement(ne,{annotation:f,hasPopup:V,ignoreBorder:!0,isRenderable:it,page:D,viewport:U},(function(z){return t.createElement("div",d({},z.slot.attrs,{className:"rpv-core__annotation rpv-core__annotation--free-text","data-annotation-id":f.id,onClick:z.popup.toggleOnClick,onMouseEnter:z.popup.openOnHover,onMouseLeave:z.popup.closeOnHover}),z.slot.children)}))},ee=function(i){var f=i.annotation,D=i.page,U=i.viewport,V=st(f),Y=ot(f),ft=!(!V&&!Y),it=!f.parentType||["Circle","Ink","Line","Polygon","PolyLine","Square"].indexOf(f.parentType)!==-1;return b((function(){if(f.parentId){var z=document.querySelector('[data-annotation-id="'.concat(f.parentId,'"]')),lt=document.querySelector('[data-annotation-id="'.concat(f.id,'"]'));if(z&&lt){var rt=parseFloat(z.style.left),Ot=parseFloat(z.style.top)+parseFloat(z.style.height);lt.style.left="".concat(rt,"px"),lt.style.top="".concat(Ot,"px"),lt.style.transformOrigin="-".concat(rt,"px -").concat(Ot,"px")}}}),[]),t.createElement(ne,{annotation:f,hasPopup:it,ignoreBorder:!1,isRenderable:ft,page:D,viewport:U},(function(z){return t.createElement("div",d({},z.slot.attrs,{className:"rpv-core__annotation rpv-core__annotation--popup","data-annotation-id":f.id}),t.createElement(Yt,{annotation:f}))}))},Gt=function(i){var f=i.annotation,D=i.childAnnotation,U=i.page,V=i.viewport,Y=f.hasPopup===!1,ft=st(f),it=ot(f),z=!!(f.hasPopup||ft||it);if(f.quadPoints&&f.quadPoints.length>0){var lt=f.quadPoints.map((function(rt){return Object.assign({},f,{rect:[rt[2].x,rt[2].y,rt[1].x,rt[1].y],quadPoints:[]})}));return t.createElement(t.Fragment,null,lt.map((function(rt,Ot){return t.createElement(Gt,{key:Ot,annotation:rt,childAnnotation:D,page:U,viewport:V})})))}return t.createElement(ne,{annotation:f,hasPopup:Y,ignoreBorder:!0,isRenderable:z,page:U,viewport:V},(function(rt){return t.createElement(t.Fragment,null,t.createElement("div",d({},rt.slot.attrs,{className:"rpv-core__annotation rpv-core__annotation--highlight","data-annotation-id":f.id,onClick:rt.popup.toggleOnClick,onMouseEnter:rt.popup.openOnHover,onMouseLeave:rt.popup.closeOnHover}),rt.slot.children),D&&D.annotationType===c.AnnotationType.Popup&&rt.popup.opened&&t.createElement(ee,{annotation:D,page:U,viewport:V}))}))},x=function(i){var f=i.annotation,D=i.page,U=i.viewport,V=f.hasPopup===!1,Y=st(f),ft=ot(f),it=!!(f.hasPopup||Y||ft),z=f.rect,lt=z[2]-z[0],rt=z[3]-z[1],Ot=f.borderStyle.width;return t.createElement(ne,{annotation:f,hasPopup:V,ignoreBorder:!0,isRenderable:it,page:D,viewport:U},(function(Dt){return t.createElement("div",d({},Dt.slot.attrs,{className:"rpv-core__annotation rpv-core__annotation--ink","data-annotation-id":f.id,onClick:Dt.popup.toggleOnClick,onMouseEnter:Dt.popup.openOnHover,onMouseLeave:Dt.popup.closeOnHover}),f.inkLists&&f.inkLists.length&&t.createElement("svg",{height:"".concat(rt,"px"),preserveAspectRatio:"none",version:"1.1",viewBox:"0 0 ".concat(lt," ").concat(rt),width:"".concat(lt,"px")},f.inkLists.map((function(It,$t){return t.createElement("polyline",{key:$t,fill:"none",stroke:"transparent",strokeWidth:Ot||1,points:It.map((function(zt){return"".concat(zt.x-z[0],",").concat(z[3]-zt.y)})).join(" ")})}))),Dt.slot.children)}))},C=function(i){var f=i.annotation,D=i.page,U=i.viewport,V=f.hasPopup===!1,Y=st(f),ft=ot(f),it=!!(f.hasPopup||Y||ft),z=f.rect,lt=z[2]-z[0],rt=z[3]-z[1],Ot=f.borderStyle.width;return t.createElement(ne,{annotation:f,hasPopup:V,ignoreBorder:!0,isRenderable:it,page:D,viewport:U},(function(Dt){return t.createElement("div",d({},Dt.slot.attrs,{className:"rpv-core__annotation rpv-core__annotation--line","data-annotation-id":f.id,onClick:Dt.popup.toggleOnClick,onMouseEnter:Dt.popup.openOnHover,onMouseLeave:Dt.popup.closeOnHover}),t.createElement("svg",{height:"".concat(rt,"px"),preserveAspectRatio:"none",version:"1.1",viewBox:"0 0 ".concat(lt," ").concat(rt),width:"".concat(lt,"px")},t.createElement("line",{stroke:"transparent",strokeWidth:Ot||1,x1:z[2]-f.lineCoordinates[0],x2:z[2]-f.lineCoordinates[2],y1:z[3]-f.lineCoordinates[1],y2:z[3]-f.lineCoordinates[3]})),Dt.slot.children)}))},X=/^([^\w]*)(javascript|data|vbscript)/im,yt=/&#(\w+)(^\w|;)?/g,St=/[\u0000-\u001F\u007F-\u009F\u2000-\u200D\uFEFF]/gim,kt=/^([^:]+):/gm,Nt=function(i,f){var D,U=(D=i||"",D.replace(yt,(function(it,z){return String.fromCharCode(z)}))).replace(St,"").trim();if(!U)return f;var V=U[0];if(V==="."||V==="/")return U;var Y=U.match(kt);if(!Y)return U;var ft=Y[0];return X.test(ft)?f:U},Vt=function(i){var f,D=i.annotation,U=i.annotationContainerRef,V=i.doc,Y=i.outlines,ft=i.page,it=i.pageIndex,z=i.scale,lt=i.viewport,rt=i.onExecuteNamedAction,Ot=i.onJumpFromLinkAnnotation,Dt=i.onJumpToDest,It=t.useRef(),$t=Y&&Y.length&&D.dest&&typeof D.dest=="string"?(f=Y.find((function(fe){return fe.dest===D.dest})))===null||f===void 0?void 0:f.title:"",zt=!!(D.url||D.dest||D.action||D.unsafeUrl),Ut={};if(D.url||D.unsafeUrl){var Pe=Nt(D.url||D.unsafeUrl,"");Pe?Ut={"data-target":"external",href:Pe,rel:"noopener noreferrer nofollow",target:D.newWindow?"_blank":"",title:Pe}:zt=!1}else Ut={href:"","data-annotation-link":D.id,onClick:function(fe){fe.preventDefault(),D.action?rt(D.action):le(V,D.dest).then((function(pe){var be=It.current,ie=U.current;if(be&&ie){var ye=be.getBoundingClientRect();ie.style.setProperty("height","100%"),ie.style.setProperty("width","100%");var me=ie.getBoundingClientRect();ie.style.removeProperty("height"),ie.style.removeProperty("width");var Ie=(ye.left-me.left)/z,Fe=(me.bottom-ye.bottom+ye.height)/z;Ot({bottomOffset:Fe,label:$t,leftOffset:Ie,pageIndex:it})}Dt(pe)}))}};return $t&&(Ut=Object.assign({},Ut,{title:$t,"aria-label":$t})),t.createElement(ne,{annotation:D,hasPopup:!1,ignoreBorder:!1,isRenderable:zt,page:ft,viewport:lt},(function(fe){return t.createElement("div",d({},fe.slot.attrs,{className:"rpv-core__annotation rpv-core__annotation--link","data-annotation-id":D.id,"data-testid":"core__annotation--link-".concat(D.id)}),t.createElement("a",d({ref:It},Ut)))}))},ae=function(i){var f=i.annotation,D=i.page,U=i.viewport,V=f.hasPopup===!1,Y=st(f),ft=ot(f),it=!!(f.hasPopup||Y||ft),z=f.rect,lt=z[2]-z[0],rt=z[3]-z[1],Ot=f.borderStyle.width;return t.createElement(ne,{annotation:f,hasPopup:V,ignoreBorder:!0,isRenderable:it,page:D,viewport:U},(function(Dt){return t.createElement("div",d({},Dt.slot.attrs,{className:"rpv-core__annotation rpv-core__annotation--polygon","data-annotation-id":f.id,onClick:Dt.popup.toggleOnClick,onMouseEnter:Dt.popup.openOnHover,onMouseLeave:Dt.popup.closeOnHover}),f.vertices&&f.vertices.length&&t.createElement("svg",{height:"".concat(rt,"px"),preserveAspectRatio:"none",version:"1.1",viewBox:"0 0 ".concat(lt," ").concat(rt),width:"".concat(lt,"px")},t.createElement("polygon",{fill:"none",stroke:"transparent",strokeWidth:Ot||1,points:f.vertices.map((function(It){return"".concat(It.x-z[0],",").concat(z[3]-It.y)})).join(" ")})),Dt.slot.children)}))},te=function(i){var f=i.annotation,D=i.page,U=i.viewport,V=f.hasPopup===!1,Y=st(f),ft=ot(f),it=!!(f.hasPopup||Y||ft),z=f.rect,lt=z[2]-z[0],rt=z[3]-z[1],Ot=f.borderStyle.width;return t.createElement(ne,{annotation:f,hasPopup:V,ignoreBorder:!0,isRenderable:it,page:D,viewport:U},(function(Dt){return t.createElement("div",d({},Dt.slot.attrs,{className:"rpv-core__annotation rpv-core__annotation--polyline","data-annotation-id":f.id,onClick:Dt.popup.toggleOnClick,onMouseEnter:Dt.popup.openOnHover,onMouseLeave:Dt.popup.closeOnHover}),f.vertices&&f.vertices.length&&t.createElement("svg",{height:"".concat(rt,"px"),preserveAspectRatio:"none",version:"1.1",viewBox:"0 0 ".concat(lt," ").concat(rt),width:"".concat(lt,"px")},t.createElement("polyline",{fill:"none",stroke:"transparent",strokeWidth:Ot||1,points:f.vertices.map((function(It){return"".concat(It.x-z[0],",").concat(z[3]-It.y)})).join(" ")})),Dt.slot.children)}))},qt=function(i){var f=i.annotation,D=i.page,U=i.viewport,V=f.hasPopup===!1,Y=st(f),ft=ot(f),it=!!(f.hasPopup||Y||ft),z=f.rect,lt=z[2]-z[0],rt=z[3]-z[1],Ot=f.borderStyle.width;return t.createElement(ne,{annotation:f,hasPopup:V,ignoreBorder:!0,isRenderable:it,page:D,viewport:U},(function(Dt){return t.createElement("div",d({},Dt.slot.attrs,{className:"rpv-core__annotation rpv-core__annotation--square","data-annotation-id":f.id,onClick:Dt.popup.toggleOnClick,onMouseEnter:Dt.popup.openOnHover,onMouseLeave:Dt.popup.closeOnHover}),t.createElement("svg",{height:"".concat(rt,"px"),preserveAspectRatio:"none",version:"1.1",viewBox:"0 0 ".concat(lt," ").concat(rt),width:"".concat(lt,"px")},t.createElement("rect",{height:rt-Ot,fill:"none",stroke:"transparent",strokeWidth:Ot||1,x:Ot/2,y:Ot/2,width:lt-Ot})),Dt.slot.children)}))},Kt=function(i){var f=i.annotation,D=i.page,U=i.viewport,V=f.hasPopup===!1,Y=st(f),ft=ot(f),it=!!(f.hasPopup||Y||ft);return t.createElement(ne,{annotation:f,hasPopup:V,ignoreBorder:!0,isRenderable:it,page:D,viewport:U},(function(z){return t.createElement("div",d({},z.slot.attrs,{className:"rpv-core__annotation rpv-core__annotation--squiggly","data-annotation-id":f.id,onClick:z.popup.toggleOnClick,onMouseEnter:z.popup.openOnHover,onMouseLeave:z.popup.closeOnHover}),z.slot.children)}))},ce=function(i){var f=i.annotation,D=i.page,U=i.viewport,V=f.hasPopup===!1,Y=st(f),ft=ot(f),it=!!(f.hasPopup||Y||ft);return t.createElement(ne,{annotation:f,hasPopup:V,ignoreBorder:!0,isRenderable:it,page:D,viewport:U},(function(z){return t.createElement("div",d({},z.slot.attrs,{className:"rpv-core__annotation rpv-core__annotation--stamp","data-annotation-id":f.id,onClick:z.popup.toggleOnClick,onMouseEnter:z.popup.openOnHover,onMouseLeave:z.popup.closeOnHover}),z.slot.children)}))},Se=function(i){var f=i.annotation,D=i.page,U=i.viewport,V=f.hasPopup===!1,Y=st(f),ft=ot(f),it=!!(f.hasPopup||Y||ft);return t.createElement(ne,{annotation:f,hasPopup:V,ignoreBorder:!0,isRenderable:it,page:D,viewport:U},(function(z){return t.createElement("div",d({},z.slot.attrs,{className:"rpv-core__annotation rpv-core__annotation--strike-out","data-annotation-id":f.id,onClick:z.popup.toggleOnClick,onMouseEnter:z.popup.openOnHover,onMouseLeave:z.popup.closeOnHover}),z.slot.children)}))},Ue=function(){return t.createElement(v,{size:16},t.createElement("path",{d:"M.5,16.5a1,1,0,0,0,1,1h2v4l4-4h15a1,1,0,0,0,1-1V3.5a1,1,0,0,0-1-1H1.5a1,1,0,0,0-1,1Z"}),t.createElement("path",{d:"M7.25,9.75A.25.25,0,1,1,7,10a.25.25,0,0,1,.25-.25"}),t.createElement("path",{d:"M12,9.75a.25.25,0,1,1-.25.25A.25.25,0,0,1,12,9.75"}),t.createElement("path",{d:"M16.75,9.75a.25.25,0,1,1-.25.25.25.25,0,0,1,.25-.25"}))},Oe=function(){return t.createElement(v,{size:16},t.createElement("path",{d:"M0.500 12.001 A11.500 11.500 0 1 0 23.500 12.001 A11.500 11.500 0 1 0 0.500 12.001 Z"}),t.createElement("path",{d:"M6.000 12.001 A6.000 6.000 0 1 0 18.000 12.001 A6.000 6.000 0 1 0 6.000 12.001 Z"}),t.createElement("path",{d:"M21.423 5.406L17.415 9.414"}),t.createElement("path",{d:"M14.587 6.585L18.607 2.565"}),t.createElement("path",{d:"M5.405 21.424L9.413 17.416"}),t.createElement("path",{d:"M6.585 14.588L2.577 18.596"}),t.createElement("path",{d:"M18.602 21.419L14.595 17.412"}),t.createElement("path",{d:"M17.419 14.58L21.428 18.589"}),t.createElement("path",{d:"M2.582 5.399L6.588 9.406"}),t.createElement("path",{d:"M9.421 6.581L5.412 2.572"}))},Ke=function(){return t.createElement(v,{size:16},t.createElement("path",{d:"M4.000 18.500 A1.500 1.500 0 1 0 7.000 18.500 A1.500 1.500 0 1 0 4.000 18.500 Z"}),t.createElement("path",{d:"M20.5.5l-9.782,9.783a7,7,0,1,0,3,3L17,10h1.5V8.5L19,8h1.5V6.5L21,6h1.5V4.5l1-1V.5Z"}))},pn=function(){return t.createElement(v,{size:16},t.createElement("path",{d:"M2.000 2.500 L22.000 2.500 L22.000 23.500 L2.000 23.500 Z"}),t.createElement("path",{d:"M6 4.5L6 0.5"}),t.createElement("path",{d:"M18 4.5L18 0.5"}),t.createElement("path",{d:"M10 4.5L10 0.5"}),t.createElement("path",{d:"M14 4.5L14 0.5"}))},Je=function(){return t.createElement(v,{size:16},t.createElement("path",{d:"M17.5 0.498L17.5 23.498"}),t.createElement("path",{d:"M10.5 0.498L10.5 23.498"}),t.createElement("path",{d:"M23.5.5H6.5a6,6,0,0,0,0,12h4"}))},Cn=function(){return t.createElement(v,{size:16},t.createElement("path",{d:"M2.5 22.995L12 6.005 21.5 22.995 2.5 22.995z"}))},kn=function(i){var f=i.annotation,D=i.childAnnotation,U=i.page,V=i.viewport,Y=f.hasPopup===!1,ft=st(f),it=ot(f),z=!!(f.hasPopup||ft||it),lt=f.name?f.name.toLowerCase():"";return t.createElement(ne,{annotation:f,hasPopup:Y,ignoreBorder:!1,isRenderable:z,page:U,viewport:V},(function(rt){return t.createElement(t.Fragment,null,t.createElement("div",d({},rt.slot.attrs,{className:"rpv-core__annotation rpv-core__annotation--text","data-annotation-id":f.id,onClick:rt.popup.toggleOnClick,onMouseEnter:rt.popup.openOnHover,onMouseLeave:rt.popup.closeOnHover}),lt&&t.createElement("div",{className:"rpv-core__annotation-text-icon"},lt==="check"&&t.createElement(g,null),lt==="comment"&&t.createElement(Ue,null),lt==="help"&&t.createElement(Oe,null),lt==="insert"&&t.createElement(Cn,null),lt==="key"&&t.createElement(Ke,null),lt==="note"&&t.createElement(pn,null),(lt==="newparagraph"||lt==="paragraph")&&t.createElement(Je,null)),rt.slot.children),D&&D.annotationType===c.AnnotationType.Popup&&rt.popup.opened&&t.createElement(ee,{annotation:D,page:U,viewport:V}))}))},Xn=function(i){var f=i.annotation,D=i.page,U=i.viewport,V=f.hasPopup===!1,Y=st(f),ft=ot(f),it=!!(f.hasPopup||Y||ft);return t.createElement(ne,{annotation:f,hasPopup:V,ignoreBorder:!0,isRenderable:it,page:D,viewport:U},(function(z){return t.createElement("div",d({},z.slot.attrs,{className:"rpv-core__annotation rpv-core__annotation--underline","data-annotation-id":f.id,onClick:z.popup.toggleOnClick,onMouseEnter:z.popup.openOnHover,onMouseLeave:z.popup.closeOnHover}),z.slot.children)}))},Yn=function(i){var f=i.annotations,D=i.doc,U=i.outlines,V=i.page,Y=i.pageIndex,ft=i.plugins,it=i.rotation,z=i.scale,lt=i.onExecuteNamedAction,rt=i.onJumpFromLinkAnnotation,Ot=i.onJumpToDest,Dt=t.useRef(),It=V.getViewport({rotation:it,scale:z}).clone({dontFlip:!0}),$t=f.filter((function(zt){return!zt.parentId}));return b((function(){var zt=Dt.current;zt&&ft.forEach((function(Ut){Ut.onAnnotationLayerRender&&Ut.onAnnotationLayerRender({annotations:$t,container:zt,pageIndex:Y,rotation:it,scale:z})}))}),[]),t.createElement("div",{ref:Dt,className:"rpv-core__annotation-layer","data-testid":"core__annotation-layer-".concat(Y)},$t.map((function(zt){var Ut=f.find((function(Pe){return Pe.parentId===zt.id}));switch(zt.annotationType){case c.AnnotationType.Caret:return t.createElement(B,{key:zt.id,annotation:zt,page:V,viewport:It});case c.AnnotationType.Circle:return t.createElement(xt,{key:zt.id,annotation:zt,page:V,viewport:It});case c.AnnotationType.FileAttachment:return t.createElement(Wt,{key:zt.id,annotation:zt,page:V,viewport:It});case c.AnnotationType.FreeText:return t.createElement(Qt,{key:zt.id,annotation:zt,page:V,viewport:It});case c.AnnotationType.Highlight:return t.createElement(Gt,{key:zt.id,annotation:zt,childAnnotation:Ut,page:V,viewport:It});case c.AnnotationType.Ink:return t.createElement(x,{key:zt.id,annotation:zt,page:V,viewport:It});case c.AnnotationType.Line:return t.createElement(C,{key:zt.id,annotation:zt,page:V,viewport:It});case c.AnnotationType.Link:return t.createElement(Vt,{key:zt.id,annotation:zt,annotationContainerRef:Dt,doc:D,outlines:U,page:V,pageIndex:Y,scale:z,viewport:It,onExecuteNamedAction:lt,onJumpFromLinkAnnotation:rt,onJumpToDest:Ot});case c.AnnotationType.Polygon:return t.createElement(ae,{key:zt.id,annotation:zt,page:V,viewport:It});case c.AnnotationType.Polyline:return t.createElement(te,{key:zt.id,annotation:zt,page:V,viewport:It});case c.AnnotationType.Popup:return t.createElement(ee,{key:zt.id,annotation:zt,page:V,viewport:It});case c.AnnotationType.Square:return t.createElement(qt,{key:zt.id,annotation:zt,page:V,viewport:It});case c.AnnotationType.Squiggly:return t.createElement(Kt,{key:zt.id,annotation:zt,page:V,viewport:It});case c.AnnotationType.Stamp:return t.createElement(ce,{key:zt.id,annotation:zt,page:V,viewport:It});case c.AnnotationType.StrikeOut:return t.createElement(Se,{key:zt.id,annotation:zt,page:V,viewport:It});case c.AnnotationType.Text:return t.createElement(kn,{key:zt.id,annotation:zt,childAnnotation:Ut,page:V,viewport:It});case c.AnnotationType.Underline:return t.createElement(Xn,{key:zt.id,annotation:zt,page:V,viewport:It});default:return t.createElement(t.Fragment,{key:zt.id})}})))},ls=function(i){var f=i.page,D=i.renderAnnotations,U=nt(),V=t.useState({loading:!0,annotations:[]}),Y=V[0],ft=V[1];return t.useEffect((function(){f.getAnnotations({intent:"display"}).then((function(it){U.current&&ft({loading:!1,annotations:it})}))}),[]),Y.loading?t.createElement(t.Fragment,null):D(Y.annotations)},hs=function(i){var f=i.doc,D=i.outlines,U=i.page,V=i.pageIndex,Y=i.plugins,ft=i.rotation,it=i.scale,z=i.onExecuteNamedAction,lt=i.onJumpFromLinkAnnotation,rt=i.onJumpToDest;return t.createElement(ls,{page:U,renderAnnotations:function(Ot){return t.createElement(Yn,{annotations:Ot,doc:f,outlines:D,page:U,pageIndex:V,plugins:Y,rotation:ft,scale:it,onExecuteNamedAction:z,onJumpFromLinkAnnotation:lt,onJumpToDest:rt})}})},Kn=function(i,f){var D=i%f;return D===0?i:Math.floor(i-D)},ds=function(i){var f=i.canvasLayerRef,D=i.height,U=i.page,V=i.pageIndex,Y=i.plugins,ft=i.rotation,it=i.scale,z=i.width,lt=i.onRenderCanvasCompleted,rt=t.useRef();return b((function(){var Ot=rt.current;Ot&&Ot.cancel();var Dt=f.current;Dt.removeAttribute("data-testid"),Y.forEach((function(me){me.onCanvasLayerRender&&me.onCanvasLayerRender({ele:Dt,pageIndex:V,rotation:ft,scale:it,status:c.LayerRenderStatus.PreRender})}));var It=U.getViewport({rotation:ft,scale:it}),$t=window.devicePixelRatio||1,zt=Math.sqrt(16777216/(It.width*It.height)),Ut=$t>zt;Ut?Dt.style.transform="scale(1, 1)":Dt.style.removeProperty("transform");var Pe=Math.min(zt,$t),fe=(function(me,Ie){var Fe,De;if(Math.floor(me)===me)return[me,1];var Ne=1/me;if(Ne>Ie)return[1,Ie];if(Math.floor(Ne)===Ne)return[1,Ne];for(var je=me>1?Ne:me,nn=0,Xe=1,rn=1,Ze=1;;){var tn=nn+rn,en=Xe+Ze;if(en>Ie)break;je<=tn/en?(rn=(Fe=[tn,en])[0],Ze=Fe[1]):(nn=(De=[tn,en])[0],Xe=De[1])}return je<(nn/Xe+rn/Ze)/2?je===me?[nn,Xe]:[Xe,nn]:je===me?[rn,Ze]:[Ze,rn]})(Pe,8),pe=fe[0],be=fe[1];Dt.width=Kn(It.width*Pe,pe),Dt.height=Kn(It.height*Pe,pe),Dt.style.width="".concat(Kn(It.width,be),"px"),Dt.style.height="".concat(Kn(It.height,be),"px"),Dt.hidden=!0;var ie=Dt.getContext("2d",{alpha:!1}),ye=Ut||$t!==1?[Pe,0,0,Pe,0,0]:null;return rt.current=U.render({canvasContext:ie,transform:ye,viewport:It}),rt.current.promise.then((function(){Dt.hidden=!1,Dt.setAttribute("data-testid","core__canvas-layer-".concat(V)),Y.forEach((function(me){me.onCanvasLayerRender&&me.onCanvasLayerRender({ele:Dt,pageIndex:V,rotation:ft,scale:it,status:c.LayerRenderStatus.DidRender})})),lt()}),(function(){lt()})),function(){Dt&&(Dt.width=0,Dt.height=0)}}),[]),t.createElement("div",{className:"rpv-core__canvas-layer",style:{height:"".concat(D,"px"),width:"".concat(z,"px")}},t.createElement("canvas",{ref:f}))},us=function(i){var f=i.height,D=i.page,U=i.rotation,V=i.scale,Y=i.width,ft=t.useRef();return b((function(){var it=ft.current,z=D.getViewport({rotation:U,scale:V});D.getOperatorList().then((function(lt){(function(){var rt=ft.current;rt&&(rt.innerHTML="")})(),new Z.SVGGraphics(D.commonObjs,D.objs).getSVG(lt,z).then((function(rt){rt.style.height="".concat(f,"px"),rt.style.width="".concat(Y,"px"),it.appendChild(rt)}))}))}),[]),t.createElement("div",{className:"rpv-core__svg-layer",ref:ft})},fs=function(i){var f=i.containerRef,D=i.page,U=i.pageIndex,V=i.plugins,Y=i.rotation,ft=i.scale,it=i.onRenderTextCompleted,z=t.useRef(),lt=function(){var rt=f.current;rt&&([].slice.call(rt.querySelectorAll(".rpv-core__text-layer-text")).forEach((function(Ot){return rt.removeChild(Ot)})),[].slice.call(rt.querySelectorAll('br[role="presentation"]')).forEach((function(Ot){return rt.removeChild(Ot)})))};return b((function(){var rt=z.current;rt&&rt.cancel();var Ot=f.current;if(Ot){Ot.removeAttribute("data-testid");var Dt=D.getViewport({rotation:Y,scale:ft});return V.forEach((function(It){It.onTextLayerRender&&It.onTextLayerRender({ele:Ot,pageIndex:U,scale:ft,status:c.LayerRenderStatus.PreRender})})),D.getTextContent().then((function(It){lt(),z.current=Z.renderTextLayer({container:Ot,textContent:It,textContentSource:It,viewport:Dt}),z.current.promise.then((function(){Ot.setAttribute("data-testid","core__text-layer-".concat(U)),[].slice.call(Ot.children).forEach((function($t){$t.classList.contains("rpv-core__text-layer-text--not")||$t.classList.add("rpv-core__text-layer-text")})),V.forEach((function($t){$t.onTextLayerRender&&$t.onTextLayerRender({ele:Ot,pageIndex:U,scale:ft,status:c.LayerRenderStatus.DidRender})})),it()}),(function(){Ot.removeAttribute("data-testid"),it()}))})),function(){var It;lt(),(It=z.current)===null||It===void 0||It.cancel()}}}),[]),t.createElement("div",{className:"rpv-core__text-layer",ref:f})},ps=function(i){var f=i.doc,D=i.measureRef,U=i.outlines,V=i.pageIndex,Y=i.pageRotation,ft=i.pageSize,it=i.plugins,z=i.renderPage,lt=i.renderQueueKey,rt=i.rotation,Ot=i.scale,Dt=i.shouldRender,It=i.viewMode,$t=i.onExecuteNamedAction,zt=i.onJumpFromLinkAnnotation,Ut=i.onJumpToDest,Pe=i.onRenderCompleted,fe=i.onRotatePage,pe=nt(),be=t.useState(null),ie=be[0],ye=be[1],me=t.useState(!1),Ie=me[0],Fe=me[1],De=t.useState(!1),Ne=De[0],je=De[1],nn=t.useRef(),Xe=t.useRef(),rn=Math.abs(rt+Y)%180==0,Ze=ft.pageWidth*Ot,tn=ft.pageHeight*Ot,en=rn?Ze:tn,Qe=rn?tn:Ze,hn=(ft.rotation+rt+Y)%360,vn=t.useRef(0),mn=z||function(on){return t.createElement(t.Fragment,null,on.canvasLayer.children,on.textLayer.children,on.annotationLayer.children)};return t.useEffect((function(){ye(null),Fe(!1),je(!1)}),[Y,rt,Ot]),t.useEffect((function(){Dt&&pe.current&&!ie&&Xt(f,V).then((function(on){pe.current&&(vn.current=lt,ye(on))}))}),[Dt,ie]),t.useEffect((function(){Ie&&Ne&&(lt!==vn.current?(ye(null),Fe(!1),je(!1)):Pe(V))}),[Ie,Ne]),t.createElement("div",{className:y({"rpv-core__page-layer":!0,"rpv-core__page-layer--dual":It===c.ViewMode.DualPage,"rpv-core__page-layer--dual-cover":It===c.ViewMode.DualPageWithCover,"rpv-core__page-layer--single":It===c.ViewMode.SinglePage}),"data-testid":"core__page-layer-".concat(V),ref:D,style:{height:"".concat(Qe,"px"),width:"".concat(en,"px")}},ie?t.createElement(t.Fragment,null,mn({annotationLayer:{attrs:{},children:t.createElement(hs,{doc:f,outlines:U,page:ie,pageIndex:V,plugins:it,rotation:hn,scale:Ot,onExecuteNamedAction:$t,onJumpFromLinkAnnotation:zt,onJumpToDest:Ut})},canvasLayer:{attrs:{},children:t.createElement(ds,{canvasLayerRef:nn,height:Qe,page:ie,pageIndex:V,plugins:it,rotation:hn,scale:Ot,width:en,onRenderCanvasCompleted:function(){pe.current&&Fe(!0)}})},canvasLayerRendered:Ie,doc:f,height:Qe,pageIndex:V,rotation:hn,scale:Ot,svgLayer:{attrs:{},children:t.createElement(us,{height:Qe,page:ie,rotation:hn,scale:Ot,width:en})},textLayer:{attrs:{},children:t.createElement(fs,{containerRef:Xe,page:ie,pageIndex:V,plugins:it,rotation:hn,scale:Ot,onRenderTextCompleted:function(){pe.current&&je(!0)}})},textLayerRendered:Ne,width:en,markRendered:Pe,onRotatePage:function(on){return fe(V,on)}}),it.map((function(on,dn){return on.renderPageLayer?t.createElement(t.Fragment,{key:dn},on.renderPageLayer({canvasLayerRef:nn,canvasLayerRendered:Ie,doc:f,height:Qe,pageIndex:V,rotation:hn,scale:Ot,textLayerRef:Xe,textLayerRendered:Ne,width:en})):t.createElement(t.Fragment,{key:dn})}))):t.createElement(O,{testId:"core__page-layer-loading-".concat(V)}))},gs=function(i,f){var D=f.rect;return i.height!==D.height||i.width!==D.width?D:i};(function(i){i.Horizontal="Horizontal",i.Vertical="Vertical",i.Both="Both"})(Jt||(Jt={}));var ms=function(i){return 1-Math.pow(1-i,4)},Jn=1e-4,hr={left:0,top:0},dr={capture:!1,passive:!0},vs=function(i){var f=i.elementRef,D=i.enableSmoothScroll,U=i.isRtl,V=i.scrollDirection,Y=i.onSmoothScroll,ft=t.useState(hr),it=ft[0],z=ft[1],lt=t.useState(f.current),rt=lt[0],Ot=lt[1],Dt=U?-1:1,It=t.useRef(V);It.current=V;var $t=t.useRef(hr),zt=t.useRef(!0),Ut=t.useCallback((function(){zt.current=!0,D&&z($t.current),Y(!1)}),[]),Pe=t.useCallback((function(){if(rt){switch(It.current){case Jt.Horizontal:$t.current={left:Dt*rt.scrollLeft,top:0};break;case Jt.Both:$t.current={left:Dt*rt.scrollLeft,top:rt.scrollTop};break;case Jt.Vertical:default:$t.current={left:0,top:rt.scrollTop}}D&&!zt.current||z($t.current)}}),[rt]);b((function(){Ot(f.current)})),b((function(){if(rt)return rt.addEventListener("scroll",Pe,dr),function(){rt.removeEventListener("scroll",Pe,dr)}}),[rt]);var fe=t.useCallback((function(pe,be){var ie=f.current;if(!ie)return Promise.resolve();var ye={left:0,top:0};switch(It.current){case Jt.Horizontal:ye.left=Dt*pe.left;break;case Jt.Both:ye.left=Dt*pe.left,ye.top=pe.top;break;case Jt.Vertical:default:ye.top=pe.top}return be?(zt.current=!1,Y(!0),new Promise((function(me,Ie){(function(Fe,De,Ne,je,nn,Xe){nn===void 0&&(nn=function(dn){return dn}),Xe===void 0&&(Xe=function(){});var rn=0,Ze=0,tn=!1;switch(De){case Jt.Horizontal:Ze=Fe.scrollLeft,rn=0;case Jt.Both:Ze=Fe.scrollLeft,rn=Fe.scrollTop;break;case Jt.Vertical:default:Ze=0,rn=Fe.scrollTop}var en=function(){tn||(tn=!0,Fe.scrollLeft=Ne.left,Fe.scrollTop=Ne.top,Xe())};if(Math.abs(rn-Ne.top)<=Jn&&De===Jt.Vertical)en();else if(Math.abs(Ze-Ne.left)<=Jn&&De===Jt.Horizontal)en();else{var Qe,hn=-1,vn=Ze-Ne.left,mn=rn-Ne.top,on=function(dn){hn===-1&&(hn=dn);var _n=dn-hn,ve=Math.min(_n/je,1),ge=nn(ve),re={left:Ze-vn*ge,top:rn-mn*ge};switch(De){case Jt.Horizontal:Fe.scrollLeft=re.left;break;case Jt.Both:Fe.scrollLeft=re.left,Fe.scrollTop=re.top;break;case Jt.Vertical:default:Fe.scrollTop=re.top}Math.abs(re.top-Ne.top)<=Jn&&Math.abs(re.left-Ne.left)<=Jn&&!tn&&(window.cancelAnimationFrame(Qe),en()),_n<je?Qe=window.requestAnimationFrame(on):window.cancelAnimationFrame(Qe)};Qe=window.requestAnimationFrame(on)}})(ie,It.current,ye,400,ms,(function(){Ut(),me()}))}))):new Promise((function(me,Ie){switch(It.current){case Jt.Horizontal:ie.scrollLeft=ye.left;break;case Jt.Both:ie.scrollLeft=ye.left,ie.scrollTop=ye.top;break;case Jt.Vertical:default:ie.scrollTop=ye.top}me()}))}),[f]);return{scrollOffset:it,scrollTo:fe}},Bn=function(i,f,D){return Math.max(i,Math.min(D,f))},_s=function(i,f){if(f!==c.ViewMode.DualPageWithCover)return 0;if(!(function(V){var Y=V.length;if(Y===1)return!1;for(var ft=1;ft<Y;ft++)if(V[ft].height!==V[0].height||V[ft].width!==V[0].width)return!0;return!1})(i))return 2*i[0].width;var D=et(i.slice(1),2).map((function(V){return V.length===2?V[0].width+V[1].width:V[0].width})),U=[i[0].width].concat(D);return Math.max.apply(Math,U)},bs={left:0,top:0},ys={left:0,top:0},vi={left:0,top:0},As={left:0,top:0},Ss={height:0,width:0},ur={left:0,top:0},fr="data-virtual-index",Es=[0,.1,.2,.3,.4,.5,.6,.7,.8,.9,1],ws=function(i){var f=i.enableSmoothScroll,D=i.isRtl,U=i.numberOfItems,V=i.parentRef,Y=i.setRenderRange,ft=i.sizes,it=i.scrollMode,z=i.viewMode,lt=t.useState(!1),rt=lt[0],Ot=lt[1],Dt=t.useCallback((function(ve){return Ot(ve)}),[]),It=t.useRef(it);It.current=it;var $t=t.useRef(z);$t.current=z;var zt=it===c.ScrollMode.Wrapped||z===c.ViewMode.DualPageWithCover||z===c.ViewMode.DualPage?Jt.Both:it===c.ScrollMode.Horizontal?Jt.Horizontal:Jt.Vertical,Ut=vs({elementRef:V,enableSmoothScroll:f,isRtl:D,scrollDirection:zt,onSmoothScroll:Dt}),Pe=Ut.scrollOffset,fe=Ut.scrollTo,pe=(function(ve){var ge=ve.elementRef,re=t.useState(ge.current),de=re[0],se=re[1],Ae=t.useRef(!1),Ee=t.useReducer(gs,{height:0,width:0}),ue=Ee[0],Zt=Ee[1];return b((function(){ge.current!==de&&se(ge.current)})),b((function(){if(de&&!Ae.current){Ae.current=!0;var Ce=de.getBoundingClientRect(),Te=Ce.height,qe=Ce.width;Zt({rect:{height:Te,width:qe}})}}),[de]),t.useEffect((function(){if(de){var Ce=new ResizeObserver((function(Te,qe){Te.forEach((function(ze){if(ze.target===de){var cn=ze.contentRect,un=cn.height,ke=cn.width;Zt({rect:{height:un,width:ke}})}}))}));return Ce.observe(de),function(){Ce.unobserve(de)}}}),[de]),ue})({elementRef:V}),be=t.useRef({scrollOffset:ur,measurements:[]});be.current.scrollOffset=Pe;var ie=t.useMemo((function(){return Array(U).fill(-1)}),[]),ye=t.useState(ie),me=ye[0],Ie=ye[1],Fe=t.useMemo((function(){var ve=new IntersectionObserver((function(ge){ge.forEach((function(re){var de=re.isIntersecting?re.intersectionRatio:-1,se=re.target.getAttribute(fr);if(se){var Ae=parseInt(se,10);0<=Ae&&Ae<U&&Ie((function(Ee){return Ee[Ae]=de,(function(ue,Zt,Ce){for(var Te,qe=0,ze=Zt.length;qe<ze;qe++)!Te&&qe in Zt||(Te||(Te=Array.prototype.slice.call(Zt,0,qe)),Te[qe]=Zt[qe]);return ue.concat(Te||Array.prototype.slice.call(Zt))})([],Ee)}))}}))}),{threshold:Es});return ve}),[]),De=t.useMemo((function(){return it===c.ScrollMode.Page&&z===c.ViewMode.SinglePage?(function(ve,ge,re){for(var de=[],se=0;se<ve;se++){var Ae={height:Math.max(ge.height,re[se].height),width:Math.max(ge.width,re[se].width)},Ee=se===0?As:de[se-1].end,ue={left:Ee.left+Ae.width,top:Ee.top+Ae.height};de[se]={index:se,start:Ee,size:Ae,end:ue,visibility:-1}}return de})(U,pe,ft):z===c.ViewMode.DualPageWithCover?(function(ve,ge,re,de){for(var se=[],Ae=0,Ee=0,ue=vi,Zt=0;Zt<ve;Zt++){var Ce=Zt===0?{height:de===c.ScrollMode.Page?Math.max(ge.height,re[Zt].height):re[Zt].height,width:de===c.ScrollMode.Page?Math.max(ge.width,re[Zt].width):re[Zt].width}:{height:de===c.ScrollMode.Page?Math.max(ge.height,re[Zt].height):re[Zt].height,width:Math.max(ge.width/2,re[Zt].width)};de===c.ScrollMode.Page?ue=Zt===0?vi:{left:Zt%2==0?Ce.width:0,top:Math.floor((Zt-1)/2)*Ce.height+se[0].end.top}:Zt===0?(ue=vi,Ae=re[0].height,Ee=0):Zt%2==1?(ue={left:0,top:Ae+=Ee},Ee=Zt===ve-1?re[Zt].height:Math.max(re[Zt].height,re[Zt+1].height)):ue={left:se[Zt-1].end.left,top:Ae};var Te={left:ue.left+Ce.width,top:ue.top+Ce.height};se[Zt]={index:Zt,start:ue,size:Ce,end:Te,visibility:-1}}return se})(U,pe,ft,it):z===c.ViewMode.DualPage?(function(ve,ge,re,de){for(var se=[],Ae=0,Ee=0,ue=ys,Zt=0;Zt<ve;Zt++){var Ce={height:de===c.ScrollMode.Page?Math.max(ge.height,re[Zt].height):re[Zt].height,width:Math.max(ge.width/2,re[Zt].width)};de===c.ScrollMode.Page?ue={left:Zt%2==0?0:Ce.width,top:Math.floor(Zt/2)*Ce.height}:Zt%2==0?(ue={left:0,top:Ae+=Ee},Ee=Zt===ve-1?re[Zt].height:Math.max(re[Zt].height,re[Zt+1].height)):ue={left:se[Zt-1].end.left,top:Ae};var Te={left:ue.left+Ce.width,top:ue.top+Ce.height};se[Zt]={index:Zt,start:ue,size:Ce,end:Te,visibility:-1}}return se})(U,pe,ft,it):(function(ve,ge,re,de){for(var se=[],Ae=0,Ee={left:0,top:0},ue=0,Zt=bs,Ce=0;Ce<ve;Ce++){var Te=re[Ce];if(Ce===0)Ae=Te.width,Ee={left:0,top:0},ue=Te.height;else switch(de){case c.ScrollMode.Wrapped:(Ae+=Te.width)<ge.width?(Zt={left:se[Ce-1].end.left,top:Ee.top},ue=Math.max(ue,Te.height)):(Ae=Te.width,Ee={left:(Zt={left:Ee.left,top:Ee.top+ue}).left,top:Zt.top},ue=Te.height);break;case c.ScrollMode.Horizontal:case c.ScrollMode.Vertical:default:Zt=se[Ce-1].end}var qe={left:Zt.left+Te.width,top:Zt.top+Te.height};se[Ce]={index:Ce,start:Zt,size:Te,end:qe,visibility:-1}}return se})(U,pe,ft,it)}),[it,ft,z,pe]),Ne=De[U-1]?{height:De[U-1].end.top,width:De[U-1].end.left}:Ss;be.current.measurements=De;var je=t.useMemo((function(){var ve=(function(Ce,Te,qe,ze){var cn=0;switch(Ce){case Jt.Horizontal:cn=ze.left;break;case Jt.Vertical:default:cn=ze.top}var un=Te.length-1,ke=(function(We,yn,Rn,Qn){for(;We<=yn;){var Pn=(We+yn)/2|0,jn=Qn(Pn);if(jn<Rn)We=Pn+1;else{if(!(jn>Rn))return Pn;yn=Pn-1}}return We>0?We-1:0})(0,un,cn,(function(We){switch(Ce){case Jt.Horizontal:return Te[We].start.left;case Jt.Both:case Jt.Vertical:default:return Te[We].start.top}}));if(Ce===Jt.Both)for(var ln=Te[ke].start.top;ke-1>=0&&Te[ke-1].start.top===ln&&Te[ke-1].start.left>=ze.left;)ke--;for(var Ge=ke;Ge<=un;){var Ye={top:Te[Ge].start.top-ze.top,left:Te[Ge].start.left-ze.left},sn={height:qe.height-Ye.top,width:qe.width-Ye.left};if(Ce===Jt.Horizontal&&sn.width<0||Ce===Jt.Vertical&&sn.height<0||Ce===Jt.Both&&(sn.width<0||sn.height<0))break;Ge++}return{start:ke,end:Ge}})(zt,De,pe,Pe),ge=ve.start,re=ve.end,de=me.slice(Bn(0,U,ge),Bn(0,U,re)),se=ge+de.reduce((function(Ce,Te,qe,ze){return Te>ze[Ce]?qe:Ce}),0),Ae=se=Bn(0,U-1,se),Ee=Y({endPage:re,numPages:U,startPage:ge}),ue=Ee.startPage,Zt=Ee.endPage;switch(ue=Math.max(ue,0),Zt=Math.min(Zt,U-1),z){case c.ViewMode.DualPageWithCover:se>0&&(Ae=se%2==1?se:se-1),ue=ue===0?0:ue%2==1?ue:ue-1,U-(Zt=Zt%2==1?Zt-1:Zt)<=2&&(Zt=U-1);break;case c.ViewMode.DualPage:Ae=se%2==0?se:se-1,ue=ue%2==0?ue:ue-1,Zt=Zt%2==1?Zt:Zt-1;break;case c.ViewMode.SinglePage:default:Ae=se}return{startPage:ue,endPage:Zt,maxVisbilityIndex:Ae}}),[De,pe,Pe,z,me]),nn=je.startPage,Xe=je.endPage,rn=je.maxVisbilityIndex,Ze=t.useMemo((function(){for(var ve=[],ge=function(de){var se=De[de],Ae=d(d({},se),{visibility:me[de]!==void 0?me[de]:-1,measureRef:function(Ee){Ee&&(Ee.setAttribute(fr,"".concat(de)),Fe.observe(Ee))}});ve.push(Ae)},re=nn;re<=Xe;re++)ge(re);return ve}),[nn,Xe,me,De]),tn=t.useCallback((function(ve,ge){var re=be.current.measurements[Bn(0,U-1,ve)],de=It.current===c.ScrollMode.Page?ur:ge;return re?fe({left:de.left+re.start.left,top:de.top+re.start.top},f):Promise.resolve()}),[fe,f]),en=t.useCallback((function(ve,ge){var re=be.current.measurements,de=re[ve].start,se=re.find((function(Ee){return Ee.start.top-de.top>1e-12}));if(!se)return Promise.resolve();var Ae=se.index;switch($t.current){case c.ViewMode.DualPage:Ae=Ae%2==0?Ae:Ae+1;break;case c.ViewMode.DualPageWithCover:Ae=Ae%2==1?Ae:Ae+1}return tn(Ae,ge)}),[]),Qe=t.useCallback((function(ve,ge){for(var re=be.current.measurements,de=re[ve].start,se=ve,Ae=!1,Ee=U-1;Ee>=0;Ee--)if(de.top-re[Ee].start.top>1e-12){Ae=!0,se=re[Ee].index;break}if(!Ae)return Promise.resolve();switch($t.current){case c.ViewMode.DualPage:se=se%2==0?se:se-1;break;case c.ViewMode.DualPageWithCover:se=se%2==0?se-1:se}return se===ve&&(se=ve-1),tn(se,ge)}),[]),hn=t.useCallback((function(ve,ge){if($t.current===c.ViewMode.DualPageWithCover||$t.current===c.ViewMode.DualPage)return en(ve,ge);switch(It.current){case c.ScrollMode.Wrapped:return en(ve,ge);case c.ScrollMode.Horizontal:case c.ScrollMode.Vertical:default:return tn(ve+1,ge)}}),[]),vn=t.useCallback((function(ve,ge){if($t.current===c.ViewMode.DualPageWithCover||$t.current===c.ViewMode.DualPage)return Qe(ve,ge);switch(It.current){case c.ScrollMode.Wrapped:return Qe(ve,ge);case c.ScrollMode.Horizontal:case c.ScrollMode.Vertical:default:return tn(ve-1,ge)}}),[]),mn=t.useCallback((function(){return(function(ve,ge){switch(ge){case c.ScrollMode.Horizontal:return{position:"relative",height:"100%",width:"".concat(ve.width,"px")};case c.ScrollMode.Vertical:default:return{position:"relative",height:"".concat(ve.height,"px"),width:"100%"}}})(Ne,It.current)}),[Ne]),on=t.useCallback((function(ve){return(function(ge,re,de){return de!==c.ScrollMode.Page?{}:{height:"".concat(re.height,"px"),width:"100%",position:"absolute",top:0,transform:"translateY(".concat(ge.start.top,"px)")}})(ve,pe,It.current)}),[pe]),dn=t.useCallback((function(ve){return(function(ge,re,de,se,Ae){var Ee,ue,Zt,Ce,Te,qe,ze,cn=re?"right":"left",un=re?-1:1,ke=de.length,ln=ge.start.left*un,Ge=ge.size,Ye=Ge.height,sn=Ge.width;if(se===c.ViewMode.DualPageWithCover){var We=Ae===c.ScrollMode.Page?0:ge.start.top;return ge.index===0||ke%2==0&&ge.index===ke-1?((Ee={height:"".concat(Ye,"px"),minWidth:"".concat(_s(de,se),"px"),width:"100%"})[cn]=0,Ee.position="absolute",Ee.top=0,Ee.transform="translate(".concat(ln,"px, ").concat(We,"px)"),Ee):((ue={height:"".concat(Ye,"px"),width:"".concat(sn,"px")})[cn]=0,ue.position="absolute",ue.top=0,ue.transform="translate(".concat(ln,"px, ").concat(We,"px)"),ue)}if(se===c.ViewMode.DualPage)return(Zt={height:"".concat(Ye,"px"),width:"".concat(sn,"px")})[cn]=0,Zt.position="absolute",Zt.top=0,Zt.transform="translate(".concat(ln,"px, ").concat(Ae===c.ScrollMode.Page?0:ge.start.top,"px)"),Zt;switch(Ae){case c.ScrollMode.Horizontal:return(Ce={height:"100%",width:"".concat(sn,"px")})[cn]=0,Ce.position="absolute",Ce.top=0,Ce.transform="translateX(".concat(ln,"px)"),Ce;case c.ScrollMode.Page:return(Te={height:"".concat(Ye,"px"),width:"".concat(sn,"px")})[cn]=0,Te.position="absolute",Te.top=0,Te;case c.ScrollMode.Wrapped:return(qe={height:"".concat(Ye,"px"),width:"".concat(sn,"px")})[cn]=0,qe.position="absolute",qe.top=0,qe.transform="translate(".concat(ln,"px, ").concat(ge.start.top,"px)"),qe;case c.ScrollMode.Vertical:default:return(ze={height:"".concat(Ye,"px"),width:"100%"})[cn]=0,ze.position="absolute",ze.top=0,ze.transform="translateY(".concat(ge.start.top,"px)"),ze}})(ve,D,ft,$t.current,It.current)}),[D,ft]),_n=t.useCallback((function(ve,ge){var re=be.current,de=re.measurements,se=re.scrollOffset,Ae=de[Bn(0,U-1,ge)];if(Ae){var Ee=It.current===c.ScrollMode.Page?{left:Ae.start.left,top:Ae.start.top}:{left:se.left*ve,top:se.top*ve};return fe(Ee,!1)}return Promise.resolve()}),[]);return t.useEffect((function(){return function(){Fe.disconnect()}}),[]),{boundingClientRect:pe,isSmoothScrolling:rt,startPage:nn,endPage:Xe,maxVisbilityIndex:rn,virtualItems:Ze,getContainerStyles:mn,getItemContainerStyles:on,getItemStyles:dn,scrollToItem:tn,scrollToNextItem:hn,scrollToPreviousItem:vn,zoom:_n}},_i=function(i,f,D,U,V,Y){var ft=D;switch(!0){case(V===c.ViewMode.DualPageWithCover&&Y>=3):case(V===c.ViewMode.DualPage&&Y>=3):ft=2*D;break;default:ft=D}switch(U){case c.SpecialZoomLevel.ActualSize:return 1;case c.SpecialZoomLevel.PageFit:return Math.min((i.clientWidth-17)/ft,(i.clientHeight-16)/f);case c.SpecialZoomLevel.PageWidth:return(i.clientWidth-17)/ft}},Cs=function(i){var f,D,U=i.getCurrentPage,V=(f=50,D=t.useRef([]),t.useEffect((function(){return function(){D.current=[]}}),[]),{push:function(lt){var rt=D.current;rt.length+1>f&&rt.shift(),rt.push(lt),D.current=rt},map:function(lt){return D.current.map((function(rt){return lt(rt)}))},pop:function(){var lt=D.current;if(lt.length===0)return null;var rt=lt.pop();return D.current=lt,rt}}),Y=(function(lt){var rt=t.useRef([]);return t.useEffect((function(){return function(){rt.current=[]}}),[]),{dequeue:function(){var Ot=rt.current;if(Ot.length===0)return null;var Dt=Ot.shift();return rt.current=Ot,Dt||null},enqueue:function(Ot){var Dt=rt.current;Dt.length+1>lt&&Dt.pop(),rt.current=[Ot].concat(Dt)},map:function(Ot){return rt.current.map((function(Dt){return Ot(Dt)}))}}})(50),ft=function(){var lt=Y.dequeue();return lt&&V.push(lt),lt&&lt.pageIndex===U()?ft():lt},it=function(){var lt=V.pop();return lt&&Y.enqueue(lt),lt&&lt.pageIndex===U()?it():lt},z=t.useCallback((function(lt){V.push(lt)}),[]);return{getNextDestination:ft,getPreviousDestination:it,markVisitedDestination:z}},pr=function(i){var f=[];return i.map((function(D){f=f.concat(D).concat((function(U){var V=[];return U.items&&U.items.length>0&&(V=V.concat(pr(U.items))),V})(D))})),f},gr={capture:!1,passive:!0},ks={height:0,width:0},bi={height:0,width:0},Ps=function(i){var f=i.getCurrentPage,D=i.getCurrentScrollMode,U=i.jumpToPage,V=i.targetRef,Y=t.useState(c.FullScreenMode.Normal),ft=Y[0],it=Y[1],z=(function(){var me=t.useState(ks),Ie=me[0],Fe=me[1],De=bt((function(){Fe({height:window.innerHeight,width:window.innerWidth})}),100);return b((function(){return window.addEventListener("resize",De,gr),function(){window.removeEventListener("resize",De,gr)}}),[]),Ie})(),lt=t.useState(bi),rt=lt[0],Ot=lt[1],Dt=t.useRef(bi),It=t.useRef(f()),$t=t.useRef(bi),zt=t.useState(V.current),Ut=zt[0],Pe=zt[1],fe=t.useRef();b((function(){V.current!==Ut&&Pe(V.current)}),[]),b((function(){if(Ut){var me=new ResizeObserver((function(Ie){Ie.forEach((function(Fe){var De=Fe.target.getBoundingClientRect(),Ne=De.height,je=De.width;Ot({height:Ne,width:je})}))}));return me.observe(Ut),function(){me.unobserve(Ut),me.disconnect()}}}),[Ut]);var pe=t.useCallback((function(me){var Ie=$();return Ie&&Ie!==me?(it(c.FullScreenMode.Normal),P(Ie)):Promise.resolve()}),[]),be=t.useCallback((function(me){me&&h()&&(Pe(me),pe(me).then((function(){fe.current=me,it(c.FullScreenMode.Entering),(function(Ie){p&&Ie[G.RequestFullScreen]()})(me)})))}),[]),ie=t.useCallback((function(){$()&&(it(c.FullScreenMode.Exitting),P(document))}),[]),ye=t.useCallback((function(){Ut&&$()!==Ut&&it(c.FullScreenMode.Exitting)}),[Ut]);return t.useEffect((function(){switch(ft){case c.FullScreenMode.Entering:fe.current&&(fe.current.style.backgroundColor="var(--rpv-core__full-screen-target-background-color)"),It.current=f(),Dt.current={height:window.innerHeight,width:window.innerWidth};break;case c.FullScreenMode.Entered:D()===c.ScrollMode.Page?U(It.current).then((function(){it(c.FullScreenMode.EnteredCompletely)})):it(c.FullScreenMode.EnteredCompletely);break;case c.FullScreenMode.Exitting:fe.current&&(fe.current.style.backgroundColor="",fe.current=null),It.current=f();break;case c.FullScreenMode.Exited:it(c.FullScreenMode.Normal),D()===c.ScrollMode.Page&&U(It.current)}}),[ft]),t.useEffect((function(){if(ft!==c.FullScreenMode.Normal)return ft===c.FullScreenMode.Entering&&z.height===rt.height&&z.width===rt.width&&z.height>0&&z.width>0&&($t.current.height===0||z.height==$t.current.height)?($t.current={height:window.innerHeight,width:window.innerWidth},void it(c.FullScreenMode.Entered)):void(ft===c.FullScreenMode.Exitting&&Dt.current.height===z.height&&Dt.current.width===z.width&&z.height>0&&z.width>0&&it(c.FullScreenMode.Exited))}),[ft,z,rt]),t.useEffect((function(){var me;return me=ye,p&&document.addEventListener(G.FullScreenChange,me),function(){(function(Ie){p&&document.removeEventListener(G.FullScreenChange,Ie)})(ye)}}),[Ut]),{enterFullScreenMode:be,exitFullScreenMode:ie,fullScreenMode:ft}},Ts={buildPageStyles:function(){return{}},transformSize:function(i){return i.size}},Mn={left:0,top:0},xs=function(i){var f=i.currentFile,D=i.defaultScale,U=i.doc,V=i.enableSmoothScroll,Y=i.initialPage,ft=i.initialRotation,it=i.initialScale,z=i.pageLayout,lt=i.pageSizes,rt=i.plugins,Ot=i.renderPage,Dt=i.scrollMode,It=i.setRenderRange,$t=i.viewMode,zt=i.viewerState,Ut=i.onDocumentLoad,Pe=i.onOpenFile,fe=i.onPageChange,pe=i.onRotate,be=i.onRotatePage,ie=i.onZoom,ye=U.numPages,me=U.loadingTask.docId,Ie=t.useContext(ct).l10n,Fe=t.useContext(j),De=Fe.direction===c.TextDirection.RightToLeft,Ne=t.useRef(),je=t.useRef(),nn=t.useState(Y),Xe=nn[0],rn=nn[1],Ze=t.useRef(null),tn=Cs({getCurrentPage:function(){return ke.current.pageIndex}}),en=t.useState(ft),Qe=en[0],hn=en[1],vn=at(Qe),mn=t.useState(!1),on=mn[0],dn=mn[1],_n=t.useState(new Map),ve=_n[0],ge=_n[1],re=t.useState(Dt),de=re[0],se=re[1],Ae=at(de),Ee=t.useState($t),ue=Ee[0],Zt=Ee[1],Ce=at(ue),Te=(function(Ht){var we=nt(),Me=t.useState([]),He=Me[0],Be=Me[1];return t.useEffect((function(){Ht.getOutline().then((function(Re){if(we.current&&Re!==null){var an=pr(Re);Be(an)}}))}),[]),He})(U),qe=t.useState(it),ze=qe[0],cn=qe[1],un=at(ze),ke=t.useRef(zt),ln=t.useRef(typeof D=="string"?D:null),Ge=t.useRef(-1),Ye=t.useRef(-1),sn=t.useRef(Y),We=Ps({getCurrentPage:function(){return ke.current.pageIndex},getCurrentScrollMode:function(){return ke.current.scrollMode},jumpToPage:function(Ht){return Sn(Ht)},targetRef:je}),yn=t.useState(-1),Rn=yn[0],Qn=yn[1],Pn=t.useState(0),jn=Pn[0],Ds=Pn[1],fn=N({doc:U});t.useEffect((function(){return function(){Bt.clear(),he.clear()}}),[me]);var br=t.useMemo((function(){return Object.assign({},Ts,z)}),[]),Os=t.useMemo((function(){return Array(ye).fill(0).map((function(Ht,we){var Me=[lt[we].pageHeight,lt[we].pageWidth],He=Math.abs(Qe)%180==0?{height:Me[0],width:Me[1]}:{height:Me[1],width:Me[0]},Be={height:He.height*ze,width:He.width*ze};return br.transformSize({numPages:ye,pageIndex:we,size:Be})}))}),[Qe,ze]),Ve=ws({enableSmoothScroll:V,isRtl:De,numberOfItems:ye,parentRef:je,scrollMode:de,setRenderRange:It,sizes:Os,viewMode:ue}),Ns=bt((function(){!ln.current||ke.current.fullScreenMode!==c.FullScreenMode.Normal||Y>0&&sn.current===Y||Tn(ln.current)}),200);(function(Ht){var we=Ht.targetRef,Me=Ht.onResize;b((function(){var He=new ResizeObserver((function(Re){Re.forEach((function(an){Me(an.target)}))})),Be=we.current;if(Be)return He.observe(Be),function(){He.unobserve(Be)}}),[])})({targetRef:je,onResize:Ns});var An=function(Ht){var we=Ht;rt.forEach((function(Me){Me.onViewerStateChange&&(we=Me.onViewerStateChange(we))})),ke.current=we},Bs=function(){return je.current},js=function(){return ke.current},Hs=t.useCallback((function(Ht){tn.markVisitedDestination(Ht)}),[]),Si=t.useCallback((function(Ht){var we=Ht.pageIndex,Me=Ht.bottomOffset,He=Ht.leftOffset,Be=Ht.scaleTo,Re=je.current,an=ke.current;return Re&&an?new Promise((function(En,Ti){Xt(U,we).then((function(ti){var wn=ti.getViewport({scale:1}),ei=0,Pr=(typeof Me=="function"?Me(wn.width,wn.height):Me)||0,ni=(typeof He=="function"?He(wn.width,wn.height):He)||0,Fn=an.scale;switch(Be){case c.SpecialZoomLevel.PageFit:ei=0,ni=0,Tn(c.SpecialZoomLevel.PageFit);break;case c.SpecialZoomLevel.PageWidth:Fn=_i(Re,lt[we].pageHeight,lt[we].pageWidth,c.SpecialZoomLevel.PageWidth,$t,ye),ei=(wn.height-Pr)*Fn,ni*=Fn,Tn(Fn);break;default:ei=(wn.height-Pr)*Fn,ni*=Fn}switch(an.scrollMode){case c.ScrollMode.Horizontal:Ve.scrollToItem(we,{left:ni,top:0}).then((function(){En()}));break;case c.ScrollMode.Vertical:default:Ve.scrollToItem(we,{left:0,top:ei}).then((function(){En()}))}}))})):Promise.resolve()}),[]),yr=t.useCallback((function(Ht){return tn.markVisitedDestination(Ht),Si(Ht)}),[]),Us=t.useCallback((function(){var Ht=tn.getNextDestination();return Ht?Si(Ht):Promise.resolve()}),[]),Ws=t.useCallback((function(){var Ht=tn.getPreviousDestination();return Ht?Si(Ht):Promise.resolve()}),[]),zs=t.useCallback((function(){return Ve.scrollToNextItem(ke.current.pageIndex,Mn)}),[]),Sn=t.useCallback((function(Ht){return 0<=Ht&&Ht<ye?Ve.scrollToItem(Ht,Mn):Promise.resolve()}),[]),Vs=t.useCallback((function(){return Ve.scrollToPreviousItem(ke.current.pageIndex,Mn)}),[]),Ar=t.useCallback((function(Ht){var we,Me;(we=Ht.name,Me=we.split(/\./).pop(),Me?Me.toLowerCase():"").toLowerCase()==="pdf"&&new Promise((function(He){var Be=new FileReader;Be.readAsArrayBuffer(Ht),Be.onload=function(){var Re=new Uint8Array(Be.result);He(Re)}})).then((function(He){Pe(Ht.name,He)}))}),[Pe]),Sr=t.useCallback((function(Ht){var we=Ht===c.RotateDirection.Backward?-90:90,Me=ke.current.rotation,He=Me===360||Me===-360?we:Me+we;fn.markNotRendered(),hn(He),An(d(d({},ke.current),{rotation:He})),pe({direction:Ht,doc:U,rotation:He})}),[]),Ei=t.useCallback((function(Ht,we){var Me=we===c.RotateDirection.Backward?-90:90,He=ke.current.pagesRotation,Be=(He.has(Ht)?He.get(Ht):ft)+Me,Re=He.set(Ht,Be);ge(Re),dn((function(an){return!an})),An(d(d({},ke.current),{pagesRotation:Re,rotatedPage:Ht})),be({direction:we,doc:U,pageIndex:Ht,rotation:Be}),fn.markRendering(Ht),Qn(Ht)}),[]),Er=t.useCallback((function(Ht){An(d(d({},ke.current),{scrollMode:Ht})),se(Ht)}),[]),wr=t.useCallback((function(Ht){An(d(d({},ke.current),{viewMode:Ht})),Zt(Ht)}),[]),Tn=t.useCallback((function(Ht){var we=je.current,Me=ke.current.pageIndex;if(!(Me<0||Me>=ye)){var He=lt[Me].pageHeight,Be=lt[Me].pageWidth,Re=we?typeof Ht=="string"?_i(we,He,Be,Ht,ke.current.viewMode,ye):Ht:1;ln.current=typeof Ht=="string"?Ht:null,Re!==ke.current.scale&&(Ds((function(an){return an+1})),fn.markNotRendered(),cn(Re),ie({doc:U,scale:Re}),An(d(d({},ke.current),{scale:Re})))}}),[]),$s=t.useCallback((function(Ht){We.enterFullScreenMode(Ht)}),[]),qs=t.useCallback((function(){We.exitFullScreenMode()}),[]);t.useEffect((function(){An(d(d({},ke.current),{fullScreenMode:We.fullScreenMode}))}),[We.fullScreenMode]),t.useEffect((function(){var Ht={enterFullScreenMode:$s,exitFullScreenMode:qs,getPagesContainer:Bs,getViewerState:js,jumpToDestination:yr,jumpToNextDestination:Us,jumpToPreviousDestination:Ws,jumpToNextPage:zs,jumpToPreviousPage:Vs,jumpToPage:Sn,openFile:Ar,rotate:Sr,rotatePage:Ei,setViewerState:An,switchScrollMode:Er,switchViewMode:wr,zoom:Tn};return rt.forEach((function(we){we.install&&we.install(Ht)})),function(){rt.forEach((function(we){we.uninstall&&we.uninstall(Ht)}))}}),[me]),t.useEffect((function(){Ut({doc:U,file:f}),rt.forEach((function(Ht){Ht.onDocumentLoad&&Ht.onDocumentLoad({doc:U,file:f})}))}),[me]);var wi,Ci,ki,Cr=Ve.boundingClientRect;wi=function(){Y&&Sn(Y)},Ci=Cr.height>0&&Cr.width>0,ki=t.useRef(!1),b((function(){Ci&&!ki.current&&(ki.current=!0,wi())}),[wi,Ci]),b((function(){var Ht=ke.current.pageIndex;Ht>-1&&Ae!==de&&Ve.scrollToItem(Ht,Mn).then((function(){We.fullScreenMode===c.FullScreenMode.EnteredCompletely&&(V||fn.markNotRendered(),Ge.current=-1)}))}),[de]),b((function(){var Ht=ke.current.pageIndex;Ht>-1&&vn!==Qe&&Ve.scrollToItem(Ht,Mn)}),[Qe]),b((function(){un!=0&&un!=ke.current.scale&&Ve.zoom(ke.current.scale/un,ke.current.pageIndex).then((function(){We.fullScreenMode===c.FullScreenMode.EnteredCompletely&&(Ye.current=-1)}))}),[ze]),b((function(){if(Ce!==ke.current.viewMode){var Ht=Ve.startPage,we=Ve.endPage,Me=Ve.virtualItems;fn.markNotRendered(),fn.setRange(Ht,we);for(var He=function(Re){var an=Me.find((function(En){return En.index===Re}));an&&fn.setVisibility(Re,an.visibility)},Be=Ht;Be<=we;Be++)He(Be);Pi()}}),[ue]),b((function(){var Ht=ke.current.pageIndex;Ht>-1&&Ce!==ue&&Ve.scrollToItem(Ht,Mn)}),[ue]),b((function(){var Ht=ke.current.pageIndex;Ht>0&&Ht===Y&&sn.current===Y&&ln.current&&(sn.current=-1,Tn(ln.current))}),[Xe]),t.useEffect((function(){Ve.isSmoothScrolling||Ze.current!==null&&Ze.current===Xe||(Ze.current=Xe,fe({currentPage:Xe,doc:U}))}),[Xe,Ve.isSmoothScrolling]),t.useEffect((function(){We.fullScreenMode===c.FullScreenMode.Entering&&ke.current.scrollMode===c.ScrollMode.Page&&(Ge.current=ke.current.pageIndex),We.fullScreenMode===c.FullScreenMode.EnteredCompletely&&ke.current.scrollMode===c.ScrollMode.Page&&V&&(Ge.current=-1),We.fullScreenMode===c.FullScreenMode.EnteredCompletely&&ln.current&&(Ye.current=ke.current.pageIndex,Tn(ln.current))}),[We.fullScreenMode]),t.useEffect((function(){if(We.fullScreenMode!==c.FullScreenMode.Entering&&We.fullScreenMode!==c.FullScreenMode.Exitting&&!Ve.isSmoothScrolling){var Ht=Ve.startPage,we=Ve.endPage,Me=Ve.maxVisbilityIndex,He=Ve.virtualItems,Be=Me,Re=We.fullScreenMode===c.FullScreenMode.Entered||We.fullScreenMode===c.FullScreenMode.EnteredCompletely;if(!(Re&&Be!==Ge.current&&Ge.current>-1||Re&&Be!==Ye.current&&Ye.current>-1)){rn(Be),An(d(d({},ke.current),{pageIndex:Be})),fn.setRange(Ht,we);for(var an=function(Ti){var ti=He.find((function(wn){return wn.index===Ti}));ti&&fn.setVisibility(Ti,ti.visibility)},En=Ht;En<=we;En++)an(En);Pi()}}}),[Ve.startPage,Ve.endPage,Ve.isSmoothScrolling,Ve.maxVisbilityIndex,We.fullScreenMode,on,Qe,ze]);var Gs=t.useCallback((function(Ht){fn.markRendered(Ht),Pi()}),[jn]),Pi=function(){var Ht=fn.getHighestPriorityPage();Ht>-1&&fn.isInRange(Ht)&&(fn.markRendering(Ht),Qn(Ht))},Xs=function(Ht){var we=Xe-1,Me=Xe+1;switch(Ht){case"FirstPage":Sn(0);break;case"LastPage":Sn(ye-1);break;case"NextPage":Me<ye&&Sn(Me);break;case"PrevPage":we>=0&&Sn(we)}},Ys=t.useCallback((function(){var Ht=Ve.virtualItems,we=[];switch(ue){case c.ViewMode.DualPage:we=et(Ht,2);break;case c.ViewMode.DualPageWithCover:Ht.length&&(we=Ht[0].index===0?[[Ht[0]]].concat(et(Ht.slice(1),2)):et(Ht,2));break;case c.ViewMode.SinglePage:default:we=et(Ht,1)}var Me=Ie&&Ie.core?Ie.core.pageLabel:"Page {{pageIndex}}",He={attrs:{className:"rpv-core__inner-container","data-testid":"core__inner-container",ref:Ne,style:{height:"100%"}},children:t.createElement(t.Fragment,null),subSlot:{attrs:{"data-testid":"core__inner-pages",className:y({"rpv-core__inner-pages":!0,"rpv-core__inner-pages--horizontal":de===c.ScrollMode.Horizontal,"rpv-core__inner-pages--rtl":De,"rpv-core__inner-pages--single":de===c.ScrollMode.Page,"rpv-core__inner-pages--vertical":de===c.ScrollMode.Vertical,"rpv-core__inner-pages--wrapped":de===c.ScrollMode.Wrapped}),ref:je,style:{height:"100%",position:"relative"}},children:t.createElement("div",{"data-testid":"core__inner-current-page-".concat(Xe),style:Object.assign({"--scale-factor":ze},Ve.getContainerStyles())},we.map((function(Be){return t.createElement("div",{className:y({"rpv-core__inner-page-container":!0,"rpv-core__inner-page-container--single":de===c.ScrollMode.Page}),style:Ve.getItemContainerStyles(Be[0]),key:"".concat(Be[0].index,"-").concat(ue)},Be.map((function(Re){var an=ue===c.ViewMode.DualPageWithCover&&(Re.index===0||ye%2==0&&Re.index===ye-1);return t.createElement("div",{"aria-label":Me.replace("{{pageIndex}}","".concat(Re.index+1)),className:y({"rpv-core__inner-page":!0,"rpv-core__inner-page--dual-even":ue===c.ViewMode.DualPage&&Re.index%2==0,"rpv-core__inner-page--dual-odd":ue===c.ViewMode.DualPage&&Re.index%2==1,"rpv-core__inner-page--dual-cover":an,"rpv-core__inner-page--dual-cover-even":ue===c.ViewMode.DualPageWithCover&&!an&&Re.index%2==0,"rpv-core__inner-page--dual-cover-odd":ue===c.ViewMode.DualPageWithCover&&!an&&Re.index%2==1,"rpv-core__inner-page--single":ue===c.ViewMode.SinglePage&&de===c.ScrollMode.Page}),role:"region",key:"".concat(Re.index,"-").concat(ue),style:Object.assign({},Ve.getItemStyles(Re),br.buildPageStyles({numPages:ye,pageIndex:Re.index,scrollMode:de,viewMode:ue}))},t.createElement(ps,{doc:U,measureRef:Re.measureRef,outlines:Te,pageIndex:Re.index,pageRotation:ve.has(Re.index)?ve.get(Re.index):0,pageSize:lt[Re.index],plugins:rt,renderPage:Ot,renderQueueKey:jn,rotation:Qe,scale:ze,shouldRender:Rn===Re.index,viewMode:ue,onExecuteNamedAction:Xs,onJumpFromLinkAnnotation:Hs,onJumpToDest:yr,onRenderCompleted:Gs,onRotatePage:Ei}))})))})))}};return rt.forEach((function(Be){Be.renderViewer&&(He=Be.renderViewer({containerRef:Ne,doc:U,pagesContainerRef:je,pagesRotation:ve,pageSizes:lt,rotation:Qe,slot:He,themeContext:Fe,jumpToPage:Sn,openFile:Ar,rotate:Sr,rotatePage:Ei,switchScrollMode:Er,switchViewMode:wr,zoom:Tn}))})),He}),[rt,Ve]),kr=t.useCallback((function(Ht){return t.createElement("div",d({},Ht.attrs,{style:Ht.attrs&&Ht.attrs.style?Ht.attrs.style:{}}),Ht.children,Ht.subSlot&&kr(Ht.subSlot))}),[]);return kr(Ys())},mr=[.1,.2,.3,.4,.5,.6,.7,.8,.9,1,1.1,1.3,1.5,1.7,1.9,2.1,2.4,2.7,3,3.3,3.7,4.1,4.6,5.1,5.7,6.3,7,7.7,8.5,9.4,10],Ms=function(i){var f=i.defaultScale,D=i.doc,U=i.render,V=i.scrollMode,Y=i.viewMode,ft=t.useRef(),it=t.useState({pageSizes:[],scale:0}),z=it[0],lt=it[1];return t.useLayoutEffect((function(){var rt=Array(D.numPages).fill(0).map((function(Ot,Dt){return new Promise((function(It,$t){Xt(D,Dt).then((function(zt){var Ut=zt.getViewport({scale:1});It({pageHeight:Ut.height,pageWidth:Ut.width,rotation:Ut.rotation})}))}))}));Promise.all(rt).then((function(Ot){var Dt=ft.current;if(Dt&&Ot.length!==0){var It=Ot[0].pageWidth,$t=Ot[0].pageHeight,zt=Dt.parentElement,Ut=(zt.clientWidth-45)/It,Pe=(zt.clientHeight-45)/$t,fe=Ut;switch(V){case c.ScrollMode.Horizontal:fe=Math.min(Ut,Pe);break;case c.ScrollMode.Vertical:default:fe=Ut}var pe,be,ie=f?typeof f=="string"?_i(zt,$t,It,f,Y,D.numPages):f:(pe=fe,(be=mr.findIndex((function(ye){return ye>=pe})))===-1||be===0?pe:mr[be-1]);lt({pageSizes:Ot,scale:ie})}}))}),[D.loadingTask.docId]),z.pageSizes.length===0||z.scale===0?t.createElement("div",{className:"rpv-core__page-size-calculator","data-testid":"core__page-size-calculating",ref:ft},t.createElement(O,null)):U(z.pageSizes,z.scale)},Zn=function(){},yi=(function(i){function f(D,U){var V=i.call(this)||this;return V.verifyPassword=D,V.passwordStatus=U,V}return W(f,i),f})(Zn),Rs=function(i){var f=i.passwordStatus,D=i.renderProtectedView,U=i.verifyPassword,V=i.onDocumentAskPassword,Y=t.useContext(ct).l10n,ft=t.useState(""),it=ft[0],z=ft[1],lt=t.useContext(j).direction===c.TextDirection.RightToLeft,rt=function(){return U(it)};return t.useEffect((function(){V&&V({verifyPassword:U})}),[]),D?D({passwordStatus:f,verifyPassword:U}):t.createElement("div",{className:"rpv-core__asking-password-wrapper"},t.createElement("div",{className:y({"rpv-core__asking-password":!0,"rpv-core__asking-password--rtl":lt})},t.createElement("div",{className:"rpv-core__asking-password-message"},f===c.PasswordStatus.RequiredPassword&&Y.core.askingPassword.requirePasswordToOpen,f===c.PasswordStatus.WrongPassword&&Y.core.wrongPassword.tryAgain),t.createElement("div",{className:"rpv-core__asking-password-body"},t.createElement("div",{className:y({"rpv-core__asking-password-input":!0,"rpv-core__asking-password-input--ltr":!lt,"rpv-core__asking-password-input--rtl":lt})},t.createElement(w,{testId:"core__asking-password-input",type:"password",value:it,onChange:z,onKeyDown:function(Ot){Ot.key==="Enter"&&rt()}})),t.createElement(A,{onClick:rt},Y.core.askingPassword.submit))))},vr=(function(i){function f(D){var U=i.call(this)||this;return U.doc=D,U}return W(f,i),f})(Zn),_r=(function(i){function f(D){var U=i.call(this)||this;return U.error=D,U}return W(f,i),f})(Zn),Ai=(function(i){function f(D){var U=i.call(this)||this;return U.percentages=D,U}return W(f,i),f})(Zn),Fs=function(i){var f=i.characterMap,D=i.file,U=i.httpHeaders,V=i.render,Y=i.renderError,ft=i.renderLoader,it=i.renderProtectedView,z=i.transformGetDocumentParams,lt=i.withCredentials,rt=i.onDocumentAskPassword,Ot=t.useContext(j).direction===c.TextDirection.RightToLeft,Dt=t.useState(new Ai(0)),It=Dt[0],$t=Dt[1],zt=t.useRef(""),Ut=nt();return t.useEffect((function(){zt.current="",$t(new Ai(0));var Pe=new Z.PDFWorker({name:"PDFWorker_".concat(Date.now())}),fe=Object.assign({httpHeaders:U,withCredentials:lt,worker:Pe},typeof D=="string"?{url:D}:{data:D},f?{cMapUrl:f.url,cMapPacked:f.isCompressed}:{}),pe=z?z(fe):fe,be=Z.getDocument(pe);return be.onPassword=function(ie,ye){switch(ye){case Z.PasswordResponses.NEED_PASSWORD:Ut.current&&$t(new yi(ie,c.PasswordStatus.RequiredPassword));break;case Z.PasswordResponses.INCORRECT_PASSWORD:Ut.current&&$t(new yi(ie,c.PasswordStatus.WrongPassword))}},be.onProgress=function(ie){var ye=ie.total>0?Math.min(100,100*ie.loaded/ie.total):100;Ut.current&&zt.current===""&&$t(new Ai(ye))},be.promise.then((function(ie){zt.current=ie.loadingTask.docId,Ut.current&&$t(new vr(ie))}),(function(ie){return Ut.current&&!Pe.destroyed&&$t(new _r({message:ie.message||"Cannot load document",name:ie.name}))})),function(){be.destroy(),Pe.destroy()}}),[D]),It instanceof yi?t.createElement(Rs,{passwordStatus:It.passwordStatus,renderProtectedView:it,verifyPassword:It.verifyPassword,onDocumentAskPassword:rt}):It instanceof vr?V(It.doc):It instanceof _r?Y?Y(It.error):t.createElement("div",{className:y({"rpv-core__doc-error":!0,"rpv-core__doc-error--rtl":Ot})},t.createElement("div",{className:"rpv-core__doc-error-text"},It.error.message)):t.createElement("div",{"data-testid":"core__doc-loading",className:y({"rpv-core__doc-loading":!0,"rpv-core__doc-loading--rtl":Ot})},ft?ft(It.percentages):t.createElement(O,null))},Ls=function(i,f){var D=t.useMemo((function(){return i==="auto"?typeof window<"u"&&window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light":i}),[]),U=t.useState(D),V=U[0],Y=U[1],ft=at(V);return t.useEffect((function(){if(i==="auto"){var it=window.matchMedia("(prefers-color-scheme: dark)"),z=function(lt){Y(lt.matches?"dark":"light")};return it.addEventListener("change",z),function(){return it.removeEventListener("change",z)}}}),[]),t.useEffect((function(){V!==ft&&f&&f(V)}),[V]),t.useEffect((function(){i!==V&&Y(i)}),[i]),{currentTheme:V,setCurrentTheme:Y}},Is=function(i){return{startPage:i.startPage-3,endPage:i.endPage+3}};c.Button=function(i){var f=i.children,D=i.testId,U=i.onClick,V=t.useContext(j).direction===c.TextDirection.RightToLeft,Y=D?{"data-testid":D}:{};return t.createElement("button",d({className:y({"rpv-core__button":!0,"rpv-core__button--rtl":V}),type:"button",onClick:U},Y),f)},c.Icon=v,c.LazyRender=function(i){var f=i.attrs,D=i.children,U=i.testId,V=t.useState(!1),Y=V[0],ft=V[1],it=U?d(d({},f),{"data-testid":U}):f,z=M({once:!0,onVisibilityChanged:function(lt){lt.isVisible&&ft(!0)}});return t.createElement("div",d({ref:z},it),Y&&D)},c.LocalizationContext=ct,c.Menu=function(i){var f=i.children,D=t.useRef(),U=t.useRef([]),V=t.useContext(j).direction===c.TextDirection.RightToLeft,Y=function(it){if(D.current)switch(it.key){case"Tab":it.preventDefault();break;case"ArrowDown":it.preventDefault(),ft((function(z,lt){return lt+1}));break;case"ArrowUp":it.preventDefault(),ft((function(z,lt){return lt-1}));break;case"End":it.preventDefault(),ft((function(z,lt){return z.length-1}));break;case"Home":it.preventDefault(),ft((function(z,lt){return 0}))}},ft=function(it){if(D.current){var z=U.current,lt=z.findIndex((function(Ot){return Ot.getAttribute("tabindex")==="0"})),rt=Math.min(z.length-1,Math.max(0,it(z,lt)));lt>=0&&lt<=z.length-1&&z[lt].setAttribute("tabindex","-1"),z[rt].setAttribute("tabindex","0"),z[rt].focus()}};return b((function(){var it=D.current;if(it){var z=(function(lt){var rt=[];return lt.querySelectorAll('.rpv-core__menu-item[role="menuitem"]').forEach((function(Ot){if(Ot instanceof HTMLElement){var Dt=Ot.parentElement;(Dt===lt||window.getComputedStyle(Dt).display!=="none")&&rt.push(Ot)}})),rt})(it);U.current=z}}),[]),b((function(){return document.addEventListener("keydown",Y),function(){document.removeEventListener("keydown",Y)}}),[]),t.createElement("div",{ref:D,"aria-orientation":"vertical",className:y({"rpv-core__menu":!0,"rpv-core__menu--rtl":V}),role:"menu",tabIndex:0},f)},c.MenuDivider=function(){return t.createElement("div",{"aria-orientation":"horizontal",className:"rpv-core__menu-divider",role:"separator"})},c.MenuItem=function(i){var f=i.checked,D=f!==void 0&&f,U=i.children,V=i.icon,Y=V===void 0?null:V,ft=i.isDisabled,it=ft!==void 0&&ft,z=i.testId,lt=i.onClick,rt=t.useContext(j).direction===c.TextDirection.RightToLeft,Ot=z?{"data-testid":z}:{};return t.createElement("button",d({className:y({"rpv-core__menu-item":!0,"rpv-core__menu-item--disabled":it,"rpv-core__menu-item--ltr":!rt,"rpv-core__menu-item--rtl":rt}),role:"menuitem",tabIndex:-1,type:"button",onClick:lt},Ot),t.createElement("div",{className:y({"rpv-core__menu-item-icon":!0,"rpv-core__menu-item-icon--ltr":!rt,"rpv-core__menu-item-icon--rtl":rt})},Y),t.createElement("div",{className:y({"rpv-core__menu-item-label":!0,"rpv-core__menu-item-label--ltr":!rt,"rpv-core__menu-item-label--rtl":rt})},U),t.createElement("div",{className:y({"rpv-core__menu-item-check":!0,"rpv-core__menu-item-check--ltr":!rt,"rpv-core__menu-item-check--rtl":rt})},D&&t.createElement(g,null)))},c.MinimalButton=function(i){var f=i.ariaLabel,D=f===void 0?"":f,U=i.ariaKeyShortcuts,V=U===void 0?"":U,Y=i.children,ft=i.isDisabled,it=ft!==void 0&&ft,z=i.isSelected,lt=z!==void 0&&z,rt=i.testId,Ot=i.onClick,Dt=t.useContext(j).direction===c.TextDirection.RightToLeft,It=rt?{"data-testid":rt}:{};return t.createElement("button",d({"aria-label":D},V&&{"aria-keyshortcuts":V},it&&{"aria-disabled":!0},{className:y({"rpv-core__minimal-button":!0,"rpv-core__minimal-button--disabled":it,"rpv-core__minimal-button--rtl":Dt,"rpv-core__minimal-button--selected":lt}),type:"button",onClick:Ot},It),Y)},c.Modal=function(i){var f=i.ariaControlsSuffix,D=i.closeOnClickOutside,U=i.closeOnEscape,V=i.content,Y=i.isOpened,ft=Y!==void 0&&Y,it=i.target,z=f||"".concat(s());return t.createElement(mt,{target:it?function(lt,rt){return t.createElement("div",{"aria-expanded":rt?"true":"false","aria-haspopup":"dialog","aria-controls":"rpv-core__modal-body-".concat(z)},it(lt,rt))}:null,content:function(lt){return t.createElement(L,null,t.createElement(F,{ariaControlsSuffix:z,closeOnClickOutside:D,closeOnEscape:U,onToggle:lt},V(lt)))},isOpened:ft})},c.Popover=function(i){var f=i.ariaHasPopup,D=f===void 0?"dialog":f,U=i.ariaControlsSuffix,V=i.closeOnClickOutside,Y=i.closeOnEscape,ft=i.content,it=i.lockScroll,z=it===void 0||it,lt=i.offset,rt=i.position,Ot=i.target,Dt=q(!1),It=Dt.opened,$t=Dt.toggle,zt=t.useRef(),Ut=t.useMemo((function(){return U||"".concat(s())}),[]);return t.createElement("div",{ref:zt,"aria-expanded":It?"true":"false","aria-haspopup":D,"aria-controls":"rpv-core__popver-body-".concat(Ut)},Ot($t,It),It&&t.createElement(t.Fragment,null,z&&t.createElement(wt,{closeOnEscape:Y,onClose:$t}),t.createElement(ut,{ariaControlsSuffix:Ut,closeOnClickOutside:V,offset:lt,position:rt,targetRef:zt,onClose:$t},ft($t))))},c.PrimaryButton=A,c.ProgressBar=function(i){var f=i.progress,D=t.useContext(j).direction===c.TextDirection.RightToLeft;return t.createElement("div",{className:y({"rpv-core__progress-bar":!0,"rpv-core__progress-bar--rtl":D})},t.createElement("div",{className:"rpv-core__progress-bar-progress",style:{width:"".concat(f,"%")}},f,"%"))},c.Separator=function(){return t.createElement("div",{className:"rpv-core__separator"})},c.Spinner=O,c.Splitter=function(i){var f=i.constrain,D=t.useContext(j).direction===c.TextDirection.RightToLeft,U=t.useRef(),V=t.useRef(),Y=t.useRef(),ft=t.useRef(0),it=t.useRef(0),z=t.useRef(0),lt=t.useRef(0),rt={capture:!0},Ot=function(It){var $t=U.current,zt=V.current,Ut=Y.current;if($t&&zt&&Ut){var Pe=lt.current,fe=It.clientX-ft.current,pe=z.current+(D?-fe:fe),be=$t.parentElement.getBoundingClientRect().width,ie=100*pe/be;if($t.classList.add("rpv-core__splitter--resizing"),f){var ye=be-pe-Pe;if(!f({firstHalfPercentage:ie,firstHalfSize:pe,secondHalfPercentage:100*ye/be,secondHalfSize:ye}))return}zt.style.width="".concat(ie,"%"),document.body.classList.add("rpv-core__splitter-body--resizing"),zt.classList.add("rpv-core__splitter-sibling--resizing"),Ut.classList.add("rpv-core__splitter-sibling--resizing")}},Dt=function(It){var $t=U.current,zt=V.current,Ut=Y.current;$t&&zt&&Ut&&(document.body.classList.remove("rpv-core__splitter-body--resizing"),$t.classList.remove("rpv-core__splitter--resizing"),zt.classList.remove("rpv-core__splitter-sibling--resizing"),Ut.classList.remove("rpv-core__splitter-sibling--resizing"),document.removeEventListener("mousemove",Ot,rt),document.removeEventListener("mouseup",Dt,rt))};return t.useEffect((function(){var It=U.current;It&&(lt.current=It.getBoundingClientRect().width,V.current=It.previousElementSibling,Y.current=It.nextElementSibling)}),[]),t.createElement("div",{ref:U,className:"rpv-core__splitter",onMouseDown:function(It){var $t=V.current;$t&&(ft.current=It.clientX,it.current=It.clientY,z.current=$t.getBoundingClientRect().width,document.addEventListener("mousemove",Ot,rt),document.addEventListener("mouseup",Dt,rt))}})},c.TextBox=w,c.ThemeContext=j,c.Tooltip=function(i){var f=i.ariaControlsSuffix,D=i.content,U=i.offset,V=i.position,Y=i.target,ft=q(!1),it=ft.opened,z=ft.toggle,lt=t.useRef(),rt=t.useRef(),Ot=t.useMemo((function(){return f||"".concat(s())}),[]);m((function(){lt.current&&document.activeElement&&lt.current.contains(document.activeElement)&&It()}));var Dt=function(){z(c.ToggleStatus.Open)},It=function(){z(c.ToggleStatus.Close)};return t.createElement(t.Fragment,null,t.createElement("div",{ref:lt,"aria-describedby":"rpv-core__tooltip-body-".concat(Ot),onBlur:function($t){$t.relatedTarget instanceof HTMLElement&&$t.currentTarget.parentElement&&$t.currentTarget.parentElement.contains($t.relatedTarget)?rt.current&&(rt.current.style.display="none"):It()},onFocus:Dt,onMouseEnter:Dt,onMouseLeave:It},Y),it&&t.createElement(Ft,{ariaControlsSuffix:Ot,contentRef:rt,offset:U,position:V,targetRef:lt},D()))},c.Viewer=function(i){var f=i.characterMap,D=i.defaultScale,U=i.enableSmoothScroll,V=U===void 0||U,Y=i.fileUrl,ft=i.httpHeaders,it=ft===void 0?{}:ft,z=i.initialPage,lt=z===void 0?0:z,rt=i.pageLayout,Ot=i.initialRotation,Dt=Ot===void 0?0:Ot,It=i.localization,$t=i.plugins,zt=$t===void 0?[]:$t,Ut=i.renderError,Pe=i.renderLoader,fe=i.renderPage,pe=i.renderProtectedView,be=i.scrollMode,ie=be===void 0?c.ScrollMode.Vertical:be,ye=i.setRenderRange,me=ye===void 0?Is:ye,Ie=i.transformGetDocumentParams,Fe=i.theme,De=Fe===void 0?{direction:c.TextDirection.LeftToRight,theme:"light"}:Fe,Ne=i.viewMode,je=Ne===void 0?c.ViewMode.SinglePage:Ne,nn=i.withCredentials,Xe=nn!==void 0&&nn,rn=i.onDocumentAskPassword,Ze=i.onDocumentLoad,tn=Ze===void 0?function(){}:Ze,en=i.onPageChange,Qe=en===void 0?function(){}:en,hn=i.onRotate,vn=hn===void 0?function(){}:hn,mn=i.onRotatePage,on=mn===void 0?function(){}:mn,dn=i.onSwitchTheme,_n=dn===void 0?function(){}:dn,ve=i.onZoom,ge=ve===void 0?function(){}:ve,re=t.useState({data:Y,name:typeof Y=="string"?Y:"",shouldLoad:!1}),de=re[0],se=re[1],Ae=function(Ge,Ye){se({data:Ye,name:Ge,shouldLoad:!0})},Ee=t.useState(!1),ue=Ee[0],Zt=Ee[1],Ce=at(de);t.useEffect((function(){var Ge,Ye,sn,We;Ge=Ce.data,We=typeof(Ye=Y),(sn=typeof Ge)=="string"&&We==="string"&&Ge===Ye||sn==="object"&&We==="object"&&Ge.length===Ye.length&&Ge.every((function(yn,Rn){return yn===Ye[Rn]}))||se({data:Y,name:typeof Y=="string"?Y:"",shouldLoad:ue})}),[Y,ue]);var Te=M({onVisibilityChanged:function(Ge){Zt(Ge.isVisible),Ge.isVisible&&se((function(Ye){return Object.assign({},Ye,{shouldLoad:!0})}))}}),qe=typeof De=="string"?{direction:c.TextDirection.LeftToRight,theme:De}:De,ze=t.useState(It||Q),cn=ze[0],un=ze[1],ke={l10n:cn,setL10n:un},ln=Object.assign({},{direction:qe.direction},Ls(qe.theme||"light",_n));return t.useEffect((function(){It&&un(It)}),[It]),t.createElement(ct.Provider,{value:ke},t.createElement(j.Provider,{value:ln},t.createElement("div",{ref:Te,className:"rpv-core__viewer rpv-core__viewer--".concat(ln.currentTheme),"data-testid":"core__viewer",style:{height:"100%",width:"100%"}},de.shouldLoad&&t.createElement(Fs,{characterMap:f,file:de.data,httpHeaders:it,render:function(Ge){return t.createElement(Ms,{defaultScale:D,doc:Ge,render:function(Ye,sn){return t.createElement(xs,{currentFile:{data:de.data,name:de.name},defaultScale:D,doc:Ge,enableSmoothScroll:V,initialPage:lt,initialRotation:Dt,initialScale:sn,pageLayout:rt,pageSizes:Ye,plugins:zt,renderPage:fe,scrollMode:ie,setRenderRange:me,viewMode:je,viewerState:{file:de,fullScreenMode:c.FullScreenMode.Normal,pageIndex:-1,pageHeight:Ye[0].pageHeight,pageWidth:Ye[0].pageWidth,pagesRotation:new Map,rotation:Dt,scale:sn,scrollMode:ie,viewMode:je},onDocumentLoad:tn,onOpenFile:Ae,onPageChange:Qe,onRotate:vn,onRotatePage:on,onZoom:ge})},scrollMode:ie,viewMode:je})},renderError:Ut,renderLoader:Pe,renderProtectedView:pe,transformGetDocumentParams:Ie,withCredentials:Xe,onDocumentAskPassword:rn}))))},c.Worker=function(i){var f=i.children,D=i.workerUrl;return Z.GlobalWorkerOptions.workerSrc=D,t.createElement(t.Fragment,null,f)},c.chunk=et,c.classNames=y,c.createStore=function(i){var f=i||{},D={},U=function(Y,ft){var it;f=d(d({},f),((it={})[Y]=ft,it)),(D[Y]||[]).forEach((function(z){return z(f[Y])}))},V=function(Y){return f[Y]};return{subscribe:function(Y,ft){D[Y]=(D[Y]||[]).concat(ft)},unsubscribe:function(Y,ft){D[Y]=(D[Y]||[]).filter((function(it){return it!==ft}))},update:function(Y,ft){U(Y,ft)},updateCurrentValue:function(Y,ft){var it=V(Y);it!==void 0&&U(Y,ft(it))},get:function(Y){return V(Y)}}},c.getDestination=le,c.getPage=Xt,c.isFullScreenEnabled=h,c.isMac=function(){return typeof window<"u"&&/(Mac|iPhone|iPod|iPad)/i.test(navigator.platform)},c.useDebounceCallback=bt,c.useIntersectionObserver=M,c.useIsMounted=nt,c.useIsomorphicLayoutEffect=b,c.usePrevious=at,c.useRenderQueue=N})(core_min)),core_min}var hasRequiredLib;function requireLib(){if(hasRequiredLib)return lib.exports;hasRequiredLib=1;/**
 * A React component to view a PDF document
 *
 * @see https://react-pdf-viewer.dev
 * @license https://react-pdf-viewer.dev/license
 * @copyright 2019-2023 Nguyen Huu Phuoc <me@phuoc.ng>
 */return lib.exports=requireCore_min(),lib.exports}var libExports=requireLib();function PDFViewer({fileUrl:c,isRtl:u=!0}){const[_t,l]=reactExports.useState(1),[E,t]=reactExports.useState(1),[Z,Ct]=reactExports.useState(0),W=()=>{const T=document.createElement("a");T.href=c,T.download="document.pdf",T.click()};return jsxRuntimeExports.jsxs("div",{dir:u?"rtl":"ltr",className:"space-y-4",children:[jsxRuntimeExports.jsxs("div",{className:"flex flex-wrap gap-2 justify-between items-center bg-white p-2 rounded shadow",children:[jsxRuntimeExports.jsxs("div",{className:"flex gap-2",children:[jsxRuntimeExports.jsx("button",{onClick:()=>l(T=>Math.max(T-1,1)),disabled:_t<=1,className:"text-gray-700 hover:text-blue-600",children:jsxRuntimeExports.jsx(ChevronRight,{})}),jsxRuntimeExports.jsx("span",{className:"text-sm px-2",children:u?`الصفحة ${_t}`:`Page ${_t}`}),jsxRuntimeExports.jsx("button",{onClick:()=>l(T=>T+1),className:"text-gray-700 hover:text-blue-600",children:jsxRuntimeExports.jsx(ChevronLeft,{})})]}),jsxRuntimeExports.jsxs("div",{className:"flex gap-2",children:[jsxRuntimeExports.jsx("button",{onClick:()=>t(T=>Math.min(T+.25,3)),className:"text-gray-700 hover:text-green-600",children:jsxRuntimeExports.jsx(ZoomIn,{})}),jsxRuntimeExports.jsx("button",{onClick:()=>t(T=>Math.max(T-.25,.5)),className:"text-gray-700 hover:text-red-600",children:jsxRuntimeExports.jsx(ZoomOut,{})}),jsxRuntimeExports.jsx("button",{onClick:()=>Ct(T=>(T+90)%360),className:"text-gray-700 hover:text-purple-600",children:jsxRuntimeExports.jsx(RotateCw,{})}),jsxRuntimeExports.jsx("button",{onClick:W,className:"text-gray-700 hover:text-blue-600",children:jsxRuntimeExports.jsx(Download,{})})]})]}),jsxRuntimeExports.jsx("div",{className:"bg-white p-4 border rounded shadow-md overflow-auto",children:jsxRuntimeExports.jsx(libExports.Worker,{workerUrl:"https://unpkg.com/pdfjs-dist@3.11.174/build/pdf.worker.min.js",children:jsxRuntimeExports.jsx(libExports.Viewer,{fileUrl:c,defaultScale:E,rotation:Z})})})]})}const PDFViewer$1=Object.freeze(Object.defineProperty({__proto__:null,default:PDFViewer},Symbol.toStringTag,{value:"Module"}));export{SquarePen as $,ArrowLeftFromLine as A,Bell as B,ChevronRight as C,File as D,Layers as E,FileText as F,Globe as G,ShieldCheck as H,BadgeDollarSign as I,Calendar as J,BookmarkPlus as K,LockKeyhole as L,Mail as M,Notebook as N,FolderOpen as O,Phone as P,Building2 as Q,React$1 as R,SunMedium as S,ToggleRight as T,UserCheck as U,CalendarDays as V,WalletCards as W,Hash as X,Paperclip as Y,ChevronUp as Z,Eye as _,React as a,PDFViewer$1 as a0,MoonStar as b,Menu as c,ListTree as d,Settings2 as e,UsersRound as f,ChevronDown as g,User as h,ToggleLeft as i,jsxRuntimeExports as j,Pen as k,Trash2 as l,FolderOpenDot as m,FolderKanban as n,ChevronsDown as o,ChevronsLeft as p,Plus as q,reactExports as r,Pencil as s,Trash as t,ArrowRightFromLine as u,MapPinned as v,Users as w,ReceiptText as x,ArrowLeft as y,CircleX as z};
