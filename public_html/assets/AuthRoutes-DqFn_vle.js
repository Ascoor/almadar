const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/Dashboard-DU9te_7b.js","assets/pdf-_01J5l0m.js","assets/react-DxiZ5OBW.js","assets/pdf-Du6EuK7o.css","assets/index-C9wc903-.js","assets/vendor-CTvvdsW_.js","assets/index-Dt2JeuVK.css","assets/ProfileUser-DG1F7_0k.js","assets/ContractsPage-GyTeDdkS.js","assets/ContractDetailsPage-5HfclgPT.js","assets/InvestigationsPage-BOZRWMus.js","assets/TableComponent-oKqWs0n5.js","assets/SectionHeader-CPTYPmPH.js","assets/InvestigationDetailsPage-BtvT4dnh.js","assets/LegalAdvicePage-txdxZL9a.js","assets/LegalAdviceDetailsPage-MBC-Hb9j.js","assets/LitigationsPage-CwUeWyh9.js","assets/LitigationDetailsPage-CgUEutFb.js","assets/UserManagementPage-DuG_Du1G.js","assets/GlobalConfirmDeleteModal-DPvq9hXw.js","assets/ArchivePage-CAL4QAKX.js","assets/ManagementSettings-Lj-oBYrh.js","assets/ReportsPage-DWN2sRal.js"])))=>i.map(i=>d[i]);
import{A as P,N as v,g as w,c as D,t as x,d as L,e as I,f as O,b as T,G as y,R as S,h as t,_ as r}from"./index-C9wc903-.js";import{j as e}from"./pdf-_01J5l0m.js";import{a as s}from"./react-DxiZ5OBW.js";import"./vendor-CTvvdsW_.js";function z(){return e.jsx("div",{className:"text-center text-red-600 text-xl font-bold mt-20",children:"🚫 غير مصرح لك بالوصول إلى هذه الصفحة"})}const i=({permission:o,children:c,superAdminOnly:u=!1})=>{const{hasPermission:m,user:l}=s.useContext(P),p=l?.email==="superadmin@almadar.ly";return u&&!p?e.jsx(v,{to:"/forbidden",replace:!0}):(Array.isArray(o)?o:[o]).every(d=>m(d))?c:e.jsx(v,{to:"/forbidden",replace:!0})};function C(){const{user:o,updateUserContext:c}=s.useContext(P),[u,m]=s.useState(null),[l,p]=s.useState({name:"",email:"",image:null}),[h,j]=s.useState(null),[d,g]=s.useState({old_password:"",new_password:"",new_password_confirmation:""});s.useEffect(()=>{const n=async()=>{try{const a=await w(o.id);m(a.user),p({name:a.user.name,email:a.user.email,image:null}),a.user.image&&j(`${D.baseURL}/${a.user.image}`)}catch{x.error("فشل تحميل الملف الشخصي")}};o?.id&&n()},[o]);const f=n=>{const{name:a,value:b,files:A}=n.target;if(a==="image"){const _=A[0];p(R=>({...R,image:_})),j(URL.createObjectURL(_))}else p(_=>({..._,[a]:b}))},E=async n=>{n.preventDefault();const a=new FormData;a.append("name",l.name),a.append("email",l.email),l.image&&a.append("image",l.image);try{await L(o.id,a),x.success("✅ تم تحديث البيانات بنجاح");const b=await w(o.id);c(b.user)}catch{x.error("حدث خطأ أثناء التحديث")}},N=async n=>{n.preventDefault();try{await I(o.id,d),x.success("✅ تم تغيير كلمة المرور"),g({old_password:"",new_password:"",new_password_confirmation:""})}catch(a){x.error(a.response?.data?.message||"فشل تغيير كلمة المرور")}};return o?e.jsxs("div",{className:"max-w-3xl mx-auto p-6 space-y-10",children:[e.jsxs("div",{className:"p-6 space-y-6 rounded-lg shadow bg-card",children:[e.jsx("h2",{className:"text-2xl font-bold",children:"الملف الشخصي"}),e.jsxs("form",{onSubmit:E,className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:"الاسم"}),e.jsx("input",{type:"text",name:"name",value:l.name,onChange:f,className:"w-full px-3 py-2 rounded border border-border bg-bg text-fg"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:"البريد الإلكتروني"}),e.jsx("input",{type:"email",name:"email",value:l.email,onChange:f,className:"w-full px-3 py-2 rounded border border-border bg-bg text-fg"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:"الصورة الشخصية"}),e.jsx("input",{type:"file",name:"image",onChange:f,className:"w-full"}),h&&e.jsx("img",{src:h,alt:"صورة المستخدم",className:"w-24 h-24 mt-2 rounded-full object-cover"})]}),e.jsx("button",{type:"submit",className:"rounded-2xl px-4 py-2 bg-primary text-[color:var(--primary-foreground)] hover:shadow-glow transition",children:"حفظ التغييرات"})]})]}),e.jsxs("div",{className:"p-6 space-y-6 rounded-lg shadow bg-card",children:[e.jsx("h2",{className:"text-2xl font-bold",children:"تغيير كلمة المرور"}),e.jsxs("form",{onSubmit:N,className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:"كلمة المرور الحالية"}),e.jsx("input",{type:"password",name:"old_password",value:d.old_password,onChange:n=>g({...d,old_password:n.target.value}),className:"w-full rounded-xl bg-card border border-border text-fg placeholder:text-muted focus:ring-2 focus:ring-ring focus:border-border px-3 py-2"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:"كلمة المرور الجديدة"}),e.jsx("input",{type:"password",name:"new_password",value:d.new_password,onChange:n=>g({...d,new_password:n.target.value}),className:"w-full rounded-xl bg-card border border-border text-fg placeholder:text-muted focus:ring-2 focus:ring-ring focus:border-border px-3 py-2"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:"تأكيد كلمة المرور"}),e.jsx("input",{type:"password",name:"new_password_confirmation",value:d.new_password_confirmation,onChange:n=>g({...d,new_password_confirmation:n.target.value}),className:"w-full rounded-xl bg-card border border-border text-fg placeholder:text-muted focus:ring-2 focus:ring-ring focus:border-border px-3 py-2"})]}),e.jsx("button",{type:"submit",className:"rounded-2xl px-4 py-2 bg-accent text-fg hover:shadow-glow transition",children:"تغيير كلمة المرور"})]})]})]}):e.jsx("div",{className:"mt-10 text-center text-muted",children:"تحميل البيانات..."})}const V=s.lazy(()=>r(()=>import("./Dashboard-DU9te_7b.js"),__vite__mapDeps([0,1,2,3,4,5,6]))),F=s.lazy(()=>r(()=>import("./ProfileUser-DG1F7_0k.js"),__vite__mapDeps([7,1,2,3,4,5,6]))),U=s.lazy(()=>r(()=>import("./ContractsPage-GyTeDdkS.js"),__vite__mapDeps([8,4,1,2,3,5,6]))),k=s.lazy(()=>r(()=>import("./ContractDetailsPage-5HfclgPT.js"),__vite__mapDeps([9,4,1,2,3,5,6]))),G=s.lazy(()=>r(()=>import("./InvestigationsPage-BOZRWMus.js"),__vite__mapDeps([10,4,1,2,3,5,6,11,12]))),M=s.lazy(()=>r(()=>import("./InvestigationDetailsPage-BtvT4dnh.js"),__vite__mapDeps([13,4,1,2,3,5,6]))),$=s.lazy(()=>r(()=>import("./LegalAdvicePage-txdxZL9a.js"),__vite__mapDeps([14,4,1,2,3,5,6,11,12]))),H=s.lazy(()=>r(()=>import("./LegalAdviceDetailsPage-MBC-Hb9j.js"),__vite__mapDeps([15,4,1,2,3,5,6]))),q=s.lazy(()=>r(()=>import("./LitigationsPage-CwUeWyh9.js"),__vite__mapDeps([16,4,1,2,3,5,6,12]))),B=s.lazy(()=>r(()=>import("./LitigationDetailsPage-CgUEutFb.js"),__vite__mapDeps([17,4,1,2,3,5,6]))),J=s.lazy(()=>r(()=>import("./UserManagementPage-DuG_Du1G.js"),__vite__mapDeps([18,1,2,3,4,5,6,12,11,19]))),K=s.lazy(()=>r(()=>import("./ArchivePage-CAL4QAKX.js"),__vite__mapDeps([20,4,1,2,3,5,6]))),Q=s.lazy(()=>r(()=>import("./ManagementSettings-Lj-oBYrh.js"),__vite__mapDeps([21,4,1,2,3,5,6]))),W=s.lazy(()=>r(()=>import("./ReportsPage-DWN2sRal.js"),__vite__mapDeps([22,1,2,3,4,5,6]))),X=()=>e.jsx("h1",{className:"text-center text-red-500",children:"404 - Page Not Found"}),te=()=>{const{showSpinner:o,hideSpinner:c,loading:u}=O(),m=T();return s.useEffect(()=>{o();const l=setTimeout(()=>{c()},600);return()=>clearTimeout(l)},[m]),e.jsxs(e.Fragment,{children:[u&&e.jsx(y,{}),e.jsx(s.Suspense,{fallback:e.jsx(y,{}),children:e.jsxs(S,{children:[e.jsx(t,{path:"/",element:e.jsx(V,{})}),e.jsx(t,{path:"/profile/:userId",element:e.jsx(F,{})}),e.jsx(t,{path:"/archive",element:e.jsx(K,{})}),e.jsx(t,{path:"/contracts",element:e.jsx(i,{permission:"view contracts",children:e.jsx(U,{})})}),e.jsx(t,{path:"/contracts/:id",element:e.jsx(i,{permission:"view contracts",children:e.jsx(k,{})})}),e.jsx(t,{path:"/profile",element:e.jsx(i,{permission:"view profile",children:e.jsx(C,{})})}),e.jsx(t,{path:"/users",element:e.jsx(i,{permission:"view users",children:e.jsx(J,{})})}),e.jsx(t,{path:"/legal/investigations",element:e.jsx(i,{permission:"view investigations",children:e.jsx(G,{})})}),e.jsx(t,{path:"/legal/investigations/:id",element:e.jsx(i,{permission:"view investigations",children:e.jsx(M,{})})}),e.jsx(t,{path:"/legal/legal-advices",element:e.jsx(i,{permission:"view legaladvices",children:e.jsx($,{})})}),e.jsx(t,{path:"/legal/legal-advices/:id",element:e.jsx(i,{permission:"view legaladvices",children:e.jsx(H,{})})}),e.jsx(t,{path:"/legal/litigations",element:e.jsx(i,{permission:"view litigations",children:e.jsx(q,{})})}),e.jsx(t,{path:"/legal/litigations/:id",element:e.jsx(i,{permission:"view litigations",children:e.jsx(B,{})})}),e.jsx(t,{path:"/managment-lists",element:e.jsx(i,{permission:"view managment-lists",children:e.jsx(Q,{})})}),e.jsx(t,{path:"/reports-page",element:e.jsx(W,{})}),e.jsx(t,{path:"/forbidden",element:e.jsx(z,{})}),e.jsx(t,{path:"*",element:e.jsx(X,{})})]})})]})};export{te as default};
