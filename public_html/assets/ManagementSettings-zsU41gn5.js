const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/GlobalConfirmDeleteModal-POJBepxz.js","assets/pdf-D5yLTPdL.js","assets/react-UnWXGYuj.js","assets/pdf-Du6EuK7o.css","assets/SectionHeader-DYN9xJld.js"])))=>i.map(i=>d[i]);
import{q as G,Z as V,$ as A,a0 as W,a1 as F,m as c,a2 as H,C as S,a3 as U,a4 as Z,a5 as B,a6 as J,t as d,a7 as X,a8 as Y,a9 as ee,aa as ae,ab as te,ac as se,ad as ie,ae as re,_ as I}from"./index-BrCJu-Nk.js";import{r as t,j as e,q as ne,a as oe,s as ce,t as de}from"./pdf-D5yLTPdL.js";import"./react-UnWXGYuj.js";import"./vendor-CTvvdsW_.js";const le="/assets/procedures-icon-Dx5kz3Ua.png",pe=t.lazy(()=>I(()=>import("./GlobalConfirmDeleteModal-POJBepxz.js"),__vite__mapDeps([0,1,2,3]))),ue=t.lazy(()=>I(()=>import("./SectionHeader-DYN9xJld.js"),__vite__mapDeps([4,1,2,3]))),_=5;function be(){const{hasPermission:P}=G(),E="managment-lists",n=V(),{data:M=[]}=A("litigation"),{data:O=[]}=A("investigation"),{data:D=[]}=W(),{data:q=[]}=F(),[Q,me]=t.useState({}),[z,x]=t.useState(!1),[l,y]=t.useState(""),[p,w]=t.useState(""),[v,j]=t.useState(!1),[u,k]=t.useState(null),[g,f]=t.useState({isOpen:!1,id:null,name:"",type:""}),[N,L]=t.useState(null),m=a=>P(`${a} ${E}`),h=(a,r)=>r==="contract"?a.name:r==="advice"?a.type_name:a.action_name,R=async()=>{const{id:a,type:r}=g;try{switch(r){case"litigation":await J(a);break;case"investigation":await B(a);break;case"contract":await Z(a);break;case"advice":await U(a);break}d.success("تم الحذف بنجاح"),f({isOpen:!1,id:null,name:"",type:""}),n.invalidateQueries(["actionTypes",r]),n.invalidateQueries({queryKey:["contractCategories"]}),n.invalidateQueries({queryKey:["adviceTypes"]})}catch{d.error("فشل في حذف العنصر")}},K=async()=>{if(!l.trim())return d.error("الرجاء إدخال اسم صالح");const a=p==="contract"?{name:l}:p==="advice"?{type_name:l}:{action_name:l};try{if(v&&u!==null){switch(p){case"litigation":await ae(u,a);break;case"investigation":await ee(u,a);break;case"contract":await Y(u,a);break;case"advice":await X(u,a);break}d.success("تم التحديث بنجاح")}else{switch(p){case"litigation":await re(a);break;case"investigation":await ie(a);break;case"contract":await se(a);break;case"advice":await te(a);break}d.success("تمت الإضافة بنجاح")}x(!1),y(""),j(!1),k(null),n.invalidateQueries(["actionTypes",p]),n.invalidateQueries({queryKey:["contractCategories"]}),n.invalidateQueries({queryKey:["adviceTypes"]})}catch{d.error("فشل في العملية")}},b=(a,r,s,$=.1)=>{const C=Q[s]||1,T=Array.isArray(r)?r.slice((C-1)*_,C*_):[];return e.jsxs(c.div,{initial:{opacity:0,y:50},animate:{opacity:1,y:0},transition:{delay:$,type:"spring",stiffness:80,damping:14},className:"mt-6 border border-border rounded-xl p-4 shadow-lg shadow-primary/20",children:[e.jsx("h3",{className:"p-6 text-xl font-bold text-center bg-secondary/20 text-card-foreground shadow-md",children:a}),e.jsx("div",{className:"flex justify-between items-center mb-4",children:m("create")&&e.jsxs("button",{onClick:()=>{x(!0),w(s),j(!1),y("")},className:"flex items-center gap-2 px-4 py-2 text-sm rounded-lg bg-primary text-primary-foreground hover:bg-primary-hover hover:scale-105 transition",children:[e.jsx(ne,{}),e.jsx("span",{children:"إضافة"})]})}),T.length===0?e.jsx("p",{className:"text-muted-foreground",children:"لا توجد بيانات"}):e.jsxs("table",{className:"min-w-full text-sm text-center table-auto border border-border rounded-xl overflow-hidden shadow-lg",children:[e.jsx("thead",{className:"bg-primary-light/40 text-foreground",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-4 py-3 border-b border-border",children:"الاسم"}),m("edit")&&e.jsx("th",{className:"border-b border-border",children:"تعديل"}),m("delete")&&e.jsx("th",{className:"border-b border-border",children:"الإجراء"})]})}),e.jsx("tbody",{className:"text-foreground bg-card",children:T.map(i=>e.jsxs(oe.Fragment,{children:[e.jsxs(c.tr,{initial:{opacity:0,x:30},animate:{opacity:1,x:0},transition:{duration:.4},className:"border-t border-border transition-colors cursor-pointer hover:bg-primary/10",onClick:()=>L(o=>o?.id===i.id&&o?.type===s?null:{id:i.id,type:s}),children:[e.jsx("td",{className:"px-4 py-2",children:h(i,s)}),m("edit")&&e.jsx("td",{children:e.jsx("button",{onClick:o=>{o.stopPropagation(),x(!0),w(s),j(!0),k(i.id),y(h(i,s))},className:"hover:text-primary transition",children:e.jsx(ce,{className:"text-primary",absoluteStrokeWidth:!0,size:18})})}),m("delete")&&e.jsx("td",{children:e.jsx("button",{onClick:o=>{o.stopPropagation(),f({isOpen:!0,id:i.id,name:h(i,s),type:s})},className:"hover:text-red-500 dark:hover:text-red-400 transition",children:e.jsx(de,{color:"red",absoluteStrokeWidth:!0,size:18})})})]}),e.jsx(S,{children:N?.id===i.id&&N?.type===s&&e.jsx(c.tr,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},exit:{opacity:0,y:-10},transition:{duration:.3},children:e.jsxs("td",{colSpan:3,className:"p-4 bg-muted/30 dark:bg-navy/30 text-right rounded-b-xl text-gray-700 dark:text-navy-darker",children:["تفاصيل إضافية للعنصر:"," ",e.jsx("strong",{children:h(i,s)})]})},`expanded-${i.id}`)})]},i.id))})]})]})};return e.jsxs(c.div,{className:"p-6",initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},children:[e.jsx(t.Suspense,{fallback:e.jsx(H,{}),children:e.jsx(c.div,{initial:{y:-80,opacity:0},animate:{y:0,opacity:1},transition:{type:"spring",stiffness:60,damping:14},children:e.jsx(ue,{listName:"قوائم البيانات",icon:le})})}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 xl:grid-cols-2 gap-6 mt-8",children:[b("إجراءات التقاضي",M,"litigation",.1),b("إجراءات التحقيق",O,"investigation",.2),b("فئات العقود",D,"contract",.3),b("أنواع الرأي والمشورة",q,"advice",.4)]}),e.jsx(S,{children:z&&e.jsx(c.div,{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/50",initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.9,opacity:0},children:e.jsxs("div",{className:"bg-white dark:bg-background w-full max-w-md p-6 rounded-xl shadow-xl",children:[e.jsx("h2",{className:"text-lg font-bold mb-4",children:v?"تعديل العنصر":"إضافة عنصر جديد"}),e.jsx("input",{value:l,onChange:a=>y(a.target.value),placeholder:"أدخل الاسم هنا",className:"w-full p-2 border border-greenic-light dark:border-navy rounded mb-4"}),e.jsxs("div",{className:"flex justify-end gap-2",children:[e.jsx("button",{className:"bg-muted px-4 py-2 rounded",onClick:()=>x(!1),children:"إلغاء"}),e.jsx("button",{className:"bg-primary text-white px-4 py-2 rounded",onClick:K,children:v?"حفظ":"إضافة"})]})]})})}),e.jsx(t.Suspense,{fallback:null,children:g.isOpen&&e.jsx(pe,{isOpen:g.isOpen,onClose:()=>f({isOpen:!1,id:null,name:"",type:""}),onConfirm:R,itemName:g.name})})]})}export{be as default};
