const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/SectionHeader-DYN9xJld.js","assets/pdf-D5yLTPdL.js","assets/react-UnWXGYuj.js","assets/pdf-Du6EuK7o.css"])))=>i.map(i=>d[i]);
import{j as g,c as m,t as h,_ as u}from"./index-BrCJu-Nk.js";import{j as e,F as b,r,m as f,n as _,o as N,p as w}from"./pdf-D5yLTPdL.js";import"./react-UnWXGYuj.js";import"./vendor-CTvvdsW_.js";const y="/assets/archives-icon-Bs1-ZxH_.png",F=()=>g.get("/api/archives");function P({file:s,onPreview:l}){const n=()=>{l&&l(s)};return e.jsxs("div",{className:"p-4 border rounded bg-white shadow-sm space-y-2",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(b,{className:"text-red-500 w-6 h-6"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h3",{className:"text-blue-600 font-semibold truncate",children:s.number||"بدون رقم"}),e.jsx("h4",{className:"text-blue-600 font-semibold truncate",children:s.title||"بدون عنوان"}),e.jsx("p",{className:"text-xs text-gray-500 truncate",children:s.extracted_text?.slice(0,60)||"لا يوجد نص"})]}),s.file_type&&e.jsx("span",{className:"text-[10px] text-gray-500 border px-1 rounded",children:s.file_type})]}),s.file_path&&e.jsx("p",{className:"text-[10px] text-gray-400 truncate",children:s.file_path}),e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("button",{onClick:n,className:"text-green-600 hover:underline",children:"معاينة"}),e.jsx("a",{href:`${m.baseURL}/storage/${s.file_path}`,target:"_blank",rel:"noreferrer",className:"text-blue-600 hover:underline",children:"تحميل"})]})]})}const A=r.lazy(()=>u(()=>import("./SectionHeader-DYN9xJld.js"),__vite__mapDeps([0,1,2,3]))),C=r.lazy(()=>u(()=>import("./pdf-D5yLTPdL.js").then(s=>s.a0),__vite__mapDeps([1,2,3])));function D(){const[s,l]=r.useState({}),[n,p]=r.useState({}),[d,x]=r.useState(null);r.useEffect(()=>{(async()=>{try{const c=((await F())?.data?.data||[]).reduce((i,o)=>(i[o.model_type]=i[o.model_type]||[],i[o.model_type].push(o),i),{});l(c)}catch{h.error("فشل تحميل الملفات")}})()},[]);const j=t=>{p(a=>({...a,[t]:!a[t]}))},v=t=>{if(!t?.file_path){h.error("المسار غير متوفر للملف");return}const a=`${m.baseURL}/open-pdf/${t.file_path}`;x(a)};return e.jsxs("div",{className:"p-6 space-y-8 overflow-y-auto max-h-screen",children:[e.jsx(r.Suspense,{fallback:e.jsx("div",{className:"text-center text-sm",children:"تحميل العنوان..."}),children:e.jsx(A,{icon:y,listName:"الأرشيف"})}),Object.keys(s).length===0?e.jsx("p",{className:"text-center text-gray-500",children:"لا توجد ملفات حالياً."}):Object.entries(s).map(([t,a])=>e.jsxs("div",{children:[e.jsxs("button",{onClick:()=>j(t),className:"flex items-center gap-2 text-xl font-semibold text-blue-700",children:[n[t]?e.jsx(f,{}):e.jsx(_,{}),n[t]?e.jsx(N,{}):e.jsx(w,{}),e.jsx("span",{children:k(t)})]}),n[t]&&e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 gap-4 mt-2",children:a.map(c=>e.jsx(P,{file:c,onPreview:v},c.id))})]},t)),d&&e.jsxs("div",{className:"mt-10 bg-gray-100 p-4 rounded-lg shadow-md",children:[e.jsxs("div",{className:"flex justify-between items-center mb-2",children:[e.jsx("h3",{className:"text-lg font-semibold",children:"معاينة الملف"}),e.jsx("button",{onClick:()=>x(null),className:"text-red-500 hover:underline",children:"إغلاق"})]}),e.jsx(r.Suspense,{fallback:e.jsx("div",{className:"text-center text-sm",children:"تحميل عارض PDF..."}),children:e.jsx(C,{fileUrl:d})})]})]})}function k(s){return{Contract:"عقود",LegalAdvice:"مشورة أو راي",Case:"قضايا"}[s]||s}export{D as default};
