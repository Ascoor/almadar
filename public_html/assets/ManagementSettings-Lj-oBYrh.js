const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/GlobalConfirmDeleteModal-DPvq9hXw.js","assets/pdf-_01J5l0m.js","assets/react-DxiZ5OBW.js","assets/pdf-Du6EuK7o.css","assets/SectionHeader-CPTYPmPH.js"])))=>i.map(i=>d[i]);
import{q as V,Y as G,Z as A,$ as W,a0 as F,m as c,a1 as H,y as S,a2 as U,a3 as Y,a4 as Z,a5 as B,t as d,a6 as J,a7 as X,a8 as ee,a9 as ae,aa as te,ab as se,ac as ie,ad as ne,_ as I}from"./index-C9wc903-.js";import{j as e}from"./pdf-_01J5l0m.js";import{a as t,O as re,h as oe,Q as ce,V as de}from"./react-DxiZ5OBW.js";import"./vendor-CTvvdsW_.js";const le="/assets/procedures-icon-Dx5kz3Ua.png",pe=t.lazy(()=>I(()=>import("./GlobalConfirmDeleteModal-DPvq9hXw.js"),__vite__mapDeps([0,1,2,3]))),me=t.lazy(()=>I(()=>import("./SectionHeader-CPTYPmPH.js"),__vite__mapDeps([4,1,2,3]))),_=5;function be(){const{hasPermission:P}=V(),E="managment-lists",r=G(),{data:O=[]}=A("litigation"),{data:M=[]}=A("investigation"),{data:D=[]}=W(),{data:Q=[]}=F(),[q,ue]=t.useState({}),[z,x]=t.useState(!1),[l,y]=t.useState(""),[p,w]=t.useState(""),[v,j]=t.useState(!1),[m,N]=t.useState(null),[h,f]=t.useState({isOpen:!1,id:null,name:"",type:""}),[k,L]=t.useState(null),u=a=>P(`${a} ${E}`),g=(a,n)=>n==="contract"?a.name:n==="advice"?a.type_name:a.action_name,R=async()=>{const{id:a,type:n}=h;try{switch(n){case"litigation":await B(a);break;case"investigation":await Z(a);break;case"contract":await Y(a);break;case"advice":await U(a);break}d.success("تم الحذف بنجاح"),f({isOpen:!1,id:null,name:"",type:""}),r.invalidateQueries(["actionTypes",n]),r.invalidateQueries({queryKey:["contractCategories"]}),r.invalidateQueries({queryKey:["adviceTypes"]})}catch{d.error("فشل في حذف العنصر")}},K=async()=>{if(!l.trim())return d.error("الرجاء إدخال اسم صالح");const a=p==="contract"?{name:l}:p==="advice"?{type_name:l}:{action_name:l};try{if(v&&m!==null){switch(p){case"litigation":await ae(m,a);break;case"investigation":await ee(m,a);break;case"contract":await X(m,a);break;case"advice":await J(m,a);break}d.success("تم التحديث بنجاح")}else{switch(p){case"litigation":await ne(a);break;case"investigation":await ie(a);break;case"contract":await se(a);break;case"advice":await te(a);break}d.success("تمت الإضافة بنجاح")}x(!1),y(""),j(!1),N(null),r.invalidateQueries(["actionTypes",p]),r.invalidateQueries({queryKey:["contractCategories"]}),r.invalidateQueries({queryKey:["adviceTypes"]})}catch{d.error("فشل في العملية")}},b=(a,n,s,$=.1)=>{const T=q[s]||1,C=Array.isArray(n)?n.slice((T-1)*_,T*_):[];return e.jsxs(c.div,{initial:{opacity:0,y:50},animate:{opacity:1,y:0},transition:{delay:$,type:"spring",stiffness:80,damping:14},className:"mt-6 border border-border rounded-xl p-4 shadow-lg shadow-primary/20",children:[e.jsx("h3",{className:"p-6 text-xl font-bold text-center bg-secondary/20 text-fg shadow-md",children:a}),e.jsx("div",{className:"flex justify-between items-center mb-4",children:u("create")&&e.jsxs("button",{onClick:()=>{x(!0),w(s),j(!1),y("")},className:"flex items-center gap-2 rounded-2xl px-4 py-2 text-sm bg-primary text-[color:var(--primary-foreground)] hover:shadow-glow hover:scale-105 transition",children:[e.jsx(re,{}),e.jsx("span",{children:"إضافة"})]})}),C.length===0?e.jsx("p",{className:"text-muted",children:"لا توجد بيانات"}):e.jsxs("table",{className:"min-w-full text-sm text-center table-auto border border-border rounded-xl overflow-hidden shadow-lg",children:[e.jsx("thead",{className:"bg-/40 text-fg",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-4 py-3 border-b border-border",children:"الاسم"}),u("edit")&&e.jsx("th",{className:"border-b border-border",children:"تعديل"}),u("delete")&&e.jsx("th",{className:"border-b border-border",children:"الإجراء"})]})}),e.jsx("tbody",{className:"text-fg bg-card",children:C.map(i=>e.jsxs(oe.Fragment,{children:[e.jsxs(c.tr,{initial:{opacity:0,x:30},animate:{opacity:1,x:0},transition:{duration:.4},className:"border-t border-border transition-colors cursor-pointer hover:bg-primary/10",onClick:()=>L(o=>o?.id===i.id&&o?.type===s?null:{id:i.id,type:s}),children:[e.jsx("td",{className:"px-4 py-2",children:g(i,s)}),u("edit")&&e.jsx("td",{children:e.jsx("button",{onClick:o=>{o.stopPropagation(),x(!0),w(s),j(!0),N(i.id),y(g(i,s))},className:"hover:text-primary transition",children:e.jsx(ce,{className:"text-primary",absoluteStrokeWidth:!0,size:18})})}),u("delete")&&e.jsx("td",{children:e.jsx("button",{onClick:o=>{o.stopPropagation(),f({isOpen:!0,id:i.id,name:g(i,s),type:s})},className:"hover:text-red-500 dark:hover:text-red-400 transition",children:e.jsx(de,{color:"red",absoluteStrokeWidth:!0,size:18})})})]}),e.jsx(S,{children:k?.id===i.id&&k?.type===s&&e.jsx(c.tr,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},exit:{opacity:0,y:-10},transition:{duration:.3},children:e.jsxs("td",{colSpan:3,className:"p-4 bg-muted/30 dark:bg-navy/30 text-right rounded-b-xl text-gray-700 dark:text-navy-darker",children:["تفاصيل إضافية للعنصر:"," ",e.jsx("strong",{children:g(i,s)})]})},`expanded-${i.id}`)})]},i.id))})]})]})};return e.jsxs(c.div,{className:"p-6",initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},children:[e.jsx(t.Suspense,{fallback:e.jsx(H,{}),children:e.jsx(c.div,{initial:{y:-80,opacity:0},animate:{y:0,opacity:1},transition:{type:"spring",stiffness:60,damping:14},children:e.jsx(me,{listName:"قوائم البيانات",icon:le})})}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 xl:grid-cols-2 gap-6 mt-8",children:[b("إجراءات التقاضي",O,"litigation",.1),b("إجراءات التحقيق",M,"investigation",.2),b("فئات العقود",D,"contract",.3),b("أنواع الرأي والمشورة",Q,"advice",.4)]}),e.jsx(S,{children:z&&e.jsx(c.div,{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/50",initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.9,opacity:0},children:e.jsxs("div",{className:"bg-white dark:bg-bg w-full max-w-md p-6 rounded-xl shadow-xl",children:[e.jsx("h2",{className:"text-lg font-bold mb-4",children:v?"تعديل العنصر":"إضافة عنصر جديد"}),e.jsx("input",{value:l,onChange:a=>y(a.target.value),placeholder:"أدخل الاسم هنا",className:"w-full p-2 border border-greenic-light dark:border-navy rounded mb-4"}),e.jsxs("div",{className:"flex justify-end gap-2",children:[e.jsx("button",{className:"bg-muted px-4 py-2 rounded",onClick:()=>x(!1),children:"إلغاء"}),e.jsx("button",{className:"bg-primary text-white px-4 py-2 rounded",onClick:K,children:v?"حفظ":"إضافة"})]})]})})}),e.jsx(t.Suspense,{fallback:null,children:h.isOpen&&e.jsx(pe,{isOpen:h.isOpen,onClose:()=>f({isOpen:!1,id:null,name:"",type:""}),onConfirm:R,itemName:h.name})})]})}export{be as default};
