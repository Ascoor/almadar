# إصلاح مشاكل قصّ النوافذ المنبثقة داخل الكروت والجداول

## أين كانت المشكلة؟
عند فتح نماذج الإضافة/التعديل من داخل جداول الإجراءات في صفحات التفاصيل، كان المودال يُرسم داخل نفس بطاقة التفاصيل أو داخل حاوية الجدول. هذه الحاويات تستخدم أحيانًا `overflow-hidden` أو تنشئ سياقات تكديس بسبب `transform`، مما جعل المودال يظهر مقصوصًا ولا يغطي الشاشة بالكامل.

## لماذا حدث ذلك؟
مكوّن `ModalCard` كان يُعيد العناصر مباشرة داخل شجرة المكوّن الحالية بدون استخدام Portal. لذلك بقي تابعًا للـ DOM الأب المتأثر بقيود القصّ والـ stacking context الخاصة بالكارت/الجدول، فتعطلت تغطية الشاشة وظهرت الحواف مقصوصة.

## ما الذي تغير؟
- تم تحديث `ModalCard` ليستخدم `createPortal` ويُرسم دائمًا تحت `document.body` مع طبقة تغطية ثابتة وز-index مرتفع.
- أُضيف إغلاق المودال بالضغط خارج المحتوى أو عبر مفتاح ESC.
- ظلّ حاوي المودال يدعم `max-height 90vh` مع تمرير داخلي لضمان ظهور كامل المحتوى على الشاشات الصغيرة والكبيرة.
